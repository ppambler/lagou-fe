### âœï¸ Tangxt â³ 2021-11-28 ğŸ·ï¸ Vue

# 06-19-å‘å¸ƒéƒ¨ç½²

## â˜…åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªç±»ä¼¼ `devServer` çš„æœåŠ¡

`test-server/app.js`

> éœ€è¦å®‰è£…`express`å’Œ`http-proxy-middleware`è¿™ä¸¤ä¸ªä¾èµ–

``` js
const express = require('express')
const app = express()
const path = require('path')
const { createProxyMiddleware } = require('http-proxy-middleware')

// æ‰˜ç®¡äº† dist ç›®å½•ï¼Œå½“è®¿é—® / çš„æ—¶å€™ï¼Œé»˜è®¤ä¼šè¿”å›æ‰˜ç®¡ç›®å½•ä¸­çš„ index.html æ–‡ä»¶
app.use(express.static(path.join(__dirname, '../dist')))

app.use('/boss', createProxyMiddleware({
  target: 'http://eduboss.lagou.com',
  changeOrigin: true
}))

app.use('/front', createProxyMiddleware({
  target: 'http://edufront.lagou.com',
  changeOrigin: true
}))

app.listen(3000, () => {
  console.log('running...')
})
```

æ·»åŠ ä¸€ä¸ª`npm script`ï¼š`"preview": "node test-serve/app.js"`

## â˜…éƒ¨ç½²åˆ° Vercel

> [ Vercel é…ç½®æœåŠ¡ç«¯ä»£ç† - æ‡‚ä»£ç  ](https://dongdaima.com/article/81553)

`api/proxy.js`

``` js
/* eslint-disable @typescript-eslint/no-var-requires */
const { createProxyMiddleware } = require('http-proxy-middleware')

module.exports = (req, res) => {
  let target = ''
  if (req.url.includes('/api/front')) {
    target = 'http://edufront.lagou.com/'
  } else if (req.url.startsWith('/api/boss')) {
    target = 'http://eduboss.lagou.com/'
  }
  createProxyMiddleware({
    target,
    changeOrigin: true,
    pathRewrite: {
      '^/api/': ''
    }
  })(req, res)
}
```

`vercel.json`

``` json
{
  "routes": [
    {
      "src": "/api/boss/(.*)",
      "dest": "/api/proxy"
    },
    {
      "src": "/api/front/(.*)",
      "dest": "/api/proxy"
    }
  ]
} 
```

æ³¨æ„ï¼Œåœ¨éƒ¨ç½²ä¹‹å‰ï¼Œä¿®æ”¹`axios`é…ç½®ï¼Œä»¥åŠæœ¬åœ°çš„`DevServer`ï¼š

![baseURL](assets/img/2021-11-28-11-20-21.png)

![devServer](assets/img/2021-11-28-11-21-49.png)

---

æˆ‘ä»¬æœ¬åœ°ä¸éœ€è¦æ‰“åŒ…ï¼Œäº¤ç»™ vercel å»æ‰“åŒ…å°±å¥½äº†ï¼

## â˜…ä¼˜åŒ–æ‰“åŒ…ç»“æœ

- ä¸æ‰“åŒ…ç¬¬ä¸‰æ–¹åŒ…
- æ‰“åŒ…ç»“æœæ²¡æœ‰`source map`
- æ‰“åŒ…ç»“æœæ²¡æœ‰`console.log`

â¹ï¼š[javascript - How enable console log in VUE-CLI during development - Stack Overflow](https://stackoverflow.com/questions/59366773/how-enable-console-log-in-vue-cli-during-development)

â¹ï¼š[ç¬¬å…«èŠ‚ï¼šé¡¹ç›®ä¼˜åŒ–ä¸Šçº¿ä¹‹æ‰“åŒ…ã€æŠ¥å‘Šåˆ†æã€åˆ é™¤ consoleã€webpack é…ç½®ã€CDNã€é¦–é¡µå®šåˆ¶ã€è·¯ç”±æ‡’åŠ è½½ã€Express éƒ¨ç½²å’Œç®¡ç†](https://www.cnblogs.com/yaopengfei/p/14549481.html)

â¹ï¼š[Vue é…ç½® vue.config.js æ‰“åŒ…æ—¶åˆ é™¤ console.log æ—¥å¿—_å’»å’» ing çš„ä¸“æ -CSDN åšå®¢](https://blog.csdn.net/meifannao789456/article/details/109306282)

â¹ï¼š[vercel è‡ªåŠ¨åŒ–éƒ¨ç½²é¡¹ç›®å’Œè·¨åŸŸé—®é¢˜_é“æŸ± ef çš„åšå®¢-CSDN åšå®¢](https://blog.csdn.net/qq_40890601/article/details/120755007?spm=1001.2014.3001.5502

## â˜…å‘å¸ƒéƒ¨ç½²æ–‡æ¡£

### <mark>1ï¼‰é¡¹ç›®æ‰“åŒ…</mark>

åœ¨éƒ¨ç½²å‰éœ€è¦æŠŠé¡¹ç›®ç»™æ‰“åŒ…äº†

``` bash
yarn build
```

### <mark>2ï¼‰æœ¬åœ°é¢„è§ˆæœåŠ¡</mark>

![æœ¬åœ°é¢„è§ˆ](assets/img/2021-11-28-13-55-18.png)

### <mark>3ï¼‰æ³¨æ„äº‹é¡¹</mark>

![æ³¨æ„äº‹é¡¹](assets/img/2021-11-28-13-56-15.png)

![æ³¨æ„äº‹é¡¹](assets/img/2021-11-28-13-58-12.png)

â¹ï¼š[HTML5 History æ¨¡å¼ - Vue Router](https://router.vuejs.org/zh/guide/essentials/history-mode.html)

### <mark>4ï¼‰éƒ¨ç½²</mark>

å»ºè®®å‚è€ƒï¼š[éƒ¨ç½² - Vue CLI](https://cli.vuejs.org/zh/guide/deployment.html#%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88)

æ¨èï¼šäº‘å¼€å‘ CloudBase

éƒ¨ç½²ç»“æœï¼š<https://edu-boss-fed-t9o.vercel.app/>
