### âœï¸ Tangxt â³ 2021-09-08 ğŸ·ï¸ Vue

# 06-11-èµ„æºç®¡ç†

### <mark>1ï¼‰å¸ƒå±€</mark>

![æ•ˆæœ](assets/img/2021-09-08-12-15-35.png)

åšæ³•ï¼š

1. åˆ›å»º`src/views/resource/components/List.vue` -> ä½ å†™çš„å†…å®¹éƒ½åœ¨è¿™å„¿ï¼Œ`index.vue`æ˜¯å®ƒçš„å®¹å™¨
2. ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼šå¡ç‰‡ã€è¡¨å•ã€æŒ‰é’®ã€Layout
3. æ ·å¼è°ƒæ•´

ğŸ’¡ï¼šå¦‚ä½•åœ¨çˆ¶ç»„ä»¶è¿™ä¸ªå•æ–‡ä»¶é‡Œè¾¹ä¿®æ”¹å­ç»„ä»¶é‡Œè¾¹çš„æ ·å¼ï¼Ÿ

![ä¿®æ”¹æ ·å¼](assets/img/2021-09-08-12-16-52.png)

`el-card`ç»„ä»¶ç”¨åˆ°äº†`el-card__header`å’Œ`el-card__body`

â¹ï¼š[Element UI æ€ä¹ˆæ ·ä¿®æ”¹ç»„ä»¶æ ·å¼](https://blog.csdn.net/mini_1251861209/article/details/112350480)

### <mark>2ï¼‰å±•ç¤ºèµ„æºåˆ—è¡¨</mark>

æ¥å£æ–‡æ¡£ï¼š[æŒ‰æ¡ä»¶åˆ†é¡µæŸ¥è¯¢èµ„æº - getResourcePages](http://eduboss.lagou.com/boss/doc.html#/edu-boss-boot/%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/getResourcePagesUsingPOST)

æ¥å£æµ‹è¯•ï¼š

![æ¥å£æµ‹è¯•](assets/img/2021-09-08-13-44-34.png)

![æ•°æ®è§£é‡Š](assets/img/2021-09-08-14-16-14.png)

åšæ³•ï¼š

1. å®šä½åˆ°`src/services/resource.ts`ï¼Œåˆ›å»ºä¸€ä¸ª`getResourcePages`è¯·æ±‚
2. å®šä½åˆ°`src/views/resource/components/List.vue`ï¼Œåœ¨`created`é˜¶æ®µå‘é€`getResourcePages`è¯·æ±‚ï¼Œæ‹¿åˆ°è¡¨æ ¼æ‰€éœ€è¦çš„æ•°æ®`resources`
3. ç”¨`formatter`æ ¼å¼åŒ–`æ·»åŠ æ—¶é—´`è¿™ä¸ªå­—æ®µçš„æ•°æ®

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-09-08-15-14-11.png)

ğŸ’¡ï¼šæ ¼å¼åŒ–æ—¥æœŸï¼Ÿ

![æ ¼å¼åŒ–](assets/img/2021-09-08-14-17-35.png)

å®‰è£…ï¼š

``` bash
yarn add dayjs
```

ä½¿ç”¨ï¼š

``` js
import dayjs from 'dayjs'
console.log(dayjs('2021-06-25T10:40:03.000+0800').format('YYYY-MM-DD HH:mm:ss')) // 2021-06-25 10:40:03
```

â¹ï¼š[Typescript Â· Day.js](https://dayjs.gitee.io/docs/zh-CN/installation/typescript)

â¹ï¼š[Vue å¦‚ä½•ä½¿ç”¨ Day.js è®¡ç®—å¸¸ç”¨æ—¥æœŸè¯¦è§£ - ç®€ä¹¦](https://www.jianshu.com/p/ed20fb23e658)

â¹ï¼š[Day.js ï¼šä¸€ä¸ªéå¸¸å¥½ç”¨çš„è½»é‡çš„å¤„ç†æ—¶é—´å’Œæ—¥æœŸåº“_Helloweba](https://www.helloweba.net/javascript/641.html)

### <mark>3ï¼‰èµ„æºåˆ—è¡¨åˆ†é¡µå¤„ç†</mark>

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-09-08-15-44-01.png)

æ¥å£æµ‹è¯•ï¼š

![5 æ¡/é¡µ](assets/img/2021-09-08-15-46-33.png)

![10 æ¡/é¡µ](assets/img/2021-09-08-15-49-48.png)

å‘è¯·æ±‚å¸¦çš„å‚æ•°ï¼Œéƒ½æ˜¯`current`å’Œ`size`ï¼Œä¸ç®¡ä½ ç‚¹å‡»äº†åˆ†é¡µç»„ä»¶é‡Œè¾¹çš„å“ªä¸ªæŒ‰é’®â€¦â€¦

åˆ†é¡µç»„ä»¶ä»£ç ï¼š

![åˆ†é¡µç»„ä»¶](assets/img/2021-09-08-19-17-45.png)

æ•´ä¸ªå¤„ç†æµç¨‹ï¼š

1. ç”¨æˆ·ç‚¹å‡»åˆ†é¡µç»„ä»¶é‡Œè¾¹çš„æŒ‰é’®ï¼Œä»ä¸­å¯ä»¥å¾—åˆ°ç”¨æˆ·ç‚¹å‡»çš„`current`æˆ–`size`
2. ç‚¹å‡»æ„å‘³ç€è§¦å‘å›è°ƒå‡½æ•° -> å›è°ƒå‡½æ•°æ›´æ”¹`data`çš„`form.size/form.current`ï¼Œç„¶åè°ƒç”¨`loadResources`ï¼Œå‘é€`getResourcePages`è¯·æ±‚
3. æŠŠæ‹¿åˆ°çš„æ•°æ®äº¤ç»™`resources`å’Œ`totalCount`

![å¤„ç†æµç¨‹](assets/img/2021-09-08-19-32-02.png)

ç”¨æˆ·ç‚¹å‡»æŒ‰é’®å°±æ˜¯åœ¨ç»™æŸ¥è¯¢æ¡ä»¶å‘é€è¯·æ±‚ï¼Œç„¶åè¡¨æ ¼ UI å’Œåˆ†é¡µ UI å°±ä¼šå±€éƒ¨åˆ·æ–°â€¦â€¦

è¿™æ˜¯ä»€ä¹ˆæŸ¥è¯¢æ¡ä»¶éƒ½æ²¡å¸¦çš„æƒ…å†µï¼šé»˜è®¤å°±æ˜¯è¦ç¬¬ä¸€é¡µçš„æ•°æ®ï¼Œè€Œä¸”æœ€å¤š`10`æ¡

![æ•°æ®å±•ç¤ºæ§åˆ¶](assets/img/2021-09-08-19-36-42.png)

ğŸ’¡ï¼š`:current-page.sync="form.current"`è¿™ä¸ª`.sync`ï¼Ÿ

ä½ ç‚¹å‡»äº†å­ç»„ä»¶æ˜ å°„çš„æŒ‰é’®ï¼Œå­ç»„ä»¶è§¦å‘äº‹ä»¶æŠŠå½“å‰ç‚¹å‡»çš„æŒ‰é’®å€¼ï¼Œä¼ ç»™äº†`form.current`ï¼Œè€Œå­ç»„ä»¶çš„`current-page`ä¹ŸåŒæ­¥æ›´æ–°äº†å€¼

è¯´ç™½äº†ï¼Œè¿™æ˜¯å­ç»„ä»¶å’Œçˆ¶ç»„ä»¶å…³äº`props`çš„åŒå‘ç»‘å®š

ğŸ’¡ï¼š`size-change`å’Œ`current-change`è¿™ä¸¤ä¸ªäº‹ä»¶çš„è§¦å‘ï¼Ÿ

![äº‹ä»¶è§¦å‘](assets/img/2021-09-08-19-25-21.png)

`prev-click`å’Œ`next-click`è¿™ä¸¤ä¸ªäº‹ä»¶ä¸ç”¨å†™ï¼Œæˆ‘ä»¬ç‚¹å‡»`<`å’Œ`>`è§¦å‘çš„éƒ½æ˜¯`current`å•Šï¼

ğŸ’¡ï¼šç”¨æˆ·åœ¨é¡µé¢çš„å‰å¾€ç¬¬å‡ é¡µè¾“å…¥çš„å€¼è¶…è¿‡è¾¹ç•Œäº†ï¼Ÿ

å¦‚`-1`ï¼Œé‚£å°±`1`ï¼Œ`100`ï¼Œé‚£å°±`11`

![è¾¹ç•Œ](assets/img/2021-09-08-19-42-17.png)

â¹ï¼š[Pagination åˆ†é¡µ](https://element.eleme.cn/#/zh-CN/component/pagination)

### <mark>4ï¼‰åˆ—è¡¨æ•°æ®ç­›é€‰</mark>

æ¥å£æ–‡æ¡£ï¼š[æŸ¥è¯¢èµ„æºåˆ†ç±»åˆ—è¡¨](http://eduboss.lagou.com/boss/doc.html#/edu-boss-boot/%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/getCategoriesUsingGET)

æ¥å£æµ‹è¯•ï¼š

![æ¥å£æµ‹è¯•](assets/img/2021-09-08-20-03-14.png)

åšæ³•ï¼š

1. å®šä½åˆ°`src/services/resource-category.ts`ï¼Œå®šä¹‰ä¸€ä¸ª`getResourceCategories`å‡½æ•°ï¼Œç”¨æ¥å‘é€`GET`è¯·æ±‚ï¼š`/boss/resource/category/getAll`
2. å®šä½åˆ°`src/views/resource/components/List.vue`ï¼Œç¡®å®šä¸€ä¸‹`data`æœ€ç»ˆä¼šæœ‰ä»€ä¹ˆæ•°æ®
   1. `form`é‡Œè¾¹çš„æ•°æ®éƒ½æ˜¯æŸ¥è¯¢æ¡ä»¶
   2. `totalCount`å’Œ`resourceCategories`ï¼Œä¸€ä¸ªæ˜¯åˆ†é¡µç»„ä»¶é‡Œè¾¹æ˜¾ç¤ºçš„æ€»è®°å½•æ•°ï¼Œä¸€ä¸ªåˆ™æ˜¯é‚£ä¸ªã€Œèµ„æºåˆ†ç±»ã€ä¸‹æ‹‰èœå•çš„
3. åœ¨`created`é‡Œè¾¹åŠ è½½èµ„æºåˆ—è¡¨å’Œèµ„æºç›®å½•æ•°æ® -> æŠŠå¾—åˆ°æ•°æ®äº¤ç»™`data`
4. ç‚¹å‡»ã€ŒæŸ¥è¯¢æœç´¢ã€æŒ‰é’®ï¼Œè§¦å‘`click`äº‹ä»¶æ‰§è¡Œ`onSubmit`æ–¹æ³• -> æŠŠæŸ¥è¯¢ä»ç¬¬ä¸€é¡µå¼€å§‹ï¼ŒåŠ è½½èµ„æºåˆ—è¡¨

> ä¸€ä¸ªè¯·æ±‚å°±æ˜¯ä¸€ä¸ªèµ„æº

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-09-08-20-39-03.png)

ğŸ’¡ï¼šå…³äºåœ¨`async`å‡½æ•°é‡Œè¾¹å†™`try...catch`ï¼Ÿ

æˆ‘çªç„¶æƒ³èµ·æˆ‘ä»¬ä¹‹å‰åœ¨å“åº”æ‹¦æˆªå™¨é‡Œè¾¹æ˜¯å†™äº†çš„â€¦â€¦

### <mark>5ï¼‰é‡ç½®æ•°æ®ç­›é€‰</mark>

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-09-08-21-16-28.png)

åšæ³•ï¼š

1. ç”¨åˆ°äº†è¡¨å•ç»„ä»¶çš„`resetField`æ–¹æ³•ï¼Œå®ƒéœ€è¦é…åˆ`Form-Item`çš„`prop`å±æ€§ï¼ˆå¿…å¡«é¡¹ï¼‰ï¼Œ`prop`çš„å€¼ï¼Œæ˜¯ä¼ ç»™`Form`ç»„ä»¶çš„`model`ä¸­çš„å­—æ®µ

### <mark>6ï¼‰åŠ è½½ä¸­ loading å’ŒæŒ‰é’®ç¦ç”¨</mark>

> åŠ è½½ loading æ˜¯ä¸ºäº†ç»™ç”¨æˆ·ä¸€ä¸ªåé¦ˆå•Šï¼

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-09-08-21-35-07.png)

åšæ³•ï¼š

- ç”¨åˆ°äº†`Loading`ç»„ä»¶çš„`v-loading`æŒ‡ä»¤

â¹ï¼š[Loading åŠ è½½](https://element.eleme.cn/#/zh-CN/component/loading)

### <mark>7ï¼‰å°ç»“</mark>

- è§†é¢‘çœ‹ç¬¬ä¸€éï¼Œè®°å½•è¿™æ ·åšçš„ç¼˜ç”±ï¼Œä»¥åŠä¸€äº›ä½ ä¸æ˜¯å¾ˆæ‡‚çš„çŸ¥è¯†ç‚¹
- å¼€å§‹çœ‹æäº¤ä»£ç ï¼ŒæŠŠåŠŸèƒ½ç»™å®ç°äº†ï¼Œè®°å½•æ•´ä¸ªæ€ä¹ˆåšçš„è¿‡ç¨‹ï¼Œå¹¶ä¸”è®°å½•é‡åˆ°çš„é—®é¢˜
- è§†é¢‘æ˜¯å¦çœ‹ç¬¬äºŒéï¼Ÿ -> å¸¦ç€åœ¨åšçš„è¿‡ç¨‹ä¸­æ‰€é‡åˆ°çš„é—®é¢˜å»çœ‹è€å¸ˆæ˜¯æ€ä¹ˆè§£å†³çš„â€¦â€¦