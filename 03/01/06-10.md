### âœï¸ Tangxt â³ 2021-09-07 ğŸ·ï¸ Vue

# 06-10-èœå•ç®¡ç†

## â˜…ç›´æ¥è¿‡ä¸€é

> è¦åšçš„æ— éå°±æ˜¯å¢åˆ æ”¹æŸ¥â€¦â€¦

è®¾è®¡ç¨¿ï¼š<http://eduboss.lagou.com/#/Menu>

### <mark>1ï¼‰å¸ƒå±€</mark>

ç›®å‰`menu`é¡µé¢çš„ UIï¼š

![menu](assets/img/2021-09-07-12-19-53.png)

å¸ƒå±€å®Œæˆåï¼š

![èœå•å¸ƒå±€](assets/img/2021-09-07-12-23-23.png)

æ·»åŠ èœå•çš„ UIï¼š

![æ·»åŠ èœå•](assets/img/2021-09-07-12-25-59.png)

ğŸ’¡ï¼šä¸€ä¸ªéªšç”¨æ³•ï¼Ÿ

![v-for](assets/img/2021-09-07-17-10-47.png)

æµ‹è¯•ï¼š

![æµ‹è¯•](assets/img/2021-09-07-17-11-36.png)

â¹ï¼š[Card å¡ç‰‡ - Element](https://element.eleme.cn/#/zh-CN/component/card#card-qia-pian)

â¹ï¼š[Form è¡¨å• - Element](https://element.eleme.cn/#/zh-CN/component/form#form-biao-dan)

### <mark>2ï¼‰æ•°æ®ç»‘å®š</mark>

![æ•°æ®ç»‘å®š](assets/img/2021-09-07-12-33-16.png)

æ•°æ®ç»‘å®šæ˜¯å¦æˆåŠŸï¼Ÿ -> åˆ«å¿˜äº†ç”¨ Vue å¼€å‘è€…å·¥å…·æµ‹è¯•ä¸€ä¸‹

è¿™äº›æ•°æ®çš„æè¿°ï¼Ÿ

![æ•°æ®æè¿°](assets/img/2021-09-07-13-53-17.png)

ğŸ’¡ï¼šå•é€‰æŒ‰é’®ï¼Ÿ

![å•é€‰æŒ‰é’®](assets/img/2021-09-07-12-48-44.png)

![element ui å•é€‰æŒ‰é’®](assets/img/2021-09-07-12-50-33.png)

â¹ï¼š[è¡¨å•è¾“å…¥ç»‘å®š - å•é€‰æŒ‰é’® â€” Vue.js](https://cn.vuejs.org/v2/guide/forms.html#%E5%8D%95%E9%80%89%E6%8C%89%E9%92%AE)

### <mark>3ï¼‰æäº¤è¡¨å•</mark>

æ¥å£æ–‡æ¡£ï¼š[ä¿å­˜æˆ–æ–°å¢èœå• saveOrUpdate](http://eduboss.lagou.com/boss/doc.html#/edu-boss-boot/%E8%8F%9C%E5%8D%95%E7%AE%A1%E7%90%86/saveOrUpdateUsingPOST_1)

æ¥å£æµ‹è¯•ï¼š

![æ¥å£æµ‹è¯•](assets/img/2021-09-07-15-10-22.png)

åšæ³•ï¼š

1. æ·»åŠ å’Œæ›´æ–°éƒ½ç”¨è¿™ä¸€ä¸ªæ¥å£`http://eduboss.lagou.com/boss/menu/saveOrUpdate`
2. è¯·æ±‚æ•°æ®æ˜¯`json`ï¼Œæ‰€ä»¥ä¸éœ€è¦ç”¨`qs`äº†ï¼Œåœ¨ç”¨ postman æµ‹è¯•æ¥å£æ—¶ç”¨`rawã€json`
3. æ ¹æ®`data.code`æ¥ç¡®å®šæ˜¯å¦æŠŠèœå•æ·»åŠ æˆåŠŸ

ğŸ’¡ï¼šè¡¨å•æäº¤æ ¡éªŒ

çœ‹çœ‹ç™»å½•åŠŸèƒ½æ˜¯æ€ä¹ˆåšçš„â€¦â€¦

### <mark>4ï¼‰å¤„ç†ä¸Šçº§èœå•</mark>

æ¥å£æ–‡æ¡£ï¼š[è·å–ç¼–è¾‘èœå•é¡µé¢ä¿¡æ¯ getEditMenuInfo](http://eduboss.lagou.com/boss/doc.html#/edu-boss-boot/%E8%8F%9C%E5%8D%95%E7%AE%A1%E7%90%86/getEditMenuInfoUsingGET)

æ¥å£æµ‹è¯•ï¼š

![æ¥å£æµ‹è¯•](assets/img/2021-09-07-15-25-01.png)

åšæ³•ï¼š

1. å®šä½åˆ°`src/services/menu.ts`ï¼Œæ·»åŠ ä¸€ä¸ª`getEditMenuInfo`å‡½æ•°ï¼Œç”¨æ¥è¯·æ±‚æ•°æ®
2. å®šä½åˆ°`src/views/menu/create.vue`
   1. åœ¨`TS`é‡Œè¾¹ï¼Œå®šä¹‰ä¸€ä¸ª`parentMenuList`æ•°æ®
   2. å½“`created`çš„æ—¶å€™ï¼ŒåŠ è½½ä¸Šçº§èœå•ä¿¡æ¯ï¼Œè°ƒç”¨`getEditMenuInfo`å‘é€è¯·æ±‚ï¼Œåˆ¤æ–­æ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸé‚£å°±æŠŠå¾—åˆ°æ•°æ®äº¤ç»™`parentMenuList`ï¼Œå¤±è´¥ï¼Œé‚£å°±æç¤ºåŠ è½½èœå•æ•°æ®å¤±è´¥å‘—ï¼
   3. åœ¨`template`é‡Œè¾¹éå†`parentMenuList`ï¼ŒæŠŠæ•°æ®äº¤ç»™ä¸‹æ‹‰é€‰æ‹©æ¡†çš„æ¯ä¸€é¡¹

![èœå• id](assets/img/2021-09-07-15-40-41.png)

> ç”¨æˆ·é€‰ä¸­å“ªä¸€é¡¹ï¼Œé‚£ä¹ˆ`form.parentId`çš„å€¼å°±æ˜¯å¯¹åº”é¡¹çš„`value`å€¼

æ¯ä¸€ä¸ªæ–°æ·»åŠ çš„èœå•åå°éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª`id`ç»™å®ƒï¼Œå‰ç«¯ä¸ç”¨è‡ªå·±ç»™ï¼

![æ•ˆæœ](assets/img/2021-09-07-15-47-49.png)

> é—®é¢˜ï¼šå¯ä»¥æ·»åŠ é‡å¤çš„èœå•åâ€¦â€¦ -> å¯ä»¥åœ¨å‰ç«¯æ ¡éªŒ

### <mark>5ï¼‰å±•ç¤ºèœå•åˆ—è¡¨</mark>

æ¥å£æ–‡æ¡£ï¼š[è·å–æ‰€æœ‰èœå• getAll](http://eduboss.lagou.com/boss/doc.html#/edu-boss-boot/%E8%8F%9C%E5%8D%95%E7%AE%A1%E7%90%86/getAllUsingGET)

æ¥å£æµ‹è¯•ï¼š

![æ¥å£æµ‹è¯•](assets/img/2021-09-07-17-02-47.png)

åšæ³•ï¼š

1. å®šä½åˆ°`src/services/menu.ts`ï¼Œå®šä¹‰ä¸€ä¸ª`getAllMenus`å‡½æ•°ï¼Œç”¨æ¥å‘é€`/boss/menu/getAll`è¯·æ±‚
2. å®šä½åˆ°`src/views/menu/index.vue`ï¼Œæ‰¾åˆ° Element UI çš„`Table`ä»£ç ï¼Œç”¨ CRM å¤§æ³•å¤„ç†ä¸€æ³¢
3. åœ¨`menu/index.vue`ç»„ä»¶`created`çš„æ—¶å€™ï¼Œè¯·æ±‚æ‰€æœ‰èœå•æ•°æ®ï¼ŒæŠŠå¾—åˆ°çš„æ•°æ®äº¤ç»™`menus`æ•°æ®ï¼Œ`menus`æ˜¯è¡¨æ ¼çš„æ•°æ®æºï¼Œåˆ—çš„`prop`å€¼æ˜¯å¯¹äºç€èœå•å…¶ä¸­çš„ä¸€ä¸ªå±æ€§
4. æ ¼å¼åŒ–èœå•çš„`level`å±æ€§

å®Œæˆæ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-09-07-20-00-04.png)

ğŸ’¡ï¼šæ ¼å¼åŒ–èœå•çš„`level`ä¸º`0/1-> ä¸€çº§/äºŒçº§`è¿™æ ·ï¼Ÿ

ç”¨åˆ°äº†`table-column`çš„`formatter`å‚æ•°ï¼Œè¯¥å‚æ•°çš„å€¼ç±»å‹æ˜¯ä¸ªå‡½æ•°

![formatter](assets/img/2021-09-07-19-54-56.png)

![èœå•æ•°æ®](assets/img/2021-09-07-19-56-24.png)

æˆ‘æœ¬æ¥æ˜¯ç”¨`Vue.filter`ä½†å‘ç°ä¸å¥½ä½¿ï¼Œå°±æ²¡ç”¨äº†ï¼

â¹ï¼š[å¯¹ Element UI table ä¸­æ•°æ®è¿›è¡ŒäºŒæ¬¡å¤„ç† - ç®€ä¹¦](https://www.jianshu.com/p/5cd155dd1d79)

â¹ï¼š[element-ui è¡¨æ ¼ä¸­å¦‚ä½•å¯¹è¡¨å¤´å­—æ®µè¿›è¡Œè¿‡æ»¤å™¨è¿‡æ»¤ - ç®€ä¹¦](https://www.jianshu.com/p/1d096d7f491e)

### <mark>6ï¼‰åˆ é™¤èœå•</mark>

æ¥å£æ–‡æ¡£ï¼š[åˆ é™¤èœå• delete æ–¹æ³• Id](http://eduboss.lagou.com/boss/doc.html#/edu-boss-boot/%E8%8F%9C%E5%8D%95%E7%AE%A1%E7%90%86/deleteUsingDELETE)

æ¥å£æµ‹è¯•ï¼š

![æ¥å£æµ‹è¯•](assets/img/2021-09-07-21-26-26.png)

åšæ³•ï¼š

1. å®šä½åˆ°`src/services/menu.ts`ï¼Œå®šä¹‰`deleteMenu` -> å‘`/boss/menu/${id}`è¯·æ±‚ï¼ˆè¯·æ±‚åŠ¨è¯æ˜¯`DELETE`ï¼‰
2. å®šä½åˆ°`src/views/menu/index.vue` -> ç‚¹å‡»åˆ é™¤æ‰§è¡Œçš„å‡½æ•°`handleDelete(scope.row)`ï¼Œ`scope.row`æ˜¯è¿™ä¸ªèœå•çš„æ‰€æœ‰ä¿¡æ¯

![åšæ³•](assets/img/2021-09-07-21-31-29.png)

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-09-07-21-32-50.png)

### <mark>6ï¼‰ç¼–è¾‘èœå•-æå–ç»„ä»¶</mark>

ç¼–è¾‘èœå•å’Œæ·»åŠ èœå•ç”¨çš„æ˜¯åŒä¸€ä¸ªæ¥å£

ç”±äºç¼–è¾‘èœå•é¡µå’Œæ·»åŠ èœå•é¡µå‡ ä¹ä¸€æ ·ï¼Œäºæ˜¯æˆ‘ä»ä¸­æå–å‡ºäº†ä¸€ä¸ªç»„ä»¶`src/views/menu/components/CreateOrEdit.vue`

ç‚¹å‡»ã€Œç¼–è¾‘ã€ï¼Œå°±æ˜¯è·³è½¬åˆ°ç¼–è¾‘é¡µé¢å‘—ï¼Œå…¶`url`æ˜¯è¿™æ ·çš„ï¼š`http://localhost:8080/#/menu/924/edit` -> çŸ¥é“ç”¨æˆ·ç‚¹çš„æ˜¯å“ªä¸ªèœå•çš„`id`

ğŸ’¡ï¼šåœ¨æ³¨å†Œè·¯ç”±æ–¹é¢ï¼Ÿ

![æ³¨å†Œè·¯ç”±](assets/img/2021-09-07-23-05-03.png)

ğŸ’¡ï¼šåœ¨æ³¨å†Œç»„ä»¶æ–¹é¢ï¼Ÿ

æ³¨å†Œç»„ä»¶ç”¨å¤§å†™ï¼Œåœ¨`template`é‡Œè¾¹å†™ç»„ä»¶æ˜¯çƒ¤ä¸²å‘½åï¼Œä¼ ç»™å­ç»„ä»¶çš„å‚æ•°ä¹Ÿæ˜¯çƒ¤ä¸²å‘½å

![æ³¨å†Œç»„ä»¶](assets/img/2021-09-07-23-08-12.png)

### <mark>7ï¼‰ç¼–è¾‘èœå•</mark>

å½“ç”¨æˆ·ç‚¹å‡»ã€Œç¼–è¾‘ã€æŒ‰é’®ï¼Œä¼šè·³åˆ°ç¼–è¾‘é¡µï¼š

![ç¼–è¾‘é¡µ](assets/img/2021-09-07-23-33-31.png)

æ·»åŠ èœå•çš„æƒ…å†µï¼š

![æ·»åŠ èœå•](assets/img/2021-09-07-23-35-36.png)

å¯ä»¥çœ‹åˆ°`getEditMenuInfo?`å¸¦çš„æ˜¯`-1`æˆ–`x`ï¼ˆ`[1,âˆ)`ï¼‰ï¼Œæ‰€æ‹¿åˆ°çš„æ•°æ®æ˜¯ä¸åŒçš„ï¼Œå½“ç„¶ï¼Œå®ƒä»¬éƒ½èƒ½æ‹¿åˆ°æ‰€æœ‰èœå•æ•°æ®ï¼

åšæ³•ï¼š

åœ¨åŠ è½½ä¸‹æ¥èœå•ä¿¡æ¯æ—¶ï¼Œåˆ¤æ–­ä¸€ä¸‹`menuInfo`æ˜¯å¦`null`ï¼Œå¦‚æœä¸æ˜¯`null`ï¼Œé‚£å°±æ„å‘³ç€éœ€è¦ç¼–è¾‘è¿™ä¸ªèœå•å’¯ï¼

![åšæ³•](assets/img/2021-09-07-23-41-10.png)

æ•ˆæœï¼š

![æ•ˆæœ](assets/img/2021-09-07-23-43-37.png)