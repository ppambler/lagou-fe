### âœï¸ Tangxt â³2021-08-18 ðŸ·ï¸ Asynchronous

# 02-2-Promise æ¦‚è¿°ã€åŸºæœ¬ç”¨æ³•ã€ä½¿ç”¨æ¡ˆä¾‹ã€å¸¸è§è¯¯åŒºã€é“¾å¼è°ƒç”¨ã€å¼‚å¸¸å¤„ç†ã€é™æ€æ–¹æ³•ã€å¹¶è¡Œæ‰§è¡Œã€æ‰§è¡Œæ—¶åº

## â˜…æ¦‚è¿°

![æ¦‚è¿°](assets/img/2021-08-19-11-18-50.png)

å›žè°ƒå‡½æ•°å¯ä»¥è¯´æ˜¯ JS ä¸­æ‰€æœ‰å¼‚æ­¥ç¼–ç¨‹æ–¹å¼çš„æ ¹åŸºï¼Œä½†æ˜¯å¦‚æžœæˆ‘ä»¬ç›´æŽ¥ä½¿ç”¨ä¼ ç»Ÿå›žè°ƒæ–¹å¼åŽ»å®Œæˆå¤æ‚çš„å¼‚æ­¥æµç¨‹ï¼Œé‚£å°±æ— æ³•é¿å…å¤§é‡çš„å›žè°ƒå‡½æ•°åµŒå¥—äº†

è¿™ä¹Ÿå°±ä¼šå¯¼è‡´æˆ‘ä»¬å¸¸è¯´çš„å›žè°ƒåœ°ç‹±é—®é¢˜ï¼š

![å›žè°ƒåœ°ç‹±](assets/img/2021-08-19-11-00-47.png)

ä¸ºäº†é¿å…å›žè°ƒåœ°ç‹±çš„é—®é¢˜ï¼ŒCommonJS ç¤¾åŒºçŽ‡å…ˆæå‡ºäº†ä¸€ç§å«åš `Promise` çš„è§„èŒƒ -> ç›®çš„å°±æ˜¯ä¸ºå¼‚æ­¥ç¼–ç¨‹æä¾›ä¸€ç§æ›´åˆç†ã€æ›´å¼ºå¤§çš„ç»Ÿä¸€è§£å†³æ–¹æ¡ˆ

åŽæ¥åœ¨ ES2015 å½“ä¸­è¢«æ ‡å‡†åŒ–è¿›äº† ES çš„è¯­è¨€è§„èŒƒ

![æ‰¿è¯º](assets/img/2021-08-19-11-26-45.png)

> çˆ¸çˆ¸æ‰¿è¯ºå‡ºåŽ»ç»™ä½ ä¹°ä¸€å°ç”µè„‘ -> é—¨åº—å…³é—¨äº†ï¼Œæ²¡ä¹°åˆ°å°±å›žæ¥äº†ï¼Œé‚£è¿™ä¸ªæ‰¿è¯ºå°±å˜æˆ`Rejected`æ€äº†ï¼Œå¦‚æžœé—¨åº—æ²¡å…³ï¼Œä¹°å›žæ¥äº†ï¼Œé‚£è¿™ä¸ªæ‰¿è¯ºå°±å˜æˆ`Fulfilled`æ€äº† -> ä¸ç®¡æ˜¯å¦ä¹°å›žæ¥äº†ï¼Œä½ éƒ½ä¼šæœ‰ä¸€ä¸ªç›¸åº”çš„ååº”ï¼Œå¦‚ä¹°äº†å°±å¾ˆå¼€å¿ƒï¼Œæ²¡æœ‰ä¹°å°±å¾ˆç”Ÿæ°”â€¦â€¦

æ‰€è°“çš„ Promise å®žé™…ä¸Šå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡æœ€ç»ˆç»“æŸè¿‡åŽï¼Œå®ƒç©¶ç«Ÿæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œå°±åƒæ˜¯å†…éƒ¨å¯¹å¤–ç•Œåšå‡ºäº†ä¸€ä¸ªæ‰¿è¯ºï¼Œä¸€å¼€å§‹è¿™ä¸ªæ‰¿è¯ºæ˜¯ä¸€ç§å¾…å®šçš„çŠ¶æ€ï¼Œè‹±æ–‡å«åšã€Œ`Pending`ã€ -> æœ€ç»ˆæœ‰å¯èƒ½æˆåŠŸï¼Œè¢«å«åšã€Œ`Fulfilled`ã€ï¼Œä¹Ÿæœ‰å¯èƒ½å¤±è´¥ï¼Œè¢«å«åšã€Œ`Rejected`ã€

å½¢è±¡ç‚¹æ¥è¯´ï¼š

æˆ‘æ‰¿è¯ºç»™ä½ ä¹°ä¸€ä»¶å¤§è¡£ï¼Œé‚£æ­¤æ—¶æˆ‘å°±ä¼šç­‰å¾…æˆ‘è¿™ä¸ªæ‰¿è¯ºçš„ç»“æžœï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘çš„è¿™ä¸ªæ‰¿è¯ºæ­¤æ—¶æ˜¯ä¸€ä¸ªã€Œå¾…å®šã€çš„çŠ¶æ€ -> å¦‚æžœç¡®å®žæˆ‘ä¹°å›žæ¥äº†è¿™ä»¶å¤§è¡£ï¼Œé‚£è¿™ä¸ªæ‰¿è¯ºä¹Ÿå°±æˆåŠŸäº†ï¼Œåä¹‹ä¸ç®¡ä»€ä¹ˆåŽŸå› ï¼Œæˆ‘æ²¡æœ‰ä¹°å›žæ¥è¿™ä»¶å¤§è¡£ï¼Œé‚£è¿™ä¸ªæ‰¿è¯ºå°±æ˜¯å¤±è´¥äº†

æ‰¿è¯ºç»“æŸè¿‡åŽ -> ä¸ç®¡è¿™ä¸ªæ‰¿è¯ºæœ€ç»ˆæ˜¯è¾¾æˆè¿˜æ˜¯å¤±è´¥éƒ½ä¼šæœ‰ç›¸å¯¹åº”çš„ååº” -> æ¯”å¦‚è¯´æˆ‘è¾¾æˆäº†ï¼Œé‚£ä½ å°±å¯èƒ½ä¼šå¾ˆæ„Ÿæ¿€ï¼Œé‚£å¦‚æžœæˆ‘å¤±è´¥äº†ï¼Œé‚£ä½ å°±æœ‰å¯èƒ½æŠŠæˆ‘éª‚ä¸€é¡¿

ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰¿è¯ºçŠ¶æ€æ˜Žç¡®è¿‡åŽï¼Œéƒ½ä¼šæœ‰ç›¸å¯¹åº”çš„ä»»åŠ¡ä¼šè¢«è‡ªåŠ¨æ‰§è¡Œï¼Œè€Œä¸”**è¿™ç§æ‰¿è¯ºä¼šæœ‰ä¸€ä¸ªå¾ˆæ˜Žæ˜¾çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯ä¸€æ—¦æ˜Žç¡®äº†ç»“æžœè¿‡åŽï¼Œå°±ä¸å¯èƒ½å†å‘ç”Ÿæ”¹å˜äº†** -> ä¾‹å¦‚ï¼Œæˆ‘æ²¡æœ‰ä¹°åˆ°å¤§è¡£ï¼Œé‚£ä¹ˆè¿™ä¸ªç»™ä½ ä¹°å¤§è¡£çš„æ‰¿è¯ºå°±æ˜¯å¤±è´¥äº†çš„ï¼Œå®ƒå°±ä¸å¯èƒ½å†å˜æˆæˆåŠŸäº†ï¼Œå³ä¾¿è¯´æˆ‘ä»¥åŽå†ç»™ä½ ä¹°äº†ï¼Œä½†é‚£ä¹Ÿæ˜¯ä»¥åŽçš„äº‹æƒ…äº†ï¼Œå¯¹äºŽæˆ‘ä»¬ä¸€å¼€å§‹çš„æ‰¿è¯ºï¼Œå®ƒè¿˜æ˜¯å¤±è´¥çš„

è½å®žåˆ°ç¨‹åºä¸Šï¼Œå¦‚ä½ éœ€è¦æˆ‘å¸®ä½ åŽ»å‘é€ä¸€ä¸ª Ajax è¯·æ±‚ï¼Œé‚£ä½ å°±å¯ä»¥ç†è§£ä¸ºã€Œæˆ‘æ‰¿è¯ºå¸®ä½ è¯·æ±‚ä¸€ä¸ªåœ°å€ã€ï¼Œè€Œè¿™ä¸ªè¯·æ±‚æœ€ç»ˆæœ‰å¯èƒ½æˆåŠŸï¼ŒæˆåŠŸé‚£å°±è°ƒç”¨ä½ çš„`onFulfilled`å›žè°ƒï¼Œè€Œå¦‚æžœè¯·æ±‚å¤±è´¥çš„è¯ï¼Œæˆ‘å°±ä¼šåŽ»è°ƒç”¨ä½ çš„`onRejected`å›žè°ƒ -> è€Œè¿™å°±æ˜¯ Promise çš„ä¸€ä¸ªæ¦‚å¿µäº†

## â˜…åŸºæœ¬ç”¨æ³•

