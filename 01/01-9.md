### âœï¸ Tangxt â³ 2021-05-21 ğŸ·ï¸ es6

# 01-9-Setã€Mapã€Symbolã€Symbol è¡¥å……

## â˜…Set

1ï¼‰æ¦‚è¿°

åœ¨ ES2015 ä¸­æä¾›äº†ä¸€ä¸ªå…¨æ–°çš„æ•°æ®ç»“æ„â€”â€”`Set`

ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºã€Œé›†åˆã€

å®ƒä¸ä¼ ç»Ÿçš„æ•°ç»„éå¸¸ç±»ä¼¼ï¼Œä¸è¿‡`Set`å†…éƒ¨çš„æˆå‘˜æ˜¯ä¸å…è®¸é‡å¤çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€ä¸ªå€¼åœ¨åŒä¸€ä¸ª`Set`å½“ä¸­éƒ½æ˜¯å”¯ä¸€çš„ï¼

`Set`å®ƒæ˜¯ä¸€ä¸ªç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æ„é€ ä¸€ä¸ªå®ä¾‹ï¼Œè€Œæ„é€ å‡ºæ¥çš„å®ä¾‹ï¼Œå¯ä»¥ç”¨æ¥å­˜æ”¾ä¸é‡å¤çš„æ•°æ®

2ï¼‰ç®€å•ä½¿ç”¨

``` js
const s = new Set()
```

æˆ‘ä»¬é€šè¿‡`new Set()`å®ä¾‹çš„`add`æ–¹æ³•å»å¾€é›†åˆå½“ä¸­æ·»åŠ ä¸€äº›æ•°æ®ï¼Œç”±äº`add`æ–¹æ³•ä¼šè¿”å›é›†åˆå¯¹è±¡æœ¬èº«ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é“¾å¼è°ƒç”¨è¿™æ ·æ¥æ·»åŠ å¤šä¸ªæ•°æ®ï¼š

``` js
s.add(1).add(2).add(3).add(2)
```

å¦‚æœæ·»åŠ äº†ä¹‹å‰å·²ç»å­˜åœ¨çš„æ•°æ®ï¼Œé‚£ä¹ˆæ‰€æ·»åŠ çš„è¿™ä¸ªå€¼å°±ä¼šè¢«å¿½ç•¥æ‰ï¼

![é›†åˆ](assets/img/2021-05-21-11-58-30.png)

ğŸ’¡ï¼šæ•°å­¦é‡Œè¾¹çš„é›†åˆï¼Ÿ

![é›†åˆ](assets/img/2021-05-21-11-59-34.png)

â¹ï¼š[é›†åˆç¬¦å·](https://www.shuxuele.com/sets/symbols.html)

3ï¼‰å‡ ä¸ªå¸¸ç”¨çš„ API

ğŸ’¡ï¼šæƒ³è¦éå†å½“å‰é›†åˆå½“ä¸­çš„æ•°æ®ï¼Ÿ

ç”¨ä¸¤ç§å§¿åŠ¿å¯ä»¥åšåˆ°ï¼š

- ä½¿ç”¨é›†åˆå¯¹è±¡çš„`forEach`æ–¹æ³•
- ä½¿ç”¨ ES2015 æ‰€æä¾›çš„ `for...of...`å¾ªç¯ -> è¿™æ˜¯ä¸ªæ–°è¯­æ³•ï¼Œä¹Ÿå¯ä»¥å»éå†æ™®é€šçš„æ•°ç»„

![éå†](assets/img/2021-05-21-12-05-21.png)

ğŸ’¡ï¼šè·å–å½“å‰æ•´ä¸ªé›†åˆçš„é•¿åº¦ï¼Ÿ

é€šè¿‡`size`å±æ€§å»è·å–æ•´ä¸ªé›†åˆçš„é•¿åº¦ -> è¿™ä¸æ•°ç»„å½“ä¸­çš„`length`æœ‰ç€ç›¸åŒçš„é“ç†ï¼

``` js
console.log(s.size) // 4
```

ğŸ’¡ï¼šåˆ¤æ–­å½“å‰é›†åˆå½“ä¸­æ˜¯å¦å­˜åœ¨æŸä¸€ä¸ªç‰¹å®šçš„å€¼ï¼Ÿ

``` js
console.log(s.has(100)) // false
console.log(s.has(2)) // true
```

å­˜åœ¨å°±è¿”å›`true`ï¼Œä¸ç„¶ï¼Œåˆ™è¿”å›`false`

ğŸ’¡ï¼šåˆ é™¤å½“å‰é›†åˆå½“ä¸­çš„æŸä¸€ä¸ªå€¼ï¼Ÿ

``` js
console.log(s) // Set(4) { 1, 2, 3, 4 }
console.log(s.delete(3)) // true
console.log(s) // Set(3) { 1, 2, 4 }
console.log(s.delete(100)) // false
```

åˆ é™¤æˆåŠŸå°±è¿”å›ä¸€ä¸ª`true`

ğŸ’¡ï¼šæ¸…é™¤å½“å‰é›†åˆå½“ä¸­çš„å…¨éƒ¨å†…å®¹ï¼Ÿ

``` js
console.log(s) // Set(3) { 1, 2, 4 }
console.log(s.clear()) // undefined
console.log(s) // Set(0) {}
```

> åŠ ã€Œå½“å‰ã€æ„å‘³ç€è¿™äº›éƒ½æ˜¯`Set`å®ä¾‹çš„æ–¹æ³•

4ï¼‰åº”ç”¨åœºæ™¯

è¿™ç§å«`Set`çš„æ•°æ®ç»“æ„ï¼Œæœ€å¸¸è§çš„åº”ç”¨åœºæ™¯å°±æ˜¯ç”¨æ¥**ä¸ºæ•°ç»„ä¸­çš„å…ƒç´ å»é‡**

å®šä¹‰ä¸€ä¸ªæœ‰é‡å¤å…ƒç´ çš„æ•°ç»„ï¼š

``` js
const arr = [1, 2, 1, 3, 4, 1]
```

å¦‚æœä½ æƒ³è¦å»æ‰é‡å¤çš„å…ƒç´ ï¼Œé‚£ä¹ˆæœ€ç®€å•çš„æ–¹å¼ï¼Œå°±æ˜¯é€šè¿‡`new Set`çš„æ–¹å¼åŠ å·¥ä¸€ä¸‹è¿™ä¸ªæ•°ç»„ï¼š

``` js
// Set çš„æ„é€ å‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ•°ç»„é‡Œè¾¹çš„å…ƒç´ ä¼šä½œä¸ºè¿™ä¸ª Set å®ä¾‹çš„åˆå§‹å€¼ -> é‡å¤çš„å€¼è‡ªåŠ¨ä¼šè¢«å¿½ç•¥æ‰

// new Set(arr)

// å»é‡åè¿˜æƒ³å†å¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œæœ‰è¿™ä¸¤ç§å¸¸ç”¨å§¿åŠ¿ï¼š

// const result = Array.from(new Set(arr))
const result = [...new Set(arr)]

console.log(result)
```

- `Array.from` -> ES2015 ä¸­æ–°å¢çš„ä¸€ä¸ª APIï¼Œå¯ä»¥æŠŠ `Set` å®ä¾‹è½¬åŒ–ä¸ºæ•°ç»„
- `...`è¿™ä¸ªå±•å¼€æ“ä½œç¬¦å°±ä¸å¤šè¯´äº† -> åœ¨ä¸€ä¸ªç©ºçš„æ•°ç»„å½“ä¸­ï¼Œå±•å¼€è¿™ä¸ª`Set`å®ä¾‹ï¼Œè¿™æ ·ä¸€æ¥é›†åˆé‡Œè¾¹çš„æˆå‘˜å°±ä¼šä½œä¸ºè¿™ä¸ªç©ºæ•°ç»„é‡Œè¾¹çš„æˆå‘˜äº†

5ï¼‰WeakSet

* å¼±å¼•ç”¨ç‰ˆæœ¬ `WeakSet`
* `WeakSet` åªèƒ½å­˜å‚¨æ™®é€šå¯¹è±¡ï¼Œä¸æ”¯æŒéå†ï¼Œä¹Ÿæ²¡æœ‰`size`ï¼Œå› ä¸ºæ— æ³•ç¡®å®šè‡ªå·±çš„æˆå‘˜æ˜¯å¦å·²ç»è¢«å›æ”¶äº†â€¦â€¦
* ä¸`Set`çš„å·®å¼‚å°±æ˜¯ `Set` ä¸­ä¼šå¯¹æ‰€ä½¿ç”¨åˆ°çš„æ•°æ®äº§ç”Ÿå¼•ç”¨ï¼Œå³ä¾¿è¿™ä¸ªæ•°æ®åœ¨å¤–é¢è¢«æ¶ˆè€—ï¼Œä½†æ˜¯ç”±äº `Set` å¼•ç”¨äº†è¿™ä¸ªæ•°æ®ï¼Œæ‰€ä»¥ä¾ç„¶ä¸ä¼šå›æ”¶
* è€Œ `WeakSet` çš„ç‰¹ç‚¹å°±æ˜¯ä¸ä¼šäº§ç”Ÿå¼•ç”¨ï¼Œä¸€æ—¦æ•°æ®é”€æ¯ï¼Œå°±å¯ä»¥è¢«å›æ”¶ï¼Œæ‰€ä»¥ä¸ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼é—®é¢˜ã€‚

``` js
let myWeakSet = new WeakSet();
let obj = {};
myWeakSet.add(obj)
console.log(myWeakSet.has(obj)); // true

// break the last reference to the object we created earlier
obj = 5;

// false because no other references to the object which the weakset points to
// because weakset was the only object holding a reference it released it and got garbage collected
console.log(myWeakSet.has(obj)); // false
```

â¹ï¼š[javascript - What's the difference between ES6 Set and WeakSet? - Stack Overflow](https://stackoverflow.com/questions/43319924/whats-the-difference-between-es6-set-and-weakset)

â¹ï¼š[ç¬¬ 4 é¢˜ï¼šä»‹ç»ä¸‹ Setã€Mapã€WeakSet å’Œ WeakMap çš„åŒºåˆ«ï¼Ÿ Â· Issue #6 Â· Advanced-Frontend/Daily-Interview-Question](https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/6)


## â˜…Map

