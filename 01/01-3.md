### âœï¸ Tangxt â³ 2021-04-26 ğŸ·ï¸ æ¨¡æ¿å­—ç¬¦ä¸²

# 01-3-æ¨¡æ¿å­—ç¬¦ä¸²ã€å¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—ç¬¦ä¸²ã€å­—ç¬¦ä¸²çš„æ‰©å±•æ–¹æ³•

## â˜…æ¨¡æ¿å­—ç¬¦ä¸²å­—é¢é‡

> Template literals (Template strings)

åœ¨ ES2015 ä¸­ï¼Œè¿˜å¢å¼ºäº†å®šä¹‰å­—ç¬¦ä¸²çš„æ–¹å¼

ä¼ ç»Ÿå®šä¹‰å­—ç¬¦ä¸²çš„æ–¹å¼éœ€è¦é€šè¿‡**å•å¼•å·æˆ–è€…æ˜¯åŒå¼•å·**æ¥è¡¨ç¤ºï¼Œè€Œåœ¨ ES2015 ä¸­å°±æ–°å¢äº†ä¸€ç§å«åšã€Œ**æ¨¡æ¿å­—ç¬¦ä¸²**ã€ï¼ˆæ—©æœŸ ES2015 çš„ç§°å‘¼ï¼Œç°åœ¨å«ã€Œæ¨¡æ¿å­—é¢é‡ã€ï¼‰çš„æ–¹å¼ -> å®ƒéœ€è¦ä½¿ç”¨**åå¼•å·**å»æ ‡è¯†ï¼Œå³é”®ç›˜å½“ä¸­`1`å·¦è¾¹é‚£ä¸ªé”®

ç›´æ¥è¿™æ ·ä½¿ç”¨ï¼š

``` js
// åå¼•å·åŒ…è£¹
const str = `hello es2015, this is a string`
```

è·Ÿæ™®é€šå­—ç¬¦ä¸²çš„ä½¿ç”¨æ²¡å•¥åŒºåˆ«ï¼

å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨å†…å®¹å½“ä¸­ä½¿ç”¨åå¼•å·ï¼Œé‚£ä¹ˆæˆ‘ä»¬åŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨`\`å»è½¬ä¹‰å®ƒï¼š

``` js
const str = `hello es2015, this is a \`string\``
console.log(str) // hello es2015, this is a `string`
```

ç›¸æ¯”äºæ™®é€šå­—ç¬¦ä¸²ï¼Œè¿™ç§æ¨¡æ¿å­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œå®ƒå¤šäº†ä¸€äº›éå¸¸æœ‰ç”¨çš„æ–°ç‰¹æ€§

å¦‚ï¼š

ä¼ ç»Ÿçš„å­—ç¬¦ä¸²ä¸æ”¯æŒæ¢è¡Œï¼š

![ä¼ ç»Ÿå­—ç¬¦ä¸²](assets/img/2021-04-27-11-03-02.png)

å¦‚æœéœ€è¦æ¢è¡Œå¾—ç”¨æ˜¾ç¤ºçš„`\n`æ¢è¡Œç¬¦æ¥æï¼š

![æ¢è¡Œ](assets/img/2021-04-27-11-04-17.png)

è€Œåœ¨æœ€æ–°çš„æ¨¡æ¿å­—ç¬¦ä¸²å½“ä¸­ï¼Œå®ƒæ˜¯å¯ä»¥æ”¯æŒå¤šè¡Œå­—ç¬¦ä¸²çš„ï¼Œå³æˆ‘ä»¬å¯ä»¥åœ¨å­—ç¬¦ä¸²å½“ä¸­ç›´æ¥æ•²ä¸ªå›è½¦ï¼š

![ä¸ç”¨è¾“å…¥æ¢è¡Œç¬¦](assets/img/2021-04-27-11-08-37.png)

è¿™ä¸€ç‚¹**å¯¹äºæˆ‘ä»¬è¾“å‡º HTML å­—ç¬¦ä¸²æ˜¯éå¸¸æ–¹ä¾¿çš„**

---

å…¶æ¬¡ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²å½“ä¸­è¿˜æ”¯æŒé€šè¿‡**æ’å€¼è¡¨è¾¾å¼**çš„æ–¹å¼åœ¨å­—ç¬¦ä¸²ä¸­å»åµŒå…¥æ‰€å¯¹åº”çš„æ•°å€¼ -> è¯­æ³•æ˜¯`${}`

å¦‚ï¼š

![æ’å€¼è¡¨è¾¾å¼](assets/img/2021-04-27-11-14-40.png)

ç›¸æ¯”äºä¹‹å‰å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼è¦æ–¹ä¾¿å¤šäº†ï¼Œè€Œä¸”ä¹Ÿæ›´ç›´è§‚ä¸€ç‚¹ -> ä¸å®¹æ˜“å†™é”™ï¼

æ€»ä¹‹ï¼Œ`${}`è¿™ä¸ª`{}`é‡Œè¾¹çš„å†…å®¹å°±æ˜¯æ ‡å‡† JavaScriptï¼Œè¿™æ„å‘³ç€è¿™`{}`é‡Œè¾¹ï¼Œ**ä¸ä»…å¯ä»¥åµŒå…¥å˜é‡ï¼Œè¿˜å¯ä»¥åµŒå…¥ä»»ä½•æ ‡å‡†çš„ JS è¯­å¥**ï¼Œè€Œè¿™è¯­å¥çš„è¿”å›å€¼æœ€ç»ˆä¼šè¢«è¾“å‡ºåˆ°æˆ‘ä»¬çš„å­—ç¬¦ä¸²å½“ä¸­çš„é‚£ä¸ªæ’å€¼è¡¨è¾¾å¼æ‰€å­˜åœ¨çš„ä½ç½®

ğŸ’¡ï¼šæ’å…¥ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Ÿ

![å¯¹è±¡å­—é¢é‡](assets/img/2021-04-27-11-16-48.png)

ç›¸å½“äºæ‰§è¡Œäº†è¿™ä¸ª`({}).toString()`

ğŸ’¡ï¼š`\`å’Œ`\n`çš„è¯»æ³•ï¼Ÿ

åæ–œçº¿ï¼ˆ`\`ï¼‰æ˜¯è½¬ä¹‰å­—ç¬¦ï¼Œç”¨æ¥è¡¨è¾¾å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼Œæˆ–å°†å…¶åè·Ÿçš„å­—ç¬¦è§£é‡Šä¸ºå…¶æœ¬èº« -> ä¹Ÿå°±æ˜¯è¯´`\`å¯ä»¥å«è½¬ä¹‰å­—ç¬¦ -> ä¸è¿‡ï¼Œä¼¼ä¹å«ã€Œç”¨æ¥è½¬ä¹‰çš„å­—ç¬¦ã€æ¯”è¾ƒå¥½ï¼

å¦‚`\n`ï¼Œ`\`è®©`n`è¿™ä¸ªæ™®é€šå­—ç¬¦è½¬ä¹‰æˆäº†ç‰¹æ®Šå­—ç¬¦`newline`ï¼Œè€Œæœ‰æ„ä¹‰çš„`'`ï¼Œä½ `\'`å°±ä¼šè®©`'`è½¬è¯‘æˆç‰¹æ®Šå­—ç¬¦`å•å¼•å·` -> å…¶å®å®ƒä»¬å°±æ˜¯ç›¸å½“äºåœ¨å­—ç¬¦ä¸²ä¸­è¾“å…¥ä¸€ä¸ªå›è½¦å­—ç¬¦ã€å•å¼•å·å­—ç¬¦ç½¢äº†ï¼Œåªæ˜¯è¿™ç§è¾“å…¥å½¢å¼å¾ˆå¥‡è‘©ç½¢äº†ï¼ä¸åƒæˆ‘ä»¬å¹³æ—¶åœ¨çº¸ä¸Šå†™å­—é‚£æ ·

è½¬ä¹‰å­—ç¬¦ï¼ˆEscape characterï¼‰çš„ç™¾åº¦ç™¾ç§‘å®šä¹‰ï¼š

> æ‰€æœ‰çš„ ASCII ç éƒ½å¯ä»¥ç”¨â€œ`\`â€åŠ æ•°å­—ï¼ˆä¸€èˆ¬æ˜¯ 8 è¿›åˆ¶æ•°å­—ï¼‰æ¥è¡¨ç¤ºã€‚è€Œ C ä¸­å®šä¹‰äº†ä¸€äº›å­—æ¯å‰åŠ "`\`"æ¥**è¡¨ç¤ºå¸¸è§çš„é‚£äº›ä¸èƒ½æ˜¾ç¤ºçš„ ASCII å­—ç¬¦**ï¼Œå¦‚`\0`,`\t`,`\n` ç­‰ï¼Œå°±ç§°ä¸ºè½¬ä¹‰å­—ç¬¦ï¼Œå› ä¸ºåé¢çš„å­—ç¬¦ï¼Œéƒ½ä¸æ˜¯å®ƒæœ¬æ¥çš„ ASCII å­—ç¬¦æ„æ€äº†ã€‚

â¹ï¼š[è½¬ä¹‰å­—ç¬¦ - MaxCompute - é˜¿é‡Œäº‘](https://help.aliyun.com/document_detail/27869.html)

â¹ï¼š[è½¬ä¹‰å­—ç¬¦_ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6)

## â˜…æ¨¡æ¿å­—ç¬¦ä¸²æ ‡ç­¾å‡½æ•°

> Tagged templates

æ¨¡æ¿å­—ç¬¦ä¸²è¿˜æœ‰ä¸€ä¸ªæ›´é«˜çº§çš„ç”¨æ³•ï¼Œå°±æ˜¯åœ¨å®šä¹‰æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹å‰å»æ·»åŠ ä¸€ä¸ªæ ‡ç­¾ï¼Œè€Œè¿™ä¸ªæ ‡ç­¾å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•° -> æ·»åŠ äº†è¿™ä¸ªæ ‡ç­¾å°±æ˜¯åœ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°

![tag](assets/img/2021-04-27-13-34-42.png)

ä¾‹å­ï¼šå°è¯•ç”¨`console.log`ä½œä¸ºæ¨¡æ¿å­—ç¬¦ä¸²çš„æ ‡ç­¾

``` js
const str = console.log`hello world` // [ 'hello world' ]
```

å…¶æ‰§è¡Œç»“æœå°±æ˜¯`log`äº†ä¸€ä¸ªæ•°ç»„

è¯è¯´ï¼Œè¿™é‡Œä¸ºå•¥ä¼šæ‰“å°äº†ä¸€ä¸ªæ•°ç»„å‡ºæ¥äº†å‘¢ï¼Ÿ

æˆ‘ä»¬å°è¯•è‡ªå·±å®šä¹‰ä¸€ä¸ªä½¿ç”¨æ ‡ç­¾å‡½æ•°çš„æ¨¡æ¿å­—ç¬¦ä¸² -> ä½¿ç”¨æ ‡ç­¾å‡½æ•°å‰å…ˆå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼ˆä¹Ÿå¯ä»¥åè¾¹å®šä¹‰ï¼Œä½†ä¸ºäº†æ›´å¥½çš„ç¼–ç ä¹ æƒ¯ï¼Œè¿˜æ˜¯å…ˆå®šä¹‰å†ä½¿ç”¨ï¼‰

![æ ‡ç­¾å‡½æ•°](assets/img/2021-04-27-13-45-06.png)

`strings`è¿™ä¸ªæ•°ç»„é‡Œè¾¹çš„å…ƒç´ å°±æ˜¯è¢«`${}`åˆ†å‰²è¿‡åçš„ç»“æœï¼ -> åœ¨æ¨¡æ¿å­—ç¬¦ä¸²å½“ä¸­å¯èƒ½ä¼šæœ‰åµŒå…¥çš„è¡¨è¾¾å¼ï¼Œå¦‚æœæœ‰ï¼Œé‚£å°±æŒ‰ç…§è¿™äº›è¡¨è¾¾å¼åˆ†å‰²è¿‡åé‚£äº›**é™æ€çš„å†…å®¹**ä½œä¸ºæ•°ç»„çš„ä¸€ä¸ªä¸ªå…ƒç´ â€¦â€¦

æ ‡ç­¾å‡½æ•°é™¤äº†å¯ä»¥æ¥æ”¶åˆ°è¿™ä¸ªæ•°ç»„ä»¥å¤–ï¼Œè¿˜å¯ä»¥æ¥æ”¶åˆ°æ‰€æœ‰åœ¨è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²å½“ä¸­å‡ºç°çš„**è¡¨è¾¾å¼çš„è¿”å›å€¼** -> å¦‚ä¸Šå›¾è¿™ä¸ªä¾‹å­ä¸­`name`å’Œ`gender`è¿™ä¸¤ä¸ªæ’å€¼

æ¥æ”¶`name`å’Œ`gender`çš„å€¼ï¼š

``` js
const name = "tom";
const gender = true;
function myTagFunc(strings, name, gender) {
  console.log(strings); // [ 'hey, ', ' is a ', '.' ]
  console.log(typeof gender); // boolean
  console.log(name, gender); // tom true
}

const result = myTagFunc`hey, ${name} is a ${gender}.`;
console.log(result); // undefined
```

`myTagFunc`å‡½æ•°å†…éƒ¨çš„è¿”å›å€¼ï¼Œå°±æ˜¯æˆ‘ä»¬çš„è¿™ä¸ªå¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—ç¬¦ä¸²æ‰€å¯¹åº”çš„è¿”å›å€¼

ä¸ºäº†è¿”å›æ­£å¸¸çš„å†…å®¹ï¼Œæˆ‘ä»¬è¿”å›æ¨¡æ¿å­—ç¬¦ä¸²æ‹¼æ¥è¿‡åçš„ç»“æœï¼š

``` js
const name = "tom";
const gender = true;
function myTagFunc(strings, name, gender) {
  return strings[0] + name + strings[1] + gender + strings[2]
}

const result = myTagFunc`hey, ${name} is a ${gender}.`;
console.log(result); // hey, tom is a true.
```

è¿™ç§æ ‡ç­¾å‡½æ•°çš„ä½œç”¨å®é™…ä¸Šå°±æ˜¯**å¯¹æˆ‘ä»¬çš„æ¨¡æ¿å­—ç¬¦ä¸²è¿›è¡ŒåŠ å·¥**ï¼Œå¦‚`gender`è¾“å‡ºçš„ç»“æœæ˜¯`true`æˆ–è€…`false`ï¼Œé‚£æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ª`myTagFunc`å‡½æ•°é‡Œè¾¹å¯¹è¿™ä¸ª`gender`è¿›è¡ŒåŠ å·¥ -> è¿™æ ·å¯ä»¥**è®©è¿”å›çš„ç»“æœæ›´é€‚åˆç”¨æˆ·é˜…è¯»**

![åŠ å·¥](assets/img/2021-04-27-14-11-14.png)

åˆ©ç”¨è¿™ä¸ªæ ‡ç­¾å‡½æ•°ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å»å®ç°ï¼Œå¦‚ã€Œæ–‡æœ¬çš„å¤šè¯­è¨€åŒ– -> ç¿»è¯‘æˆä¸­æ–‡ã€è‹±æ–‡ç­‰ã€ã€ã€Œæ£€æŸ¥æ¨¡æ¿å­—ç¬¦ä¸²å½“ä¸­æ˜¯å¦å­˜åœ¨ä¸å®‰å…¨çš„ä¸€äº›å­—ç¬¦ã€ä¹‹ç±»çš„ä¸€äº›éœ€æ±‚ -> ç”šè‡³ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨è¿™ç§ç‰¹æ€§æ¥å»å®ç°ä¸€ä¸ªå°å‹çš„æ¨¡æ¿å¼•æ“

## â˜…å­—ç¬¦ä¸²çš„æ‰©å±•æ–¹æ³•

åœ¨ ES2015 é‡Œè¾¹ï¼Œè¿˜ä¸ºå­—ç¬¦ä¸²å¯¹è±¡æä¾›äº†ä¸€ç³»åˆ—çš„æ‰©å±•æ–¹æ³•

äº†è§£å‡ ä¸ªéå¸¸å¸¸ç”¨çš„æ–¹æ³•ï¼š

- includes()
- startsWith()
- endsWith()

è¿™ä¸‰ä¸ªæ–¹æ³•æ˜¯ä¸€ç»„æ–¹æ³• -> å¯ä»¥è®©æˆ‘ä»¬**æ›´æ–¹ä¾¿åœ°å»åˆ¤æ–­å­—ç¬¦ä¸²å½“ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„å†…å®¹**

ä¾‹å­ï¼š

å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š

``` js
const message = 'Error: foo is not defined.'
```

å‡è®¾è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯ç¨‹åºè¿è¡Œå½“ä¸­å¾—åˆ°çš„é”™è¯¯æ¶ˆæ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬æƒ³è¦çŸ¥é“**è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä»¥`Error`å¼€å¤´**ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨`startsWith`æ–¹æ³•å»åˆ¤æ–­ï¼š

``` js
const message = "Error: foo is not defined.";

console.log(message.startsWith("Error")); // true
```

åŒç†ï¼Œåˆ¤æ–­**è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä»¥`.`ç»“å°¾**ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨`endsWith`æ–¹æ³•ï¼š

``` js
const message = "Error: foo is not defined.";

console.log(message.endsWith(".")); // true
```

å¦‚æœæˆ‘ä»¬éœ€è¦æ˜ç¡®çŸ¥é“**è¿™ä¸ªå­—ç¬¦ä¸²çš„ä¸­é—´æ˜¯å¦åŒ…å«æŸä¸ªå†…å®¹**ï¼Œå¦‚è¿™ä¸ªå­—ç¬¦å½“ä¸­æ˜¯å¦åŒ…å«`foo`ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨`includes`æ–¹æ³•ï¼š

``` js
const message = "Error: foo is not defined.";

console.log(message.includes("foo")); // true
```

ç›¸æ¯”äºä¹‹å‰æˆ‘ä»¬ä½¿ç”¨çš„`indexOf`æˆ–è€…æ˜¯æ­£åˆ™å»åˆ¤æ–­ï¼ŒES2015 æä¾›çš„è¿™æ ·ä¸€ç»„æ–¹æ³•ä¼šè®©æˆ‘ä»¬çš„å­—ç¬¦ä¸²æŸ¥æ‰¾ä¾¿æ·å¾ˆå¤šï¼

## â˜…è¡¥å……

### <mark>1ï¼‰å­—ç¬¦ä¸²æ¨¡æ¿çš„ä½¿ç”¨åœºæ™¯</mark>

#### <mark>1ã€åœ¨ Vue ä¸­å†™ä¸€ä¸ªæ¨¡æ¿</mark>

ä»¥å‰ï¼š

ä½ å¯ä»¥è¿™æ ·å†™ï¼š

``` js
var html = "<ul>"
         + "  <li>This is list item 1</li>"
         + "  <li>This is list item 2</li>"
         + "</ul>";
```

ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š

``` js
var html = [
  "<ul>",
  "  <li>This is list item 1</li>",
  "  <li>This is list item 2</li>",
  "</ul>"
].join("");
```

ç°åœ¨ï¼š

![å¤šè¡Œå­—ç¬¦ä¸²](assets/img/2021-04-27-18-27-08.png)

> ä¸ºäº†ä¿æŒç¼©è¿›ï¼Œæˆ‘ä»¬åœ¨å¼€å¤´æ·»åŠ äº†ä¸€ä¸ªæ–°è¡Œ

---

![å†™æ¨¡æ¿](assets/img/2021-04-27-15-16-26.png)

#### <mark>2ã€åƒå†™ JSX ä¸€æ ·</mark>

> å­—ç¬¦ä¸²æ¨¡æ¿ -> å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼

``` js
let word = "world";
let str = `hello, ${word.split("").map(c => `(${c})`).join("")}`;
// hello, (w)(o)(r)(l)(d)
```

> è¿™ä»£ç å¾ˆä¼¤çœ¼â€¦â€¦è¯è¯´ä½ å–œæ¬¢çŸ­ä»£ç ï¼Ÿè¿˜æ˜¯å¯è¯»æ€§å¥½çš„ä»£ç ï¼Ÿ -> å¦‚æœç®€æ´çš„ä»£ç æœ‰ä¸€åŠè¿‡äºèªæ˜ï¼Œé‚£ä¹ˆè¿™å¯¹äºä»£ç é•¿æœŸçš„å¯ç»´æŠ¤æ€§æ¥è¯´å¯èƒ½ä¸æ˜¯å¾ˆå¥½

``` html
<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8" />
    <title>01-template-strings</title>
    <style>
      .todoList {
        width: 300px;
        border: 1px solid #b0e2ff;
        border-radius: 3px;
      }
      .userName {
        padding: 10px 0 10px 10px;
        background: #b0e2ff;
      }
      .date {
        padding: 5px 0 5px 10px;
        background: #b0e2ff;
      }
    </style>
  </head>
  <body>
    <script>
      const Frank = {
        name: "Frank",
        date: "2021-04-27",
        todos: [
          {
            item: "go to store",
            completed: false,
          },
          {
            item: "go to store",
            completed: true,
          },
          {
            item: "go to store",
            completed: true,
          },
        ],
      };
      function renderTodos(todos) {
        return `
        <ul>
          ${todos
            .map(
              (todo) => `
              <li>
                ${todo.item} ${todo.completed ? "âˆš" : "Ã—"}
              </li>`
            )
            .join("")}
        </ul>
        `;
      }
      const template = `
        <div class="todoList">
          <div class="userName">${Frank.name}</div>
          <div class="list">
          ${renderTodos(Frank.todos)}
          </div>
          <div class="date">${Frank.date}</div>
        </div>
      `;
      document.body.innerHTML = template;
    </script>
  </body>
</html>
```

![jsx](assets/img/2021-04-27-15-35-35.png)

#### <mark>3ã€é«˜äº®æ–‡æœ¬</mark>

``` html
<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8" />
    <title>02-highlight</title>
    <style>
      .highLight {
        padding: 2px 5px;
        background: #b0e2ff;
      }
    </style>
  </head>
  <body>
    <script>
      function highLight(strings, ...values) {
        const highLighted = values.map(
          (value) => `<span class="highLight">${value}</span>`
        );

        let str = "";

        strings.forEach(
          (string, i) => (str += `${string}${highLighted[i] || ``}`)
        );

        return str;
      }

      const user = "Asher";
      const topic = "Learn to use es6";
      const sentence = highLight`<p>${user} has commented on your topic ${topic}</p>`;
      document.body.innerHTML = sentence;
    </script>
  </body>
</html>
```

![é«˜äº®](assets/img/2021-04-27-16-52-12.png)

#### <mark>4ã€è¿‡æ»¤ç”¨æˆ·è¾“å…¥</mark>

``` html
<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8" />
    <title>03-filter-input</title>
    <style>
      .comment-text {
        padding: 10px;
        width: 350px;
        height: 150px;
        border: 1px solid #b0e2ff;
        border-radius: 3px;
      }
      button {
        display: block;
        margin: 10px 0 20px;
        padding: 10px 15px;
        background: #b0e2ff;
        border: 1px solid #b0e2ff;
        border-radius: 3px;
        color: #333;
        cursor: pointer;
      }
      .userName {
        padding-bottom: 15px;
        border-bottom: 1px solid #ccc;
        color: #f08080;
        font-size: 18px;
      }
      .comentCotent {
        padding: 15px 0;
      }
    </style>
  </head>
  <body>
    <div class="box">
      <form class="add-comment">
        <textarea class="comment-text"></textarea>
        <button>Post Comment</button>
      </form>
      <div class="comment"></div>
    </div>

    <script type="text/javascript">
      const addCommentForm = document.querySelector(".add-comment");
      const textarea = document.querySelector(".comment-text");
      const comment = document.querySelector(".comment");
      const user = "Asher";

      function filter(strings, ...values) {
        //è¿™é‡Œå¯ä»¥å†™ä¸Šè¿‡æ»¤éœ€æ±‚
        //æ•æ„Ÿè¯è¿‡æ»¤
        let strArray = ["sb", "ghs"];
        // str = str.replace(/åƒåœ¾/g,"**")
        let res = values[1];
        strArray.forEach((value) => {
          // new RegExp('ab+c', 'i');
          let reg = new RegExp(`${value}`, "g");
          console.log(reg);
          let rep = "";
          let i = 0;
          while (i < value.length) {
            rep += "*";
            i++;
          }
          res = res.replace(reg, rep);
        });
        console.log(res);
        return res;
      }
      addCommentForm.addEventListener("submit", function (evt) {
        evt.preventDefault();
        const newComment = textarea.value.trim();
        if (newComment) {
          comment.innerHTML = filter`
                  <div class="userName">${user}</div>
                  <div class="comentCotent">${textarea.value}</div>
              `;
          textarea.value = "";
        }
      });
    </script>
  </body>
</html>
```

![æ•æ„Ÿè¯è¿‡æ»¤](assets/img/2021-04-27-17-30-12.png)

â¹ï¼š[HTML JS å†™ è¿‡æ»¤æ•æ„Ÿè¯_æˆ‘çš„å’–å•¡å…çš„åšå®¢-CSDN åšå®¢](https://blog.csdn.net/weixin_45451197/article/details/104686904)

â¹ï¼š[js å®ç°æ•æ„Ÿè¯è¿‡æ»¤ç®—æ³•_å°é»ä¹Ÿçš„ä¸“æ -CSDN åšå®¢](https://blog.csdn.net/sdfedsee/article/details/108271829)

#### <mark>5ã€ä¸ºå­—ç¬¦ä¸²é‡Œè¾¹åŠ ç‚¹ç¼€</mark>

![é‡å¤](assets/img/2021-04-27-17-42-24.png)

#### <mark>6ã€å³å¯¹é½æ˜¾ç¤ºå­—ç¬¦ä¸²</mark>

![å³å¯¹é½æ˜¾ç¤ºå­—ç¬¦ä¸²](assets/img/2021-04-27-17-49-59.png)

#### <mark>7ã€è¿‡æ»¤ HTML å­—ç¬¦ä¸²ï¼Œé˜²æ­¢ç”¨æˆ·è¾“å…¥æ¶æ„å†…å®¹</mark>

``` js
var sender = '<script>alert("abc")</script>'; // æ¶æ„ä»£ç 
var message = SaferHTML`<p>${sender} has sent you a message.</p>`;

function SaferHTML(templateData) {
  var s = templateData[0];
  for (var i = 1; i < arguments.length; i++) {
    var arg = String(arguments[i]);

    // Escape special characters in the substitution.
    s += arg.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");

    // Don't escape special characters in the template.
    s += templateData[i];
  }
  return s;
}

console.log(message)
```

è¿‡æ»¤ç»“æœï¼š

``` html
<p>&lt;script&gt;alert("abc")&lt;/script&gt; has sent you a message.</p>
```

#### <mark>8ã€è®©å¤šè¡Œå­—ç¬¦ä¸²ï¼Œä¸€è¡ŒåŒ–</mark>

ä½¿ç”¨`common-tags`è¿™ä¸ªåº“ï¼ˆæä¾›äº†å¾ˆå¤šæ ‡ç­¾å‡½æ•°ï¼‰ï¼š

``` js
import { oneLine } from "common-tags";

oneLine`
  foo
  bar
  baz
`;
// "foo bar baz"
```

> å†™ CSS çš„æ—¶å€™ï¼Œè®©å¤šè¡Œ CSS ä¸€è¡ŒåŒ–ï¼

#### <mark>9ã€å¤šè¯­è¨€è½¬æ¢ï¼ˆå›½é™…åŒ–å¤„ç†ï¼‰</mark>

> i18nï¼ˆå…¶æ¥æºæ˜¯è‹±æ–‡å•è¯ internationalization çš„é¦–æœ«å­—ç¬¦ i å’Œ nï¼Œ18 ä¸ºä¸­é—´çš„å­—ç¬¦æ•°ï¼‰æ˜¯â€œå›½é™…åŒ–â€çš„ç®€ç§°ã€‚ åœ¨èµ„è®¯é¢†åŸŸï¼Œå›½é™…åŒ– (i18n) æŒ‡è®©äº§å“ï¼ˆå‡ºç‰ˆç‰©ï¼Œè½¯ä»¶ï¼Œç¡¬ä»¶ç­‰ï¼‰æ— éœ€åšå¤§çš„æ”¹å˜å°±èƒ½å¤Ÿé€‚åº”ä¸åŒçš„è¯­è¨€å’Œåœ°åŒºçš„éœ€è¦ã€‚ å¯¹ç¨‹åºæ¥è¯´ï¼Œåœ¨ä¸ä¿®æ”¹å†…éƒ¨ä»£ç çš„æƒ…å†µä¸‹ï¼Œèƒ½æ ¹æ®ä¸åŒè¯­è¨€åŠåœ°åŒºæ˜¾ç¤ºç›¸åº”çš„ç•Œé¢ã€‚ -> ã€Œé¦–å­—æ¯+å­—æ¯ä¸ªæ•°+å°¾å­—æ¯ã€ï¼ˆå¯¹åº”é‚£ä¸‰ä¸ªå­—ç¬¦ä¸²æ–¹æ³•ï¼‰ -> I18n æ˜¯ internationalizationï¼Œg11n æ˜¯ globalizationï¼Œ K8s æ˜¯ Kubernetes

``` js
i18n`Welcome to ${siteName}, you are visitor number ${visitorNumber}!`;
// "æ¬¢è¿è®¿é—® xxxï¼Œæ‚¨æ˜¯ç¬¬ xxxx ä½è®¿é—®è€…ï¼"
```

#### <mark>10ã€styled-components</mark>

``` js
const Button = styled.button`
  background-color: papayawhip;
  border-radius: 3px;
  color: palevioletred;
`
```

#### <mark>11ã€ç¿»è½¬å•è¯</mark>

``` js
// zip -> æŠŠä¼ ç»™æ ‡ç­¾å‡½æ•°çš„å‚æ•°å‹ç¼©åˆ°ä¸€èµ·â€¦â€¦
function zip(a, b) {
  let acc = [];
  for (let i = 0, l = Math.max(a.length, b.length); i < l; i++) {
    acc.push([a[i], b[i]]);
  }
  return acc;
}
function reverseWords(strings, ...args) {
  let numArgs = args.length;
  return zip(strings, args)
    .map(([literal, val], idx) => `${literal}${idx < numArgs ? val : ""}`)
    .join(" ")
    .split(/\s+/)
    .map((_, idx, arr) => arr[arr.length - idx - 1])
    .join(" ");
}
let foxColor = "brown";
let dogEnergy = "lazy";
let s = reverseWords`The quick ${foxColor} fox jumped over the ${dogEnergy} dog`;
// "dog lazy the over jumped fox brown quick The"

console.log(s);
```

#### <mark>12ã€SQL è¯­å¥</mark>

SQL æ³¨å…¥æ˜¯ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ãƒ¼ãƒ¼æœ‰å¾ˆå¤šä¸å¥½çš„ä¾‹å­æ˜¯ä¸²è”å˜é‡è€Œä¸æ˜¯ç»‘å®šå˜é‡

é”™è¯¯çš„åšæ³•ï¼š

``` js
// BAD, BAD, VERY BAD, DON'T EVER DO THIS, EVER, EVER, EVER!
// PLEASE, I'M BEGGING YOU: DO NOT USE!
let lastName = "Smith";
let sql = `SELECT * FROM PEOPLE WHERE LAST_NAME = ${lastName}`;
```

æ­£ç¡®çš„åšæ³•ï¼š

``` js
// ? -> è¡¨ç¤ºå°†åœ¨å“ªé‡Œæ›¿æ¢é¡¹
let sql = `SELECT * FROM PEOPLE WHERE LAST_NAME = ?`;
let binds = [lastName];
```

``` js
function zip(a, b) {
  let acc = [];
  for (let i = 0, l = Math.max(a.length, b.length); i < l; i++) {
    acc.push([a[i], b[i]]);
  }
  return acc;
}

function sql(strings, ...args) {
  let numArgs = args.length;
  return zip(strings, args).reduce(
    (acc, [literal, arg], idx) => {
      acc.sql += literal;
      if (idx < numArgs) {
        acc.sql += "?";
        acc.binds.push(arg);
      }
      return acc;
    },
    { sql: "", binds: [] }
  );
}

let salary = 60000;
let companyId = 1234;

let preparedSql = sql`
SELECT employeeId
  FROM employees
 WHERE companyId = ${companyId}
   AND annualSalary > ${salary}
`;

console.log(preparedSql.sql);
console.log(preparedSql.binds);
```

æ‰§è¡Œç»“æœï¼š

``` html

SELECT employeeId
FROM employees
WHERE companyId = ?
 AND annualSalary > ?

[ 1234, 60000 ]
```

éš¾åˆ°æ˜¯æŠŠè¿™ä¸¤ä¸ªå€¼äº¤ç»™åç«¯å»å¤„ç†ï¼Ÿ -> åç«¯ä¼šå»æ ¡éªŒ`salary`ã€`companyId`çš„å€¼æ˜¯å¦åˆç†ï¼Ÿ

### <mark>2ï¼‰æŠ€å·§</mark>

ä¸€ç§å¿«é€ŸæŸ¥çœ‹å‡½æ•°æœ‰å“ªäº›å‚æ•°çš„`debugger`æ–¹å¼ï¼š

``` js
function highLight(...values) {
  debugger;
}
const user = "Asher";
const topic = "Learn to use es6";
const sentence = highLight`${user} has commented on your topic ${topic}`;
```

![debugger](assets/img/2021-04-27-15-50-55.png)

## â˜…äº†è§£æ›´å¤š

â¹ï¼š[ES6-å­—ç¬¦ä¸²æ¨¡æ¿ - ç®€ä¹¦](https://www.jianshu.com/p/417087f879c7)

â¹ï¼š[ES6-å­—ç¬¦ä¸²å‡½æ•° - ç®€ä¹¦](https://www.jianshu.com/p/2a7c5c0aa6b2)

â¹ï¼š[æˆ‘å¯¹æ¨¡ç‰ˆå­—ç¬¦ä¸²ä¸­æ ‡ç­¾æ¨¡æ¿çš„æ€è€ƒ - SegmentFault æ€å¦](https://segmentfault.com/a/1190000022448354)

â¹ï¼š[The magic behind ğŸ’… styled-components - Max Stoibers Blog](https://mxstbr.blog/2016/11/styled-components-magic-explained/)

â¹ï¼š[common-tags - npm](https://www.npmjs.com/package/common-tags)

â¹ï¼š[i18n - npm](https://www.npmjs.com/package/i18n)

â¹ï¼š[I18n g11n K8s i22y è¿™æ ·çš„ç¼©å†™èµ·æºäºä½•å¤„ï¼Ÿ - çŸ¥ä¹](https://www.zhihu.com/question/39756710)

â¹ï¼š[ES2015 Template Literals. â€œTemplate literalâ€ may sound strangeâ€¦](https://medium.com/@photokandy/es2015-template-literals-eddf051ed8ee)

â¹ï¼š[incaseofstairs.com/six-speed/](http://incaseofstairs.com/six-speed/)

## â˜…æ€»ç»“

- å¤šè¡Œå­—ç¬¦ä¸²ä¿ç•™äº†ç©ºæ ¼ï¼Œå¦‚æœç›´æ¥æ’å…¥åˆ° DOM ä¸­ï¼Œçœ‹ä¸åˆ°æ˜æ˜¾çš„æ•ˆæœï¼Œå¦‚æœä½ åœ¨æ§åˆ¶å°æ‰“å°æ–‡æœ¬ï¼Œå°±èƒ½çœ‹åˆ°æ˜æ˜¾çš„ç©ºæ ¼äº†ï¼ -> å­—ç¬¦ä¸²æ¨¡æ¿é‡Œçš„å­—ç¬¦éƒ½æ˜¯ä¸€ä¸ªä¸ªæ˜ç¡®çš„å­—ç¬¦å•Šï¼
- interpolationï¼ˆæ’å€¼ï¼‰è¯­æ³•ï¼š`${...}` -> `{}`å†…çš„ä»»ä½•å†…å®¹éƒ½ä¼šè¢«è®¡ç®—ï¼Œè¿™æ„å‘³ç€æ¨¡æ¿å­—ç¬¦ä¸²æ˜¯éå¸¸å¼ºå¤§çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥è®¡ç®—ä»»æ„è¡¨è¾¾å¼ -> ä»æŠ€æœ¯ä¸Šè®²ï¼Œè¿™ä¸ªç‰¹æ€§å«åšã€Œexpression interpolationã€ï¼ˆè¡¨è¾¾å¼æ’å€¼ï¼‰æ˜¾ç„¶æ›´å¥½ï¼
- ä»æŠ€æœ¯è®²ï¼Œexpression interpolation ç­‰åŒäºã€Œconcatenationã€ï¼ˆè¿æ¥ã€ä¸²è”ï¼‰ -> å½“ä½ è¿æ¥å…¶å®ƒé™æ€å­—ç¬¦ä¸²æ—¶ï¼Œä½ éœ€è¦è€ƒè™‘è¿™æ•´ä¸ªè¿æ¥ç»“æœçš„å®‰å…¨æ€§â€¦â€¦ -> ä¼šæœ‰ã€ŒDOM injection attackã€ã€SQL æ³¨å…¥çš„é£é™©
- Tagged Template Literalsï¼šè¿™ä¸ªç‰¹æ€§éå¸¸æœ‰ç”¨ï¼Œæˆ–è®¸è¿™ç§è¯­æ³•éœ€è¦ä¸€ç‚¹æ—¶é—´æ‰èƒ½é€‚åº”ï¼Œä½†ä¸€æ—¦ä¹ æƒ¯äº†å®ƒï¼Œä½ å°±ä¼šå‘ç°å®ƒçš„ç‰›é€¼ä¹‹å¤„äº†ï¼ -> è¯­æ³•`function tagFn(strings:Array[String], parm1:any, parm2:any, ...) {}`
- å­—ç¬¦ä¸²é€‰æ‹©ï¼ˆæ¨¡æ¿å­—ç¬¦ä¸²ç›¸è¾ƒäºå¸¸è§„å­—ç¬¦ä¸²ï¼Œæ€§èƒ½ä¼šæœ‰å°‘è®¸ä¸åŒï¼Œä½†å½±å“ä¹Ÿå¹¶ä¸å¤§ï¼‰ï¼š
  - å¦‚æœä½ è®¤ä¸ºè¿™ä¸ªå­—ç¬¦ä¸²æœ€ç»ˆå¯èƒ½éœ€è¦æ’å€¼ï¼Œæˆ–è€…è¯´ä½ çš„ä»£ç éœ€è¦è·¨è¡Œã€éœ€è¦ä½¿ç”¨æ ‡ç­¾å‡½æ•° -> é‚£ä¹ˆå°±æœ‰æ¨¡æ¿å­—ç¬¦ä¸²å‘—ï¼
  - å¦åˆ™ï¼Œå°±ç”¨å¸¸è§„å­—ç¬¦ä¸²ï¼
  - æ³¨æ„ï¼šå¦‚æœæœ‰éå¸¸å¤æ‚çš„è¡¨è¾¾å¼æ’å€¼ï¼Œä¸ºäº†ä»£ç æ›´å®¹æ˜“é˜…è¯»å’Œç†è§£ï¼Œè¯·ä½¿ç”¨çŸ­è¡¨è¾¾å¼â€¦â€¦

ğŸ’¡ï¼šè¡¨è¾¾å¼çš„ç§ç±»ï¼Ÿ(JS è¡¨è¾¾å¼ç²’åº¦çš„æ‰§è¡Œé€»è¾‘ï¼‰

è¡¨è¾¾å¼æœ‰ï¼š

- Primary Expressionï¼šæœ€å°ç²’åº¦çš„è¡¨è¾¾å¼ï¼Œå¦‚å­—é¢é‡ã€å˜é‡ã€`this`ã€`()`
- Member Expressionï¼šæˆå‘˜è®¿é—®/å±æ€§è®¿é—®è¡¨è¾¾å¼ï¼Œå¦‚`a.b`ã€`a[b]`
- New Expressionï¼šNew è¿ç®—ç¬¦è¡¨è¾¾å¼ï¼Œå¦‚`new Foo`
- Call Expressionï¼šè°ƒç”¨è®¿é—®è¡¨è¾¾å¼ï¼Œå¦‚`fn()`ã€`super()`ã€å¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆè¿™ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°è°ƒç”¨æ–¹å¼ï¼‰
- Update Expressionï¼šæ›´æ–°è¡¨è¾¾å¼ï¼Œå¦‚`a++`ã€`++a`
- Unary Expressionï¼šä¸€å…ƒè¡¨è¾¾å¼ï¼ˆå¸¸è§„æ“ä½œ/ç±»å‹è½¬æ¢ï¼‰ï¼Œå¦‚`delete a.b`ã€`typeof a`ã€`void a`ã€`await a`ã€`+a`ã€`!a`
- è®¡ç®—è¡¨è¾¾å¼
  - Additive Expression: åŠ å‡æ³•è¡¨è¾¾å¼ï¼Œå¦‚`a+b`ã€`a-b`
  - Multiplicative Expressionï¼šä¹˜æ³•è¡¨è¾¾å¼ï¼Œå¦‚`a*b`
  - Exponental Expressionï¼šä¹˜æ–¹è¡¨è¾¾å¼ï¼Œå¦‚`a**b`
- å…³ç³» & é€»è¾‘è¡¨è¾¾å¼
  - å…³ç³»è¡¨è¾¾å¼ï¼šç”¨åˆ°å…³ç³»è¿ç®—ç¬¦ï¼Œå¦‚`instance`å’Œ`in` -> `a instanceof b`ï¼ˆa è·Ÿ b çš„å…³ç³»ï¼Ÿa æ˜¯ b çš„å®ä¾‹å—ï¼Ÿï¼‰ã€`a in b`ï¼ˆb ä¸­æœ‰ a å±æ€§å—ï¼Ÿï¼‰ã€`a > b`ï¼ˆa æ¯” b å¤§å—ï¼Ÿï¼‰
  - é€»è¾‘è¡¨è¾¾å¼ï¼š`a && b`ã€`a || b` -> éƒ½æ˜¯çŸ­è·¯

ä¸¤ä¸ªæˆ–å¤šä¸ªè¡¨è¾¾å¼åœ¨ä¸€èµ·ä½¿ç”¨ï¼Œé‚£è¿™ç»„åˆèµ·æ¥çš„è¡¨è¾¾å¼ï¼Œå°†ä¼šæŒ‰ç…§ä»€ä¹ˆæ ·çš„é¡ºåºè¿›è¡Œè®¡ç®—å‘¢ï¼Ÿ

JS ä¸–ç•Œç»™äº†è¿™äº›è¡¨è¾¾å¼çš„æ‰§è¡Œä¼˜å…ˆçº§è§„åˆ™ï¼š

``` html
ç¬¬ä¸€æ¢¯é˜Ÿï¼šå±æ€§è®¿é—®ï¼Œæˆå‘˜å˜é‡
ç¬¬äºŒæ¢¯é˜Ÿï¼šnew
ç¬¬ä¸‰æ¢¯é˜Ÿï¼šåç½®è®¡ç®—
ç¬¬å››æ¢¯é˜Ÿï¼šå‰ç½®è®¡ç®—ï¼ˆä¸€å…ƒè¿ç®—ç¬¦ï¼ŒtypeOf, instanceof, void, awaitï¼‰
```

> `()`çš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ï¼Œä¸ºäº†ä¸å»è®°å¿†ä¼˜å…ˆçº§ï¼Œä½ å¯ä»¥åŠ `()`

å…³äºèµ‹å€¼è¡¨è¾¾å¼ä¼˜å…ˆçº§ï¼ˆè¿™ä¸ªèµ‹å€¼æœ€å¸¸ç”¨ï¼‰ï¼š

* èµ‹å€¼å³ç»“åˆï¼ˆå³å…³è”ï¼‰
* é€—å·å–å€¼åç½®é€»è¾‘

``` js
/* èµ‹å€¼å³ç»“åˆï¼ˆå³å…³è”ï¼‰*/
a = b = c = d // ç­‰åŒäºï¼ša = (b = (c = d))

/* é€—å·å–å€¼åç½® */
a = (1, 2, 3) // a: 3
```

â¹ï¼š[JavaScript è¡¨è¾¾å¼ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/226089184)

â¹ï¼š[Operator precedence - JavaScript - MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence)