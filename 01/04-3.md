### âœï¸ Tangxt â³ 2021-06-10 ğŸ·ï¸ functional programming

# 04-3-é—­åŒ…æ¦‚å¿µã€é—­åŒ…æ¡ˆä¾‹

## â˜…æ¦‚è¿°

é—­åŒ…æ˜¯ JavaScript ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚è¿™æ˜¯ä¸€ä¸ªè¢«å¹¿æ³›è®¨è®ºçš„æ¦‚å¿µ -> è®©äººæ„Ÿåˆ°å›°æƒ‘çš„æ¦‚å¿µ

Douglas Crockford ç»™è¿™ä¸ªæ¦‚å¿µçš„å®šä¹‰ï¼š

> Closure means that an inner function always has access to the vars and parameters of its outer function, even after the outer function has returned.

é—­åŒ…æ„å‘³ç€ï¼Œå³ä½¿åœ¨å¤–éƒ¨å‡½æ•°è¿”å›ä¹‹åï¼Œå†…éƒ¨å‡½æ•°ä»ç„¶å¯ä»¥è®¿é—®å…¶å¤–éƒ¨å‡½æ•°çš„å˜é‡å’Œå‚æ•°ï¼ˆå¤–éƒ¨å‡½æ•°çš„`arguments`å¯¹è±¡ä¸èƒ½è®¿é—®ï¼‰ -> åµŒå¥—å‡½æ•°

``` js
function OuterFunction() {
  var outerVariable = 100;

  function InnerFunction() {
    alert(outerVariable);
  }

  return InnerFunction;
}
var innerFunc = OuterFunction();

innerFunc(); // 100
```

é—­åŒ…çš„å½¢å¼åŒ–ç†è§£ï¼š

![box](assets/img/2021-06-10-14-59-32.png)

> a closure is kind of a box with some contents in it

ä½ æœ‰ä¸€åªçŒ«ï¼Œä½ æŠŠå®ƒå’Œä¸€å †çƒä¸€èµ·æ”¾åœ¨ä¸€ä¸ªç›’å­é‡Œè¾¹ï¼Œç„¶åæŠŠè¿™ä¸ªç›’å­å°èµ·æ¥ã€‚æ‰€ä»¥ï¼Œç°åœ¨ç›’å­çš„ä½œç”¨å°±åƒä¸€ä¸ªå°é—­ç‰©ï¼ˆclosureï¼‰â€”â€”æŠŠçŒ«å’Œçƒå°é—­èµ·æ¥ã€‚çŒ«ä»ç„¶å¯ä»¥æ¥è§¦åˆ°è¿™äº›çƒï¼Œå½“ç„¶ï¼Œå®ƒå¯ä»¥éšæ—¶æ¥è§¦åˆ°è¿™äº›çƒã€‚

è€Œåœ¨ JS é‡Œè¾¹ï¼Œé—­åŒ…å¯ä¸æ˜¯çŒ«å’Œçƒï¼Œè€Œæ˜¯åŒ…å«ä¸€ä¸ªå‡½æ•°ä»¥åŠå‡½æ•°å£°æ˜æ—¶ä½œç”¨åŸŸä¸­çš„æ‰€æœ‰å˜é‡ -> `cat`ä»£æ›¿äº†å‡½æ•°ï¼Œè€Œ`balls`ä»£æ›¿äº†ä½œç”¨åŸŸä¸­çš„æ‰€æœ‰çš„å˜é‡

![é—­åŒ… 1](assets/img/2021-06-10-15-13-09.png)

![é—­åŒ… 2](assets/img/2021-06-10-15-09-27.png)

â¹ï¼š[JavaScript Closures - Web Code Geeks - 2021](https://www.webcodegeeks.com/javascript/javascript-closures/)

â¹ï¼š[Closure in JavaScript](https://www.tutorialsteacher.com/javascript/closure-in-javascript)

## â˜…é—­åŒ…æ¦‚å¿µ

