### âœï¸ Tangxt â³ 2021-11-03 ğŸ·ï¸ å·¥ç¨‹åŒ–

# 19-è‡ªåŠ¨åŒ–å·¥å…·ã€Node.js è¡¥å……

- [Metalsmith](https://www.jianshu.com/p/07a402ddee7c) -> æ—©æœŸ vue-cli å°±æœ‰ç”¨åˆ°å®ƒï¼Œä¸è¿‡ä¹‹åå°±ä¸ç”¨å®ƒäº†ï¼ -> Smith è¿™ä¸ªäººåŠ å·¥è¿™å— Metal -> åŠ å·¥æˆè‡ªå·±æƒ³è¦çš„æ ·å­
- Grunt -> äº†è§£å°±å¥½ï¼Œèƒ½çœ‹æ‡‚è€é¡¹ç›®ä½¿ç”¨å®ƒæ—¶çš„é…ç½®å³å¯
- è‡ªæ‰“ Webpack å‡ºæ¥ä¹‹åï¼ŒGulp æ˜¯å¦çœŸå¾—å°±å·²ç»å‡‰äº†ï¼Ÿ -> å¹¶éå¦‚æ­¤
- å‰ç«¯çš„æ ¸å¿ƒæ˜¯ Node è¿™å— -> ä¼š Node ä¹‹åï¼Œä½ ä¼šå‘ç°ä½ ä¹‹å‰è®¤è¯†çš„å‰ç«¯è·Ÿç°åœ¨è®¤è¯†çš„å‰ç«¯æ˜¯ä¸¤å›äº‹ï¼ -> è®²çš„æ˜¯ Node çš„åŸºç¡€å†…å®¹ -> ä¸è¦æŠŠè‡ªå·±ä¸æ˜ç™½å½“ä½œæ˜¯åˆç†çŠ¶æ€ï¼Œä½ ä¸æ˜ç™½ï¼Œé‚£ä½ å°±æƒ³åŠæ³•æŠŠå®ƒææ˜ç™½

## â˜…æ—¥å¸¸é—®é¢˜

### <mark>1ï¼‰å¸Œæœ›èƒ½è®²ä¸‹è„šæ‰‹æ¶çš„å®é™…åº”ç”¨</mark>

* vue-cli æˆ–è€… create-react-app åˆ›å»ºå‡ºæ¥çš„éƒ½æ˜¯é€‚ç”¨äºå¤§éƒ¨åˆ†äººçš„åŸºç¡€ç»“æ„ï¼Œæ‰€ä»¥ç”Ÿæˆçš„ç»“æ„å¾€å¾€æ˜¯æç®€çš„
* è€Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬åœ¨åŒä¸€ä¸ªå…¬å¸çš„ä¸åŒé¡¹ç›®ä¸­è¿˜æœ‰å¾ˆå¤šåŸºç¡€è®¾æ–½éƒ½æ˜¯ç›¸åŒçš„ï¼Œä¾‹å¦‚ `axios` çš„åŒ…è£…ã€è·¯ç”±é‰´æƒç­‰ï¼Œæ‰€ä»¥ä¹Ÿåº”è¯¥æ”¾è¿›è„šæ‰‹æ¶æ¨¡ç‰ˆä¸­
* è¿™ç§æƒ…å†µä¸‹ï¼Œå¾ˆå¤šå…¬å¸æˆ–å›¢é˜Ÿå°±ä¼šé€‰æ‹©å¼€å‘è‡ªå·±çš„è„šæ‰‹æ¶å·¥å…·ï¼Œä»¥ç¬¦åˆè‡ªèº«éœ€è¦

### <mark>2ï¼‰`.npmignore`ï¼Ÿ</mark>

è„šæ‰‹æ¶çš„ template æ–‡ä»¶å¤¹å†…çš„ `.gitignore` æ–‡ä»¶ publish å‡ºå»å°±æ²¡äº†ï¼Œgithub ä¸Šæ˜¯æœ‰çš„ï¼Œè€Œ [npmjs.com](http://npmjs.com/) é‚£è¾¹å°±æ²¡æœ‰ï¼ˆåŸæ–‡æœ¬å†…å®¹ï¼‰

> npm ä¼šè‡ªåŠ¨å¿½ç•¥ä¸€éƒ¨åˆ†æ–‡ä»¶ï¼Œä¾‹å¦‚ testsã€`.gitignore`ã€‚å¯ä»¥é€šè¿‡ `.npmignore` é…ç½®

### <mark>3ï¼‰è„šæ‰‹æ¶å¼€å‘æ¨¡æ¿å¦‚æœç›®å½•å±‚çº§å¤šè¯¥å¦‚ä½•ç”Ÿæˆï¼Ÿ</mark>

### <mark>4ï¼‰Node.js è‡ªå®šä¹‰çš„å°å‹è„šæ‰‹æ¶ä¸­æ€ä¹ˆå®ç°æ¨¡æ¿é¡¹ç›®å¯¹åº”çš„äºŒçº§ã€ä¸‰çº§ç›®å½•æ–‡ä»¶çš„æ‹·è´ï¼ˆç”Ÿæˆçš„æ–‡ä»¶ç›®å½•ç»“æ„å’Œæ¨¡æ¿ä¸€æ ·ï¼‰</mark>

* åªéœ€è¦æŒ‰ç…§æ¨¡ç‰ˆç»“æ„ç”Ÿæˆæ–‡ä»¶å°±è¡Œäº†ï¼Œå¯ä»¥é‡‡ç”¨é€’å½’æ¨¡ç‰ˆç»“æ„çš„æ–¹å¼å®ç°
* å»ºè®®ä½¿ç”¨ `metalsmith` å®ç°ï¼Œéå¸¸ä¾¿æ·
* å¯ä»¥å‚è€ƒæˆ‘çš„ä¸ªäºº CLIï¼š<https://github.com/zce/zce-cli>
* <https://github.com/zce/zce-cli/blob/master/lib/generator/generate.js>

### <mark>5ï¼‰Grunt çš„å®šä½ï¼Ÿ</mark>

grunt çš„å®šä½åªæ˜¯äº†è§£ï¼Œè€ƒè™‘ä¸€éƒ¨åˆ†æ¯”è¾ƒæ—©æœŸçš„å¼€æºé¡¹ç›®å°±æ˜¯ä½¿ç”¨çš„ gruntï¼Œä¾‹å¦‚ï¼š

- bootstrapï¼š<https://github.com/twbs/bootstrap/blob/v3-dev/Gruntfile.js>
- ghostï¼š<https://github.com/TryGhost/Ghost/blob/master/Gruntfile.js>

æ‰€ä»¥æˆ‘ä»¬å¯¹ grunt çš„å®šä½å°±æ˜¯äº†è§£ä¸€ä¸‹å³å¯ï¼Œèƒ½çœ‹æ‡‚åˆ«äººçš„é…ç½®ã€‚

ç”±äº grunt ç°åœ¨å·²ç»å¯ä»¥è¯´å®Œå…¨è¢« gulp å–ä»£äº†ï¼Œæ‰€ä»¥å¾ˆå¤šæ’ä»¶ã€Œå¹´ä¹…å¤±ä¿®ã€ï¼Œè‡ªç„¶ä¼šæœ‰è¿™æ ·æˆ–è€…é‚£æ ·çš„é—®é¢˜ï¼Œä¸ç”¨çº ç»“ã€‚

### <mark>6ï¼‰Gulp</mark>

- å¦‚ä½•é€‰ç”¨é€‚åˆçš„ gulp æ’ä»¶ä¹‹ç±»çš„
  * Google / GitHub / npmjs.com çš„æœç´¢
  * npmjs æŒ‰ç…§æµè¡Œç¨‹åº¦æ’åº
  * GitHub æŒ‰ç…§ stars æ•°é‡ï¼Œå†çœ‹æœ€è¿‘æ›´æ–°æ—¶é—´
- è¯·è®²è§£ä¸‹ gulp-gh-pages çš„ç”¨æ³•ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨é»˜è®¤åˆ†æ”¯ï¼Œ `deploy` ä¸€ç›´å¤±è´¥
  * é»˜è®¤åˆ†æ”¯æ˜¯ gh-pagesï¼Œå¯ä»¥é€šè¿‡ `branch` é€‰é¡¹ä¿®æ”¹
  * å¦‚æœå¤±è´¥å¯ä»¥æä¾›å¤±è´¥çš„ä¿¡æ¯
- è¯·è®²è§£ä¸‹`yarn gulp lint` ä»»åŠ¡
  - ä¸‹ä¸€ä¸ªæ¨¡å—çš„è§„èŒƒåŒ–ä¸­ä¼šä»‹ç»
- å¯¹äºåœ¨ JavaScript ä¸­é€šè¿‡ ES module å¯¼å‡ºï¼Œå¼•å…¥ï¼Œä»è€Œä½¿ç”¨çš„å±æ€§ï¼Œåœ¨ gulpã€grunt å¤„ç† JavaScript ä»£ç çš„ä»»åŠ¡ä¸­å¦‚ä½•å¤„ç†
  * é¦–å…ˆæˆ‘çŒœæµ‹ä½ æƒ³é—®çš„åº”è¯¥æ˜¯ Gulp è¿™ç§å·¥å…·å¦‚ä½•å¤„ç†æ¨¡å—åŒ–æ‰“åŒ…
  * å¦‚æœæ˜¯çš„è¯ï¼Œç»“åˆ Webpack ä½¿ç”¨ï¼Œæˆ–è€…ç›´æ¥æ¢æˆ Webpack
  * å› ä¸ºå¤„ç†æ¨¡å—åŒ–ä»£ç ï¼ŒWebpack æ›´ä¸ºä¸“ä¸šï¼ˆæ¨¡å—åŒ–çš„ä»£ç ä¸ä»…éœ€è¦è½¬æ¢ï¼Œè¿˜éœ€è¦æ‰“åŒ…ï¼‰

### <mark>7ï¼‰å¸Œæœ›è®²è§£ä¸€ä¸‹ lazypipe å’Œå•å…ƒæµ‹è¯•</mark>

* lazypipe å°±æ˜¯ç”¨æ¥å®šä¹‰å¤„ç†ç®¡é“ä»¥ä¾¿äºç±»ä¼¼ä»»åŠ¡çš„é‡ç”¨
* <https://v3.gulpjs.com.cn/docs/recipes/sharing-streams-with-stream-factories/>
* å¦‚æœæœ‰ä¸æ˜ç™½çš„ç§èŠæˆ‘å°±å¥½
* å•å…ƒæµ‹è¯•æˆ‘ä»¬åœ¨ç¬¬ä¸‰é˜¶æ®µçš„ç¬¬ä¸€ä¸ªé¡¹ç›®ä¸­å†åšä»‹ç»ï¼Œå•ç‹¬çœ‹æ²¡æœ‰åœºæ™¯ï¼Œä¼šæ¯”è¾ƒå•è–„ã€‚

### <mark>8ï¼‰å¸Œæœ›åæœŸæœ‰ TypeScript ä»¥åŠ ç¯å¢ƒæ­å»º VS Code é…ç½®çš„ä¸€äº›ç›¸å…³è¯¾ç¨‹ï¼Œç›®å‰åªçŸ¥é“è¯­æ³•ï¼Œå®é™…ç”¨æ—¶åœ¨é…ç½®ä¸Šå°±å¡ä½äº†ã€‚</mark>

å¦‚ä½ æ‰€æ„¿ğŸ˜„ï¼ŒVue.js çš„é¡¹ç›®ä¸­å°±ä¼šæ¶‰åŠåˆ°æ­¤ç±»é—®é¢˜ã€‚

### <mark>9ï¼‰èµ„æºæ„å»ºè¿‡ç¨‹ä¸­æ˜¯ä¸æ˜¯è¿˜éœ€è¦å¯¹èµ„æºè¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œä¸ç„¶è¢«æµè§ˆå™¨ç¼“å­˜äº†ä¿®æ”¹ JS é¡µé¢ä¸èƒ½çœ‹åˆ°æœ€æ–°çš„å†…å®¹ã€‚</mark>

* å¾ˆå¤šå¹´å‰ï¼Œæˆ‘å†™è¿‡ä¸€ä¸ª gulp æ’ä»¶ï¼š<https://github.com/zce/gulp-reversion>
* æ€è·¯å°±æ˜¯åœ¨æ„å»ºå®Œæˆè¿‡åï¼Œè§£æ html ä¸­å¼•ç”¨çš„èµ„æºï¼Œè¯»å–æ–‡ä»¶ `hash`ï¼Œç„¶åæ‹¼æ¥åˆ° `src` å±æ€§åé¢

### <mark>10ï¼‰å¸Œæœ›å¤šåˆ—ä¸¾ä¸€äº›é¡¹ç›®ä¸­å¸¸ç”¨çš„å·¥ç¨‹åŒ–ä»»åŠ¡ï¼Œå½“å‰åªçŸ¥é“ï¼šä»£ç ç¼–è¯‘ã€å‹ç¼©ã€åˆå¹¶ã€å¯åŠ¨æœåŠ¡å™¨ã€å³æ—¶ç¼–è¯‘ã€çƒ­æ›´æ–°ã€‚</mark>

* ä½ æ‰€äº†è§£çš„å°±æ˜¯å¸¸ç”¨çš„è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚
* å®é™…å¼€å‘è¿‡ç¨‹ä¸­é™¤äº†å¸¸ç”¨çš„å†…å®¹ï¼Œè¿˜æœ‰å¾ˆå¤šæ ¹æ®å®é™…ä¸šåŠ¡æˆ–è€…é¡¹ç›®ç±»å‹éœ€è¦çš„ä»»åŠ¡ã€‚
* ç»™ä¸ªå‚è€ƒï¼š<https://github.com/zce/feedback>
* è¿™æ˜¯ä¸€ä¸ª electron é¡¹ç›®ï¼Œåœ¨è¿™ä¸ªé‡Œé¢å°±æ¶‰åŠåˆ°äº†æ€ä¹ˆè‡ªåŠ¨æå–æ•°æ®åŒ…ï¼Œæ€ä¹ˆè‡ªåŠ¨æ‰“åŒ…å¯å‘è¡Œæ–‡ä»¶ã€‚
* ä½†æ˜¯è¿™äº›å¹¶ä¸æ˜¯æ‰€æœ‰ç±»å‹é¡¹ç›®é€šç”¨çš„

### <mark>11ï¼‰ä½¿ç”¨ grunt, gulp æ­å»ºé¡¹ç›®çš„è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹æ—¶ï¼Œæ˜¯å¦æ”¯æŒ`*.vue` æ–‡ä»¶ï¼Œå¦‚æœæ”¯æŒï¼Œè¯¥å¦‚ä½•é…ç½®ã€‚</mark>

é¦–å…ˆï¼Œè¿™ä¸ªéœ€æ±‚æ˜¯å¯ä»¥å®ç°çš„ï¼Œä½†æ˜¯ç›®å‰å¸‚é¢ä¸Šå¹¶æ²¡æœ‰è¿™ç§æ’ä»¶ï¼ˆæˆç†Ÿçš„ï¼‰ã€‚è€Œä¸”ä¹Ÿæ²¡äººè¿™ä¹ˆåšã€‚

å› ä¸ºç›®å‰ `.vue` è¿™ç§å•æ–‡ä»¶ç»„ä»¶å¤§éƒ½ä»¥æ¨¡å—åŒ–çš„æ–¹å¼ç»„ç»‡çš„ï¼Œè€Œ Gulp è¿™ç±»å·¥å…·å®ç°æ„å»ºä»»åŠ¡æ—¶ï¼Œå¹¶ä¸ä¼šç‰¹æ®Šå¤„ç†æ¨¡å—åŒ–çš„ç»„ç»‡ã€‚å¦‚æœåªæ˜¯æŠŠ `.vue` è¿™ç§å•æ–‡ä»¶ç»„ä»¶æ„å»ºä¸ºå•ä¸ªçš„ JS æ–‡ä»¶ï¼Œæ„å»ºåçš„ JS è¿˜æ˜¯é›¶æ•£çš„ã€‚è¿˜æ˜¯éœ€è¦æ¨¡å—åŒ–æ‰“åŒ…ã€‚

æ‰€ä»¥å¯¹äºè¿™ç±»é—®é¢˜æ›´å¥½çš„æ–¹æ¡ˆä»ç„¶æ˜¯åŸºäºæ¨¡å—åŒ–çš„æ‰“åŒ…å·¥å…·ï¼šWebpack / Rollup ä¹‹ç±»ã€‚

> æ­¤æ—¶çš„æˆ‘è¿˜æœªç†è§£æ¨¡å—åŒ–æ‰“åŒ…

### <mark>12ï¼‰æ‹†è§£ä¸€ä¸‹ @vue/cli, create-react-app, @angular/cli å†…éƒ¨å®ç°ã€‚</mark>

è¿™ç±»è„šæ‰‹æ¶å†…éƒ¨ä¸€èˆ¬åˆ†ä¸ºä¸¤å¤§å—ï¼š

* ä¸€å—ç”¨äºç”Ÿæˆé¡¹ç›®åŸºç¡€ç»“æ„æ‰€éœ€è¦çš„æ–‡ä»¶
* å¦ä¸€å—ç”¨äºå°è£…ä¸€ç³»åˆ—æ„å»ºå·¥å…·ï¼ˆWebpack ç­‰ï¼‰
  * å¼€ç®±å³ç”¨
  * åº”å¯¹å˜åŒ–ï¼ˆé…ç½®æ–‡ä»¶æˆ–è€…åŸºç¡€ä»£ç ï¼‰

ä»¥ `@vue/cli` å’Œ `create-react-app` ä¸ºä¾‹ï¼š

* <http://github.com/vuejs/vue-cli>
* <https://github.com/facebook/create-react-app>

`monorepo` -> æŠŠä¸€ç³»åˆ—ç›¸å…³çš„æ¨¡å—å‘æ”¾åˆ°åŒä¸€ä¸ªä»“åº“ä¸­ç»´æŠ¤ï¼Œè¿™ç§ç±»å‹çš„ä»“åº“å°±å«åš `monorepo`

### <mark>13ï¼‰grunt å¦‚ä½•å®ç°æ‰“å¼€æµè§ˆå™¨éšåç›‘å¬ watch ä»»åŠ¡</mark>

<https://www.npmjs.com/package/grunt-browser-sync>

``` js
const sass = require('sass')
const path = require('path')
const loadGruntTasks = require('load-grunt-tasks')
const data = {
  menus: [{
    name: 'Home',
    icon: 'aperture',
    link: 'index.html'
  },
  {
    name: 'Features',
    link: 'features.html'
  },
  {
    name: 'About',
    link: 'about.html'
  },
  {
    name: 'Contact',
    link: '#',
    children: [{
      name: 'Twitter',
      link: 'https://twitter.com/w_zce'
    },
    {
      name: 'About',
      link: 'https://weibo.com/zceme'
    },
    {
      name: 'divider'
    },
    {
      name: 'About',
      link: 'https://github.com/zce'
    }
    ]
  }
  ],
  pkg: require('./package.json'),
  date: new Date()
}
console.log(__dirname)
module.exports = grunt => {
  loadGruntTasks(grunt)
  grunt.initConfig({
    // ç¼–è¯‘ js
    babel: {
      // å®šä¹‰é…ç½®æ–‡ä»¶
      options: {
        presets: ['@babel/preset-env'],
        // å¼€å¯ sourceMap æ–‡ä»¶
        sourceMap: true
      },
      // å®šä¹‰ä¸ªç›®æ ‡
      main: {
        expand: true,
        cwd: 'src',
        src: ['assets/scripts/*.js'],
        dest: 'temp/'
      }
    },
    // ç¼–è¯‘ sass
    sass: {
      options: {
        implementation: sass,
        sourceMap: true
      },
      // å®šä¹‰ä¸ªç›®æ ‡
      main: {
        expand: true,
        cwd: 'src',
        src: ['assets/styles/*.scss'],
        dest: 'temp/',
        ext: '.css'
      }
    },
    watch: {
      scripts: {
        files: ['src/assets/scripts/*.js'],
        tasks: ['eslint', 'babel'],
      },
      scss: {
        files: ['src/assets/styles/*.scss'],
        tasks: ['scsslint', 'sass'],
      },
      pages: {
        files: ['src/**/*.html'],
        tasks: ['swig'],
      },
    },
    clean: {
      dev: ['temp'],
      build: ['dist']
    },
    // å›¾ç‰‡å‹ç¼©
    imagemin: {
      options: {
        optimizationLevel: 7,
        pngquant: true
      },
      main: {
        files: [{
          expand: true,
          src: ['src/assets/images/*.{png,jpg,jpeg,gif,webp,svg}'],
          dest: 'dist/'
        }]
      },
      fonts: {
        files: [{
          expand: true,
          src: ['src/assets/fonts/*.{png,jpg,jpeg,gif,webp,svg}'],
          dest: 'dist/'
        },]
      },
    },
    concat: {
      js: {
        src: [
          'dist/assets/scripts/**/*.js',
          'node_modules/bootstrap/**/*.js'
        ],
        dest: 'dist/assets/scripts/vendor.js'
      },
      css: {
        src: [
          'dist/assets/styles/*.css',
          'node_modules/bootstrap/**/*.css'
        ],
        dest: 'dist/assets/styles/vendor.css'
      }
    },
    copy: {
      fonts: {
        files: [{
          expand: true,
          src: ['src/assets/fonts/*'],
          dest: 'dist/'
        }]
      },
      extra: {
        files: [{
          expand: true,
          cwd: "public",
          src: ['*'],
          dest: 'dist/'
        },]
      },
      build: {
        files: [{
          expand: true,
          cwd: "temp",
          src: ['**/*'],
          dest: 'dist'
        }],
      }
    },
    swig: {
      swig: {
        options: {
          data
        },
        expand: true,
        dest: 'temp/',
        cwd: 'src',
        src: ['*.html'],
        ext: '.html'
      },
    },
    browserSync: {
      bsFiles: {
        src: 'temp/**/*'
      },
      options: {
        watchTask: true,
        notify: false,
        // ç«¯å£
        port: 6001,
        // ä¸é»˜è®¤æ‰“å¼€
        open: false,
        // æœåŠ¡è®¾ç½®
        server: {
          // è¿è¡Œæ–‡ä»¶å¤¹
          baseDir: ['temp', 'src', 'public'],
          // é…ç½®æ˜ å°„ï¼Œroutes é«˜äº baseDir
          routes: {
            // å°† /node_modules æ˜ å°„åˆ°å·¥ç¨‹ä¸‹çš„ node_modules
            '/node_modules': 'node_modules'
          },
          keepalive: false
        }
      }
    },
    eslint: {
      target: ['src/assets/scripts/*.js']
    },
    scsslint: {
      allFiles: [
        'src/assets/styles/*.scss',
      ],
      options: {
        bundleExec: true,
        colorizeOutput: true
      },
    },
    useref: {
      html: 'dist/**/*.html',
      temp: 'dist'
    }
  })
  grunt.registerTask('build', ['clean:build', 'copy:build', 'useref', 'babel', 'concat', 'uglify', 'cssmin'])
  grunt.registerTask('compile', ['babel', 'sass', 'swig'])
  grunt.registerTask('server', ['browserSync', 'watch'])
  grunt.registerTask('start', ['clean:dev', 'compile', 'server'])
  grunt.registerTask('lint', ['eslint', 'scsslint'])
  // å¦‚æœä»»åŠ¡åç§°ä¸º default é‚£ä¹ˆ yarn grunt ä¼šé»˜è®¤æ‰§è¡Œ
  // grunt.registerTask('start', ['babel', 'copy', 'imagemin','swig'])
  // grunt.registerTask('build', ['babel', 'copy', 'imagemin','swig'])
}
```

### <mark>14ï¼‰è‡ªåŠ¨åŒ–éƒ¨ç½²æ€ä¹ˆå®ç°ï¼Ÿ</mark>

è‡ªåŠ¨åŒ–éƒ¨ç½²åœ¨åæœŸçš„é¡¹ç›®é‡Œé¢ä¼šå•ç‹¬ä»‹ç»ï¼ŒåŒ…æ‹¬ä¸åŒç§ç±»çš„é¡¹ç›®å¦‚ä½•éƒ¨ç½²ã€‚

è¿™é‡Œä»‹ç»ä¸€ä¸ª gh-pages çš„æ’ä»¶ï¼Œå¯ä»¥ç”¨æ¥éƒ¨ç½²é™æ€ç½‘é¡µç±»çš„åº”ç”¨ã€‚

``` js
const deploy = () => {
  return gulp.src('**', { cwd: config.dest })
    .pipe($.ghPages({
      cacheDir: `${config.temp}/publish`,
      branch: 'gh-pages'
    }))
}
```

ç°é˜¶æ®µå¾ˆå¤šæ—¶å€™ä¸ä¼šåœ¨æ„å»ºä»»åŠ¡ä¸­å®šä¹‰éƒ¨ç½²ä»»åŠ¡ï¼Œè€Œæ˜¯ç»“åˆåˆ° CI çš„å·¥ä½œæµé‡Œé¢å»ã€‚

![CI](assets/img/2021-11-06-00-25-23.png)

``` groovy
pipeline {
  agent any
  stages {
    stage('æ£€å‡º') {
      steps {
        checkout([
          $class: 'GitSCM',
          branches: [[name: env.GIT_BUILD_REF]],
          userRemoteConfigs: [[
            url: env.GIT_REPO_URL,
            credentialsId: env.CREDENTIALS_ID
          ]]
        ])
      }
    }
    stage('å®‰è£…') {
      steps {
        sh 'yarn install'
      }
    }
    stage('æ„å»º') {
      steps {
        sh 'yarn build --production'
      }
    }
    stage('éƒ¨ç½²') {
      steps {
        sh 'npx gh-pages -d dist'
      }
    }
  }
}
```

### <mark>15ï¼‰æ„å»ºç›‘å¬æ–‡ä»¶å˜åŒ–æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿäº‹ä»¶å›è°ƒè¿˜æ˜¯è½®è¯¢æ£€æŸ¥ï¼Ÿ</mark>

Node.js `fs.watch` or `fs.watchFile`

<https://www.npmjs.com/package/chokidar>

### <mark>16ï¼‰æˆ‘æ˜¯ 18 å¹´å¼€å§‹åšå‰ç«¯ï¼Œä¸€è¿›æ¥å°±æ˜¯å‰åç«¯åˆ†ç¦»ï¼Œwebpackã€‚å¯¹ gruntï¼Œgulp ç­‰è¿™äº›å·¥å…·ä½¿ç”¨åœºæ™¯ä¸å¤ªç†Ÿï¼Œèƒ½ä¸èƒ½æŒ‰æ—¶é—´è¯¦ç»†è®²è®²å‰ç«¯å¼€å‘ï¼Œæ‰“åŒ…å‘å¸ƒæ¼”å˜å†å²</mark>

ä¸»è¦ä»£è¡¨æ—¶ä»£ï¼š

åŠ¨æ€ç½‘é¡µï¼šASPã€PHPã€JSP æ—¶ä»£ï¼›å‰ç«¯æ‰€æœ‰çš„èµ„æºæ¥æºäºåç«¯åº”ç”¨çš„æ‰§è¡Œç»“æœï¼Œè¿™ç§çŠ¶æ€ä¸‹ï¼Œå‰ç«¯æ˜¯åç«¯çš„é™„å±å“ï¼Œä¹Ÿæ˜¯è¢«é©±åŠ¨çš„ï¼Œæ²¡æœ‰å¤ªå¤§çš„å‘æŒ¥ç©ºé—´ï¼›è€Œä¸”ä¸šåŠ¡ä¸Šçš„è¦æ±‚ä¹Ÿä¸ä¼šç‰¹åˆ«å¤æ‚ã€‚è¯´ç™½äº†ï¼Œå‰ç«¯ä»£ç ä¸ä¼šç‰¹åˆ«å¤æ‚ã€‚

ä¸€å¥è¯æ€»ç»“ï¼šä¸šåŠ¡ä¸Šçš„é—®é¢˜è¶Šæ¥è¶Šå¤šï¼Œè¡¨è±¡ä¸Šè¶Šæ¥è¶Šç®€å•ï¼Œé»‘ç›’å­è¶Šæ¥è¶Šå¤§

### <mark>17ï¼‰å·¥ç¨‹åŒ–è§†é¢‘é‡Œè®²äº†åœ¨ç›®æ ‡è·¯å¾„ä¸‹ç”Ÿæˆè‡ªå·±çš„æ¨¡æ¿è„šæ‰‹æ¶ï¼Œå¦‚æœæˆ‘æƒ³åœ¨ç›®æ ‡ç›®å½•ä¸‹è¿è¡Œè‡ªå®šä¹‰å‘½ä»¤ï¼Œæ¯”å¦‚è¿è¡Œä¸€æ®µè‡ªå®šä¹‰å‘½ä»¤ï¼Œåœ¨ç›®æ ‡ç›®å½•ä¸‹ç›´æ¥ä¸‹è½½ä¾èµ–å’Œå¯åŠ¨é¡¹ç›®ï¼Œå¦‚ä½•å®ç°ï¼Ÿ</mark>

npm æ¨¡å—ï¼š<https://www.npmjs.com/package/execa>

åŸç”Ÿ APIï¼š<https://nodejs.org/dist/latest/docs/api/child_process.html#child_process_child_process_spawn_command_args_options>

### <mark>18ï¼‰è‡ªå·±å°è£…è„šæ‰‹æ¶å’Œ npm å‘½ä»¤è¡Œå·¥å…·é‚£é‡Œæœ‰ç‚¹è¿‡äºç®€å•äº†ï¼Œèƒ½ä¸èƒ½å†åšä¸€äº›æ‹“å±•ï¼Ÿ</mark>

å¯ä»¥å…ˆå‚è€ƒï¼š<https://github.com/zce/caz>

### <mark>19ï¼‰æœ¬åœ° æµ‹è¯• ç”Ÿäº§ç¯å¢ƒæ¥å£åœ°å€é…ç½®ï¼Œæ€ä¹ˆé€šè¿‡å†™é…ç½®æ–‡ä»¶æ–¹å¼æ‰“åŒ…ï¼Œåƒ Webpack ä¸€æ ·</mark>

- <https://www.npmjs.com/package/gulp-replace>
- <https://www.npmjs.com/package/gulp-env-vars>


## â˜…å¤§æ–¹å‘çš„é—®é¢˜

### <mark>1ï¼‰Yeoman ä¹‹ç±»çš„å·¥å…·åˆ°åº•æœ‰å•¥ç”¨ï¼Ÿ</mark>

ğŸ’¡ï¼šä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰è„šæ‰‹æ¶ï¼Ÿ

ä¸»æµè„šæ‰‹æ¶é€‚åˆä»€ä¹ˆï¼Œå…¶ç¼ºç‚¹åˆæ˜¯ä»€ä¹ˆï¼š

1. vue-cli æˆ–è€… create-react-app åˆ›å»ºå‡ºæ¥çš„éƒ½æ˜¯é€‚ç”¨äºç»å¤§éƒ¨åˆ†é¡¹ç›®çš„åŸºç¡€ç»“æ„ï¼Œæ‰€ä»¥ç”Ÿæˆçš„ç»“æ„å¾€å¾€æ˜¯æç®€çš„
   1. åªæ˜¯é’ˆå¯¹ç‰¹å®šæ¡†æ¶ç±»å‹çš„é¡¹ç›®
   2. å¯¹äºå®é™…ä¸šåŠ¡é¡¹ç›®å¼€å‘æ¥è¯´ï¼Œç”Ÿæˆçš„é¡¹ç›®ç»“æ„è¿‡äºç®€å•
2. è€Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬åœ¨åŒä¸€ä¸ªå…¬å¸çš„ä¸åŒé¡¹ç›®ä¸­è¿˜æœ‰å¾ˆå¤šåŸºç¡€è®¾æ–½éƒ½æ˜¯ç›¸åŒçš„ï¼Œä¾‹å¦‚ axios çš„åŒ…è£…ã€è·¯ç”±é‰´æƒç­‰ï¼Œæ‰€ä»¥ä¹Ÿåº”è¯¥æ”¾è¿›è„šæ‰‹æ¶æ¨¡ç‰ˆä¸­ -> ä¸¤ä¸ªç±»ä¼¼çš„æ•™è‚²åå°ç®¡ç†ç³»ç»Ÿ
3. è¿™ç§æƒ…å†µä¸‹ï¼Œå¾ˆå¤šå…¬å¸æˆ–å›¢é˜Ÿå°±ä¼šé€‰æ‹©å¼€å‘è‡ªå·±çš„è„šæ‰‹æ¶å·¥å…·ï¼Œä»¥ç¬¦åˆè‡ªèº«éœ€è¦

ğŸ’¡ï¼šä½¿ç”¨ Yeoman å¯ä»¥å¹²å˜›ï¼Ÿ

- åŸºäº Yeoman å†™ Generator
  - yeoman æ˜¯ä¸€ä¸ªè„šæ‰‹æ¶å¹³å° -> è‡ªå·±å¼„ä¸ªä¸€ä¸ª my-vue-generator å‡ºæ¥ -> ä¸€èˆ¬éƒ½ä¼šè®© vue-cli ç”Ÿæˆä¸€ä¸ªåŸºç¡€çš„æ¨¡æ¿ï¼Œç„¶åè‡ªå·±åœ¨è¿™ä¸ªæ¨¡æ¿åŸºç¡€ä¸Šå»æ·»åŠ é€‚åˆå…¬å¸ä¸šåŠ¡çš„æ¨¡æ¿
- è‡ªå·±é€ è½®å­
  - Metalsmith -> è‡ªå·±å†™è„šæ‰‹æ¶éå¸¸å¸¸è§çš„ä¸€ä¸ªåº“ -> é™¤äº†å¸®æˆ‘ä»¬åšè„šæ‰‹æ¶ï¼Œè¿˜å¯ä»¥åšé™æ€é¡µé¢ç«™ç‚¹ç”Ÿæˆå™¨

ğŸ’¡ï¼šä¸€ä¸ªç–‘é—®ï¼Œä¸¤ä¸ªé¡¹ç›®ç”¨äº† xxx è„šæ‰‹æ¶ï¼Œxxx è„šæ‰‹æ¶æ›´æ–°äº†ï¼Œè¿™ä¸¤ä¸ªé¡¹ç›®èƒ½åŒæ­¥æ›´æ–°å—ï¼Ÿ -> ä¸èƒ½åŒæ­¥æ›´æ–°ï¼Œè¿™æ˜¯ Generator çš„å¼Šç«¯

æ—©æœŸçš„ vue-cli 2.x æ˜¯ä¸èƒ½çš„ -> vue-cli 3.x ä¼šæŠŠé‚£äº›ä¸œè¥¿æå–åˆ°ä¸€ä¸ªå…¬å…±çš„æ¨¡å—å½“ä¸­ -> è®©é¡¹ç›®ç›´æ¥ä½¿ç”¨è¿™ä¸ªé»‘ç›’å·¥å…·â€”â€”`vue-cli-service` -> è¿™ä¸ªé»‘ç›’é‡Œè¾¹å®é™…ä¸Šå°±æŠŠ Webpack é‚£äº›ä¸œè¥¿ç»™åŒ…è£¹è¿›å»äº† -> åæœŸé¡¹ç›®çš„åŸºç¡€å®æ–½å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£å°±å»æ›´æ–°ä¸€ä¸‹ç°æœ‰çš„è¿™ä¸ª`vue-cli-service`æ¨¡å—å°±å¥½äº†

æ€»ä¹‹ï¼Œåœ¨æè„šæ‰‹æ¶çš„æ—¶å€™ï¼Œä¸è¦æŠŠæ–‡ä»¶éƒ½æ”¾åœ¨é¡¹ç›®çš„æ¨¡æ¿é‡Œè¾¹ï¼Œè€Œæ˜¯å®ƒä»¬å†™æˆä¸€ä¸ªä¸ªçš„æ¨¡å—ï¼Œç„¶ååœ¨ä¸åŒçš„é¡¹ç›®ä¸­å»å¼•ç”¨è¿™äº›æ¨¡å— -> è¿™æ¶‰åŠåˆ°å…¬å…±ä»£ç ç»´æŠ¤çš„é—®é¢˜

> vue-cli æ²¡æœ‰ç”¨åˆ° Yeomanï¼Œå°±æ˜¯çº¯æ‰‹å·¥åˆ¶ä½œ

---

Yeoman çœŸå¾—æ²¡æœ‰ç”¨å—ï¼Ÿæ˜¾ç„¶ï¼Œè¿™å¹¶ä¸æ˜¯ -> ä½ å¾—æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µå»äº†è§£ -> ä½ è¦åˆ›å»ºä¸€ä¸ªé€šç”¨å‹çš„ Vue æˆ– React é¡¹ç›®ï¼Œé‚£ä½ å°±ç”¨å®˜æ–¹æä¾›ç»™ä½ çš„è„šæ‰‹æ¶å·¥å…·å‘—ï¼ -> å¦‚æœä½ è¦åœ¨åŸºäºå®˜æ–¹çš„æ¨¡æ¿ä¹‹ä¸Šå»åšä¸€äº›ä¿®æ”¹ï¼Œç„¶ååç»­ä¸æ–­åœ°å»ä½¿ç”¨è¿™ä¸ªä¿®æ”¹è¿‡åçš„æ¨¡æ¿çš„è¯ï¼Œè¿™ä¸ªæ—¶å€™å»ºè®®ä½ ä½¿ç”¨ Yeomanï¼Œæˆ–è€…ç”¨è‡ªå·±é€ è½®å­çš„æ–¹å¼å»å®šä¹‰æ¶æ‰‹æ¶å·¥å…·

æŒæ¡å¼€å‘è„šæ‰‹æ¶è¿™ç§å·¥å…·çš„èƒ½åŠ› -> å…¶æ ¸å¿ƒè¿˜æ˜¯åœ¨äºå¦‚ä½•ä½¿ç”¨ Node å»è§£å†³ä½ åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­æ‰€é‡åˆ°çš„è¿™äº›é—®é¢˜ -> é‡ç‚¹ä¸åœ¨äºæŸä¸ªå·¥å…·æœ¬èº«ï¼Œè€Œæ˜¯åœ¨äºé€šè¿‡å¼€å‘æŸä¸ªå·¥å…·çš„è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹å»ä½“ä¼šåˆ° Node å¯¹äºå‰ç«¯å¼€å‘çš„é‡è¦æ€§ï¼

---

ğŸ’¡ï¼šæˆ‘ç”¨ Node åŸç”Ÿå§¿åŠ¿å¼€å‘ä¸€ä¸ªè„šæ‰‹æ¶ï¼Œè¿™æ¯”ç”¨ Yeoman å»å¼€å‘ä¼šæ›´æœ‰ä¼˜åŠ¿å—ï¼Ÿ

æ˜¾ç„¶ï¼ŒYeoman æ›´æœ‰ä¼˜åŠ¿ -> Yeoman ç›¸å½“äºè„šæ‰‹æ¶æ¡†æ¶ï¼Œç”¨ Yeoman å»å¼€å‘ï¼Œæ˜¾ç„¶è¦æ¯”è‡ªå·±ç”¨åŸç”Ÿå»å¼€å‘æ›´ç®€ä¾¿ï¼

åŸç”Ÿå†™å¾—ä¸€å¤§å †ä»£ç ï¼Œç”¨ Yeoman å†™ä¸ç”¨å†™é‚£ä¹ˆå¤šï¼

ç”¨ Vue å¼€å‘ï¼Œå’Œç”¨åŸç”Ÿ JS å»å¼€å‘ä¸€ä¸ªå¤§å‹åº”ç”¨ï¼Œæ˜¾ç„¶ç”¨ Vue è¦æ›´æ–¹ä¾¿ï¼

ğŸ’¡ï¼šè„šæ‰‹æ¶æ¨¡æ¿æŒ‰ç†è¯´ï¼Œåº”è¯¥æ˜¯ä»“åº“ä¸­å»æ‹‰å–ï¼Œè€Œæˆ‘ä»¬å­¦ä¹ çš„å†…å®¹æ˜¯æŠŠæ¨¡æ¿æ”¾åˆ°æ¨¡å—é‡Œè¾¹å»äº†ï¼

### <mark>2ï¼‰Gulp vs. Webpack</mark>

ğŸ’¡ï¼šä¸€ä¸ªå›°æƒ‘ï¼šæ„Ÿè§‰ Gulp èƒ½å¹²çš„äº‹å„¿ï¼ŒWebpack éƒ½èƒ½å¹²ï¼Ÿ

è¿™å¥è¯ä¸ä¸¥è°¨ï¼Œå› ä¸ºï¼š

Gulp æœ¬èº«å®é™…ä¸Šå°±ä¸å…·å¤‡ä»»ä½•å…·ä½“åŠŸèƒ½ -> Gulp å•¥äº‹éƒ½å¹²ä¸äº† -> å°±æä¾›äº†`watch`ç­‰è¿™å‡ ä¸ª API -> è¿™å‡ ä¸ª API çš„ä½œç”¨å¤§éƒ½æ˜¯åˆ›å»ºæ˜¯ä»€ä¹ˆæ–‡ä»¶æµã€è¯»å–æµã€å†™å…¥æµä¹‹ç±»çš„ -> å®ƒåªæ˜¯ä¸€ä¸ª**ä»»åŠ¡æ‰§è¡Œå·¥å…·**ï¼Œæˆ–è€…è¯´æ˜¯**ä»»åŠ¡è°ƒåº¦**ï¼ˆtasks runnerï¼‰ -> è¯´ç™½äº†ä½ ä¸æä¾›ä»»åŠ¡ç»™å®ƒï¼Œé‚£å®ƒå°±æ¯«æ— ç”¨å¤„ï¼Œå°±åƒå¤§è´§è½¦ï¼Œä½ ä¸ç»™å®ƒè´§ç‰©ï¼Œé‚£è¿™å¤§è´§è½¦ç›¸å½“äºæ²¡æœ‰åŠŸèƒ½ï¼

å®ƒä½œä¸ºä¸€ä¸ªä»»åŠ¡è°ƒåº¦å·¥å…·æ¥è®²çš„è¯ -> éœ€è¦é…åˆä¸€ç³»åˆ—æ’ä»¶æˆ–è€…è‡ªå·±ç”¨ä»£ç å®ç°å„ç§å„æ ·çš„åŠŸèƒ½ï¼ˆä»£ç åˆå¹¶ã€å‹ç¼©ã€ç¼–è¯‘ã€æ„å»ºç­‰ï¼‰ -> å®ƒä¸å…·å¤‡ä»»åŠ¡åŠŸèƒ½ï¼Œä½†æ¢ä¸ªè§’åº¦è€Œè¨€ï¼Œå®ƒå°±æ˜¯å®Œå…¨è‡ªä¸»çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æƒ³æ³•ç‰›é€¼ï¼Œä½ æƒ³å®ç°å•¥åŠŸèƒ½éƒ½è¡Œ

Gulp å°±æ˜¯å®Œå…¨è‡ªä¸»çš„ï¼Œä½ æƒ³è¦ä»€ä¹ˆåŠŸèƒ½ï¼Œé‚£å°±ç”¨ä»£ç å»å®ç°ä»€ä¹ˆåŠŸèƒ½ -> è‡ªå®šä¹‰æ€§æ¯”è¾ƒå¼º

è€Œ Webpack -> ç›®å‰å‰ç«¯æ¯”è¾ƒæµè¡Œçš„å¼€å‘èŒƒå¼ï¼Œä¹Ÿå°±æ˜¯æ¨¡å—åŒ– -> Webpack å°±æ˜¯ä»æ¨¡å—æ‰“åŒ…çš„è§’åº¦å‡ºå‘ï¼Œä»è€Œå®ç°å¯¹æ•´ä¸ªå‰ç«¯åº”ç”¨çš„æ„å»º -> å®ƒé‡Œè¾¹æœ‰ä¸ªæ¦‚å¿µå°±æ˜¯ã€ŒæŠŠå‰ç«¯é‡Œè¾¹æ‰€æœ‰çš„èµ„æºéƒ½å½“ä½œæ˜¯æ¨¡å—æ¥å¤„ç†ã€ -> ä»¥ JS ä½œä¸ºä¸€ä¸ªçº¿ç´¢ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªå…¥å£æ¥æŠŠæ‰€æœ‰èµ„æºéƒ½æ‰“åŒ…åˆ°ä¸€èµ· -> åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡æ’è¿›ã€loader ç­‰è¿™æ ·ä¸€äº›ç‰¹æ€§ç„¶åå»å®ç°æ•´ä¸ªé¡¹ç›®çš„æ„å»º -> åœ¨è¿™ä¸ªè¿‡ç¨‹å½“ä¸­ï¼Œæ’ä»¶ä¼šå®ç°ä¸€éƒ¨åˆ† Web é¡¹ç›®å½“ä¸­çš„ä¸€äº›è‡ªåŠ¨åŒ–ä»»åŠ¡

ç”±äº Webpack çš„ç”Ÿæ€ç‰¹åˆ«ç¹è£ï¼Œç„¶åå®ƒé‡Œè¾¹å°±æœ‰äº†å„ç§å„æ ·çš„æ’ä»¶ -> è¿™å°±ä¼šè®©ä½ æ„Ÿåˆ°ã€Œä»¥å¾€ç”¨ Gulp èƒ½åšçš„äº‹å„¿ï¼Œç°åœ¨ç”¨ Webpack ä¹Ÿèƒ½åšã€ -> å½“ç„¶ï¼Œæ›´ä¸¥è°¨ã€æ›´åˆç†çš„è¯´æ³•æ˜¯ã€Œ**ä»¥å¾€æˆ‘ä»¬ä½¿ç”¨ Gulp å»å®ç°çš„è‡ªåŠ¨åŒ–å·¥ä½œï¼Œç°åœ¨éƒ½å¯ä»¥ä½¿ç”¨ Webpack å®ç°**ã€ï¼Œä¹Ÿå°±æ˜¯è¯´åƒæ‰“åŒ…ã€åˆå¹¶ã€å‹ç¼©è¿™äº›äº‹å„¿ï¼Œç”¨ Webpack ä¹Ÿèƒ½å»å®ç°ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹‹å‰å·²ç»è¯´äº† Gulp æ˜¯å®Œå…¨è‡ªä¸»çš„ï¼ŒGulp èƒ½å¹²å¤šå¤§çš„äº‹å„¿ï¼Œå®Œå…¨å–å†³äºä½ çš„æƒ³è±¡åŠ›ã€ä½ çš„ä»»åŠ¡ä»£ç æ˜¯æ€æ ·å»å†™çš„ï¼Œè€Œ Webpack å®é™…ä¸Šæ˜¯æ²¡æœ‰è¿™ä¸ªè‡ªä¸»æ€§çš„ -> Webpack å®ƒæ˜¯ä¸€ç§è§„åˆ™æ€§çš„ï¼Œå®ƒé€šè¿‡é…ç½®çš„æ–¹å¼å»å®ç° -> ä¸€ä¸ªé…ç½®å‹é€‰æ‰‹å’Œä¸€ä¸ªé‡ç”Ÿå‹é€‰æ‰‹ï¼ˆ**ç¬¼å­é‡Œå…»çš„é¸¡ vs é‡ç”Ÿæœå›­é¸¡**ï¼‰ï¼Œæ˜¾ç„¶ Gulp è¿™ä¸ªé‡ç”Ÿå‹çš„èƒ½åŠ›èŒƒå›´è¦æ›´å®½å¹¿ä¸€äº› -> æ‰€ä»¥æœ€ç»ˆè¯´æ³•æ˜¯ã€Œ**ä»¥å¾€æˆ‘ä»¬ä½¿ç”¨ Gulp å»å®ç°çš„å¸¸æœ‰è‡ªåŠ¨åŒ–å·¥ä½œï¼Œç°åœ¨éƒ½å¯ä»¥ä½¿ç”¨ Webpack å®ç°**ã€ -> å¸¸ç”¨çš„æœ‰ JS/CSS ç¼–è¯‘ã€æ ·å¼æ–‡ä»¶æ‰“åŒ…ã€JS æ–‡ä»¶æ‰“åŒ…ã€å›¾ç‰‡å‹ç¼©ã€èµ„æºæ›¿æ¢ç­‰ä¸€ç³»åˆ—çš„äº‹æƒ…ï¼Œåœ¨ç°é˜¶æ®µï¼ŒWebpack éƒ½æœ‰å¯¹åº”çš„æ’ä»¶ï¼Œè€Œä¸”è¿™äº›æ’ä»¶çš„ä½¿ç”¨äººæ•°ä¹Ÿæ¯”è¾ƒå¤šï¼Œæ‰€ä»¥ä¹Ÿä¼šæœ‰å¾ˆå¤šäººå»æŒç»­ç»´æŠ¤è¿™äº›æ’ä»¶

å› ä¸ºè¿™æ ·ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æ„Ÿè§‰åˆ°ã€Œ**æˆ‘ä»¬å¯ä»¥å¿˜æ‰ Gulp äº†**ã€ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªæ„Ÿè§‰å¹¶ä¸æ˜¯ç»å¯¹çš„

ğŸ’¡ï¼šå¾ˆå¤šå¼€å‘è€…æŠŠ Gulp å’Œ Webpack æ”¾åœ¨ä¸€å—æ¥å¯¹æ¯”çš„åŸå› ï¼Ÿ

æ ¸å¿ƒåŸå› ï¼š

- Gulp å®šä½æ¸…æ™°
- Webpack åˆ™ä¸æ˜¯ï¼Œå®ƒçš„å®šä½æ…¢æ…¢åœ°å°±è¶Šæ¥è¶Šä¸æ¸…æ™°äº†

Webpack æœ€æ—©å°±æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œä½†å‘å±•åˆ°ç°åœ¨ï¼Œå®ƒåŸºæœ¬ä¸Šå¯ä»¥å®ç°å‰ç«¯å·¥ç¨‹åŒ–é‡Œè¾¹ç»å¤§å¤šæ•°çš„å·¥ä½œäº† -> æ‰€ä»¥ Webpack å®ƒä¸€ç›´åœ¨çªç ´è‡ªå·±çš„è¾¹ç•Œï¼Œé‚£è¿™å°±ä¼šå¯¼è‡´ -> è®©äººæ„Ÿè§‰ Webpack æœ‰ç‚¹è¸©è¿‡ç•Œäº†ï¼ -> å°±åƒèµ·åˆçš„è…¾è®¯ QQï¼Œä¹‹ååˆæœ‰äº†è…¾è®¯æ¸¸æˆä¹‹ç±»çš„ã€å°ç±³åšæ‰‹æœºï¼Œä¹‹ååšç©ºè°ƒç­‰ç”µå™¨ä¹‹ç±»çš„

å½“ç„¶ï¼Œè¿™ä¸ªå…¶å®ä¹Ÿä¸æ˜¯åäº‹å“ˆï¼ -> å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œå¦‚æœçœŸå¾—æœ‰ä¸€ä¸ªå·¥å…·å¯ä»¥è§£å†³æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­æ‰€æœ‰çš„é—®é¢˜çš„è¯ï¼Œé‚£æˆ‘ä»¬è‚¯å®šæ˜¯æ„¿æ„ä½¿ç”¨è¿™æ ·çš„å·¥å…·çš„ -> è€Œä¸”è¿™ä¼šè®©æˆ‘ä»¬æŠ•å…¥çš„å­¦ä¹ æˆæœ¬ã€æ—¶é—´æˆæœ¬éƒ½ä¼šå¤§å¤§çš„é™ä½ -> ä½†æ˜¯ï¼Œç°åœ¨è¿™ä¸ªäº‹å®æƒ…å†µæ˜¯ï¼Œ**Webpack å®ƒæœ¬èº«è¿˜æ˜¯å›´ç»•ç€æ¨¡å—æ‰“åŒ…è¿™ä¸€ç‚¹**ï¼

ğŸ’¡ï¼šGulp å®é™…ä¸Šåˆ°åº•æœ‰æ²¡æœ‰åº”ç”¨åœºæ™¯å‘¢ï¼Ÿ

æˆ‘ä»¬ä¸¾ä¸€äº›ä¾‹å­ï¼Œçœ‹äº†è¿™äº›ä¾‹å­ï¼Œä½ å°±ä¼šæ˜ç™½ç”¨ Gulp ç¡®å®æ›´åˆç†ä¸€ç‚¹

ç¬¬ä¸€ç‚¹ï¼Œä¼ ç»Ÿçš„é™æ€é¡µé¢å¼€å‘

å¦‚æˆ‘ä»¬ä¹‹å‰çš„`zce-pages-demo`ï¼Œé‡Œè¾¹æœ‰ä¸€äº›é™æ€é¡µçš„æ¨¡æ¿ -> è¿˜æ˜¯æœ‰å¾ˆå¤šä¼ ç»Ÿçš„ Web é¡¹ç›®çš„ï¼Œè¿™äº›é™æ€é¡µçš„æ¨¡æ¿éƒ½ä¼šäº¤ç»™åç«¯å»å¥—æ•°æ®ç„¶åå»å·¥ä½œ -> æˆ‘ä»¬å»å¼€å‘é™æ€é¡µçš„æ—¶å€™ -> è‚¯å®šä¼šæ¶‰åŠåˆ°é¡µé¢å…¬å…±éƒ¨åˆ†çš„æŠ½ç¦»ã€æ ·å¼å’Œè„šæœ¬è¿™äº›æ–‡ä»¶çš„ç»„ç»‡æ–¹å¼ã€ä»¥åŠåˆå¹¶ã€å‹ç¼©ç­‰ä¸€ç³»åˆ—ä¸œè¥¿ -> æ€»ä¹‹ï¼Œ**æ³¨é‡é¡µé¢ç»“æ„ä¸æ ·å¼è¿™ç§æƒ…å†µï¼Œå»ºè®®é‡‡ç”¨ Gulp** -> è¿™å±äºå¤šé¡µåº”ç”¨è¿™ç§æƒ…å†µ -> æˆ‘ä»¬ä½¿ç”¨ Webpack çš„é¡¹ç›®ï¼Œä¼¼ä¹éƒ½æ˜¯ä»¥ Vueã€Reactã€Angular è¿™ç§å•é¡µé©±åŠ¨æ¡†æ¶åœ¨å»ç”¨ï¼è€Œå¯¹äºå¤šé¡µåº”ç”¨ï¼Œå¾ˆå°‘ä¼šä½¿ç”¨åˆ° Webpackï¼Œå› ä¸º Webpack å¹¶ä¸æ˜¯å¾ˆæ“…é•¿å•Šï¼æ¯•ç«Ÿå®ƒæœ¬èº«çš„æ¦‚å¿µï¼Œå°±æ˜¯ä»¥ä¸€ä¸ª JS ä½œä¸ºå…¥å£ï¼Œç„¶åæŠŠä¸€ç³»åˆ—æ‰€æœ‰çš„ä¸œè¥¿éƒ½æ‰“åŒ…åˆ°ä¸€èµ· -> ä½ ä»”ç»†æƒ³æƒ³ï¼Œå¦‚æœä¸€ä¸ªé¡¹ç›®æœ‰ 100 ä¸ªï¼Œç”šè‡³ 1000 ä¸ªé¡µé¢ï¼Œæ­¤æ—¶å¦‚æœæŒ‰ç…§ä¸€ä¸ªé¡µé¢å¯¹åº”ä¸€ç§å…¥å£è¿™ç§æ–¹å¼çš„è¯ï¼Œé‚£è¿™ç§ Webpack æ„å»ºå®é™…ä¸Šæ˜¯ä¸å¤ªåˆç†çš„ï¼ -> å½“ç„¶ï¼Œè¿™ä¸æ˜¯ç»å¯¹çš„ï¼Œè¿™æ˜¯ç›¸å¯¹è€Œè¨€çš„ï¼ŒGulp æå¤šé¡µåº”ç”¨æ›´é¦™ï¼Œé‚£å°± Gulp å‘—ï¼Webpack ä¹Ÿèƒ½ç”¨ï¼Œä½†ç”¨èµ·æ¥å¹¶ä¸æ˜¯é‚£ä¹ˆé¦™ï¼

---

ç¬¬äºŒç‚¹ï¼Œå¼€å‘ä¸€ä¸ªå°ç¨‹åºé¡¹ç›®

åšåŸç”Ÿå°ç¨‹åºå¼€å‘ï¼ˆä¸ç”¨ Taroã€Uniapp ç­‰æ¡†æ¶ï¼Œç”¨ç®€å•çš„æ™®é€šçš„å°ç¨‹åºæ¡†æ¶ï¼‰æ—¶ï¼Œè¦æ±‚æˆ‘ä»¬æ¯ä¸ªé¡µé¢éƒ½å¾—æœ‰å››ä¸ªæ–‡ä»¶ -> é¡µé¢ç»“æ„ã€æ ·å¼ã€è„šæœ¬ã€é¡µé¢é…ç½®æ–‡ä»¶ -> è¿™äº›æ–‡ä»¶éƒ½æ˜¯å›ºå®šçš„ç»“æ„ -> å¯¹äºå¼€å‘è€Œè¨€ï¼Œæˆ‘ä»¬ä¸éœ€è¦æŠŠå®ƒä»¬éƒ½æ‰“åŒ…åˆ°ä¸€èµ· -> è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœä½ æƒ³ç”¨ Sass/Less è¿™ç§é¢„ç¼–è¯‘æ ·å¼è„šæœ¬çš„è¯ï¼Œæ­¤æ—¶ï¼Œç”¨ Gulp æ˜¾ç„¶æ›´åˆé€‚ä¸€ç‚¹ -> å› ä¸ºä½ ç”¨ Webpack çš„è¯ï¼Œå®ƒä¼šæŠŠæ‰€æœ‰çš„ Sass æ–‡ä»¶æœ€ç»ˆæ‰“åŒ…åˆ°ä¸€èµ·ï¼Œç„¶è€Œï¼Œå¯¹äºå°ç¨‹åºè€Œè¨€ï¼Œå®ƒä¸éœ€è¦ Webpack è¿™æ ·åšï¼Œæ‰€ä»¥ç”¨ Webpack å°±ä¸å¤ªåˆé€‚äº†ï¼

æ€»ä¹‹ï¼Œå»ºè®®ç”¨ Gulp -> æŠŠé¡¹ç›®åˆ†ä¸º`src`å’Œ`dist` -> `dist`é‡Œè¾¹å°±æ˜¯æˆ‘ä»¬æœ€ç»ˆç¼–è¯‘è¿‡åï¼Œå¯ä»¥ç›´æ¥åœ¨å°ç¨‹åºå½“ä¸­ç›´æ¥å»å·¥ä½œçš„ç»“æœ -> `src`ä¸‹å°±æŒ‰ç…§ Sass/Less è¿™ç§å§¿åŠ¿å»ç¼–å†™æ ·å¼å°±å¥½äº†

å½“ç„¶ï¼Œé™¤äº†æ ·å¼ä»¥å¤– -> ä½ æƒ³ç”¨ ES7/8 ç­‰è¿™æ ·çš„æ–°ç‰¹æ€§ï¼Œå®é™…ä¸Šä¹Ÿå¯ä»¥å€ŸåŠ© Gulp çš„ç¼–è¯‘æ“ä½œå»åš

å…¶å®ï¼ŒGulp è·Ÿ Webpack æ ¹æœ¬å°±ä¸å…·å¤‡å¯æ¯”æ€§ï¼Œå› ä¸ºä¸€ä¸ªæ˜¯ä»»åŠ¡è°ƒåº¦å·¥å…·ï¼Œä¸€ä¸ªåˆ™æ˜¯æ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå®ƒä»¬æ ¹æœ¬å°±ä¸åœ¨ä¸€ä¸ªé¢‘é“ä¸Šçš„ï¼Œä¸ºå•¥æœ‰äººä¼šæŠŠå®ƒä»¬ä½œæ¯”è¾ƒå‘¢ï¼Ÿå°±æ˜¯å› ä¸º Webpack è¿‡ç•Œäº†ï¼Œä¸€ç›´åœ¨åšä¸€äº›é¢å¤–çš„äº‹æƒ…ï¼ŒWebpack é€šè¿‡ä¸€äº›æ’ä»¶å¥½åƒä¹Ÿèƒ½å¹²æˆ‘ä»¬ç”¨ Gulp ç»å¸¸åšçš„äº‹å„¿

æ€»ä¹‹ï¼Œä»å®ƒä»¬çš„åˆè¡·æ¥çœ‹ï¼Œæ ¹æœ¬å°±ä¸ç”¨æŠŠå®ƒä»¬æ”¾åˆ°åŒä¸€ä¸ªè§’åº¦å½“ä¸­å»å¯¹æ¯” -> å°ç±³çš„ç©ºè°ƒå’Œæ ¼åŠ›çš„ç©ºè°ƒï¼Ÿæ ¼åŠ›çš„æ‰‹æœºå’Œå°ç±³çš„æ‰‹æœºï¼Ÿ

---

ç¬¬ä¸‰ç‚¹ï¼Œæ—¥å¸¸çš„ç»¼åˆäº‹åŠ¡

æ¯”å¦‚ï¼Œè®¡ç®—æœºé‡Œè¾¹æœ‰ä¸€å †è§†é¢‘å’Œç…§ç‰‡ -> æˆ‘ä»¬æƒ³è¦æ‰¹é‡é‡å‘½åã€æ‰¹é‡æ”¹åç¼€ã€å‰ç¼€ä¹‹ç±»çš„ -> å¯¹äºè¿™äº›ä¸œè¥¿ï¼Œè·Ÿæˆ‘ä»¬å¼€å‘å·¥ä½œï¼Œå¹¶æ²¡æœ‰å¤ªå¤šå…³ç³»ï¼Œä½†æ˜¯ï¼Œå¦‚æœä½ å®é™…å·¥ä½œä¸ªä¸¤ä¸‰å¹´ -> ä»¥å‰æˆ‘ä»¬ç”¨ windows ä¸‹çš„æ‰¹å¤„ç†å»åšï¼ŒLinux åˆ™ç”¨ shell è„šæœ¬å»åš

ä½†æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨åˆæœ‰å‡ ä¸ªäººèƒ½å†™æ‰¹å¤„ç†ã€èƒ½å†™ shell è„šæœ¬å‘¢ï¼Ÿ

å¯¹äºå¼€å‘äººå‘˜è€Œè¨€ï¼Œæ€»æœ‰äººè®¤ä¸ºï¼Œæˆ‘æ˜¯æ JS å¼€å‘çš„ï¼Œæˆ‘å°±åªèƒ½ä¼š JSï¼Œå…¶å®ƒä¸œè¥¿æˆ‘éƒ½ä¸èƒ½ä¼šï¼Œä¼šä¸€ç‚¹éƒ½æ˜¯ç½ª

ä½†è¿™å…¶å®æ ¹æœ¬å°±ä¸æ˜¯è¿™æ ·çš„ï¼Œå¯¹äºè‡ªä¸ªæ¥è¯´ï¼Œä¸è¦ç»™è‡ªå·±è®¾å¤ªå¤šçš„è¾¹ç•Œ -> å¾ˆå¤šæ—¶å€™ï¼Œä½ æŒæ¡äº† shell è„šæœ¬ï¼Œæ‰¹å¤„ç†çš„è¿™äº›ä¸œè¥¿ï¼Œè¿™å¯¹ä½ çš„å·¥ä½œæ•ˆç‡çš„æé«˜æ˜¯æœ‰å¾ˆå¤§å¸®åŠ©çš„

å›è¿‡å¤´æ¥çœ‹ Gulp è¿™ä¸ªå·¥å…·ï¼Œå®ƒæœ¬èº«å°±æ˜¯ä¸€äº›ä»»åŠ¡çš„æ‰§è¡Œå·¥å…·ï¼Œé‚£å°±å¯ä»¥é€šè¿‡å®šä¹‰å‡½æ•°çš„æ–¹å¼å»å®šä¹‰ä¸€äº›ä»»åŠ¡ -> è¿™äº›ä»»åŠ¡ä¸ä¸€å®šæ˜¯ä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°çš„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä½ åœ¨æ—¥å¸¸å·¥ä½œå½“ä¸­ç”¨åˆ°çš„ï¼Œæ¯”å¦‚ Excel ä¹‹ç±»çš„ï¼Œæ­¤æ—¶ä½ ä¹Ÿå¯ä»¥ç”¨ Gulp è¿™ä¸ªä¸œè¥¿å»åšä¸€ä¸‹

æ€»ä¹‹ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šçš„å·¥å…·å¹¶ä¸ä»…ä»…å±€é™äºé¡¹ç›®æœ¬èº«

ğŸ’¡ï¼šå…³äº Webpack å’Œ Gulp çš„æœ€ä½³å®è·µï¼Ÿ

å·¥å…·å±‚é¢ä¸Šï¼Œå¹¶æ²¡æœ‰ç»å¯¹è¿™ä¸ªè¯´æ³•ï¼Œæ¯”å¦‚åœ¨ä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»ç”¨ Gulp ä¹‹ç±»çš„ï¼Œä»€ä¹ˆæƒ…å†µä¸‹å¿…é¡»è¦ç”¨ Webpack

å› æ­¤ï¼Œæˆ‘ä»¬åªèƒ½ç»™å‡ºä¸€äº›ç›¸å¯¹ç»¼åˆä¸€ç‚¹çš„å»ºè®®

æ¯”å¦‚ï¼š

- SPA ç±»ä½¿ç”¨ Webpack
- MPA ç±»ä½¿ç”¨ Gulp

SPA ç±»åº”ç”¨æœ€ç»ˆæŠŠæ‰€æœ‰çš„ä»£ç æ‰“åŒ…åˆ°ä¸€èµ·ï¼Œè¿™æ˜¯åˆç†çš„ï¼Œä¹Ÿæ˜¯éœ€è¦çš„ï¼Œè‡³äºå¯¹äºä»€ä¹ˆä»£ç æ‹†åŒ…è¿™äº›é«˜çº§çš„ç”¨æ³•ï¼Œè¿™å°±å¦è¯´äº†ï¼Œä½†æ˜¯å¯¹äº SPA çš„æ•´ä½“ç›®æ ‡ï¼Œå®ƒè¿˜æ˜¯è¦æŠŠæ‰€æœ‰çš„ä¸œè¥¿éƒ½æ‰“åŒ…åˆ°ä¸€èµ·ï¼Œæ‰€ä»¥è¿™ç§ï¼Œæˆ‘ä»¬å»ºè®®å¤§å®¶ä½¿ç”¨ Webpack è¿™ç§ä»¥æ¨¡å—æ‰“åŒ…ä¸ºæ ¸å¿ƒçš„å·¥å…· -> åœ¨è¿™ä¸ªè¿‡ç¨‹å½“ä¸­ï¼Œé€šè¿‡ loader æœºåˆ¶å»å®ç°ä¸åŒç§ç±»èµ„æºçš„åŠ è½½ï¼Œé€šè¿‡ä¸€äº›æ’ä»¶å»å®ç°æ¯”å¦‚è¯´è‡ªåŠ¨ç”Ÿæˆ HTMLã€è‡ªåŠ¨å‘åŒ…è¿™æ ·çš„ä¸€äº›åŠŸèƒ½

MPA å³å¤šé¡µåº”ç”¨ -> å®ƒåº”è¯¥ä½¿ç”¨åƒ Gulp è¿™æ ·çš„ä¸œè¥¿ -> å®ƒå°±æ˜¯æŠŠé¡µé¢ã€æ ·å¼ã€è„šæœ¬è¿™æ ·å„è‡ªæ²¡æœ‰è”ç³»çš„å•ç‹¬çš„å»ç®¡ç†çš„è¿™ç§æ–¹å¼å»å®ç°çš„æ„å»º -> ä½¿ç”¨ Gulp ä¼šæ›´åˆé€‚ä¸€ç‚¹

å½“ç„¶ï¼Œå·¥å…·å±‚é¢æ²¡æœ‰å”¯ä¸€æ ‡å‡†ç­”æ¡ˆï¼Œä¹Ÿæ²¡æœ‰ç»å¯¹çš„æ ‡å‡†ç­”æ¡ˆ

ä»¥ä¸Šæ˜¯æ ¹æ®æˆ‘ä»¬ç»éªŒæ¥è®²çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒåˆç†çš„æœ€ä½³å®è·µ

å½“ç„¶ï¼Œå¦‚æœé’ˆå¯¹ä¸ªåˆ«éœ€æ±‚çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `npm scripts`

æˆ‘ä»¬çŸ¥é“`npm scripts`å°±æ˜¯ä¸€ä¸ªå°å‹çš„ tasks runner -> æ‰€è°“çš„ã€Œtasks runnerã€å°±æ˜¯ä»»åŠ¡æ‰§è¡Œå™¨ï¼Œå®ƒçš„ç‰¹ç‚¹å°±æ˜¯å®ƒè¦å…·å¤‡æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥è®©æŸä¸€ä¸ªä»»åŠ¡å»è‡ªåŠ¨å·¥ä½œèµ·æ¥ï¼Œè€Œè¿™æœŸé—´å¯èƒ½ä¼šå‡ºç° Aã€Bã€C è¿™ä¸‰ä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œæˆ–å…ˆåæ‰§è¡Œï¼Œè¿™æ ·çš„ä¸€äº›ååŒçš„æ“ä½œ -> æ¯”å¦‚`start`å’Œ`prestart` -> åœ¨ä»»åŠ¡å‰åšä»€ä¹ˆï¼Œåœ¨ä»»åŠ¡ååšä»€ä¹ˆ -> å†æ¯”å¦‚æ ¡éªŒä»£ç æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠ ESLint æ”¾åˆ°`npm scripts`é‡Œè¾¹å»ç®¡ç†

åƒè€å¸ˆåšçš„ä¸€äº› Node.js é¡¹ç›®ï¼Œå¹¶ä¸æ¶‰åŠåˆ°ä»£ç éœ€è¦å¤ªå¤šçš„æ„å»ºè¿‡ç¨‹ï¼Œè¿™å¯èƒ½åªéœ€è¦å»æ ¡éªŒä¸€ä¸‹ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒ -> è¿™ä¸ªæ—¶å€™ï¼Œè€å¸ˆä¸€èˆ¬ä¼šç›´æ¥ä½¿ç”¨`npm scripts`

`zce-cli`ï¼š

``` json
{
  "scripts": {
    "lint": "standard --fix",
    "test": "yarn test:unit && yarn test:e2e",
    "test:e2e": "ava test/e2e/** --verbose",
    "test:unit": "ava test/unit/** --verbose",
    "coverage": "nyc yarn test",
    "coverage:report": "nyc report --reporter=html"
  }
}
```

`caz`ï¼š

``` json
{
  "scripts": {
    "clean": "rimraf lib",
    "lint": "eslint \"**/*.ts\"",
    "compile": "tsc --project .",
    "build": "run-s clean lint compile",
    "test:unit": "jest src",
    "test:integration": "jest test",
    "test": "run-s test:*",
    "coverage": "jest --coverage",
    "preship": "run-s build test",
    "ship": "npm publish --registry https://registry.npmjs.org"
  },
}
```

åƒ`lint`è¿™æ ·çš„ä»»åŠ¡ï¼Œå°±æ²¡æœ‰å¿…è¦ç”¨ Gulp æˆ–è€… Webpack äº†

æ€»ä¹‹ï¼Œæ ¹æ®æƒ…å†µç”¨å°±å¯¹äº†ï¼Œä¹Ÿå°±æ˜¯å› åœ°åˆ¶å®œ -> å¯¹äºæˆ‘è€Œè¨€ï¼Œæœ€é‡è¦çš„è¿˜æ˜¯å……åˆ†æŒæ¡ Gulp ä¸ Webpackï¼Œä¹Ÿå°±æ˜¯æŠŠè¿™ä¸ªå·¥å…·ç»™ç©å¥½å‘—ï¼

åƒ rollupã€parcel è¿™äº›æ‰“åŒ…å·¥å…· -> ä¸éœ€è¦èŠ±æ—¶é—´å»äº†è§£ -> å¤šèŠ±æ—¶é—´å»æŒæ¡ Gulp å’Œ Webpack å°±å¥½äº†ï¼ -> æ¯•ç«Ÿå®ƒä»¬è¿˜æ˜¯ç°ä»£è¿™ä¸¤ç±»å·¥å…·çš„ä»£è¡¨ï¼

> æœ‰é—®é¢˜å°±è¦æå‡ºæ¥ï¼Œä¸è¦å¤ªåœ¨æ„è¿™ä¸ªé—®é¢˜æ˜¯å¦æ˜¯å¤ªåŸºç¡€è¿˜æ˜¯å…¶å®ƒä»€ä¹ˆçš„ï¼Œåˆæˆ–è€…æ˜¯å¾ˆéº»çƒ¦äººå®¶ä¸€æ · -> äº†è§£ä¸€ä¸ªä¸œè¥¿ï¼Œä»ä¸çŸ¥é“åˆ°çŸ¥é“è¿™ä¸ªè¿‡ç¨‹ï¼Œæ²¡æœ‰å¥½é¢å­è¿™ä¸ªè¯´æ³•ï¼Œæœ¬èº«å°±æ˜¯é—»é“æœ‰å…ˆåï¼Œä¸çŸ¥é“æ˜¯å¾ˆæ­£å¸¸çš„ï¼Œæ¯”å¦‚æ€»æŠŠ Gulp å’Œ Webpack æ··åˆ°ä¸€èµ·ï¼Œè®¤ä¸ºå®ƒä¿©å°±æ˜¯ä¸€æ ·çš„ -> è¿™ç§è®¤è¯†æ˜¯å¯ä»¥ç†è§£çš„ï¼Œæ¯•ç«Ÿè€å¸ˆå½“å¹´ä¹Ÿæ˜¯è¿™æ ·æƒ³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬æ…¢æ…¢é‡åˆ°ä¸€äº›åœºæ™¯ï¼Œå¿…é¡»ä½¿ç”¨ Gulp çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¼šå‘ç°ä¸€äº›æ„Ÿæƒ³ä¹‹ç±»çš„

ğŸ’¡ï¼šæ‰“åŒ…ä¸€ä¸ª SDK æ˜¯ä¸æ˜¯ç”¨ rollup æ¯”è¾ƒå¥½ï¼Ÿ

ç¡®å®å¦‚æ­¤ï¼Œå› ä¸º rollup æ‰“åŒ…å‡ºæ¥çš„ä¸œè¥¿ä¾ç„¶å¯è¯»

rollup æ‰“åŒ…å‡ºæ¥çš„ä»£ç åŸºæœ¬ä¸Šè·Ÿæˆ‘ä»¬æ‰‹å†™å‡ºæ¥çš„ä¸€æ ·ï¼Œè€Œ Webpack æ‰“åŒ…å‡ºæ¥çš„ä»£ç ï¼ŒåŸºæœ¬ä¸Šå°±æ— æ³•å»é˜…è¯»äº†ï¼ˆå³ä¾¿æ²¡æœ‰å‹ç¼©ï¼‰

![rollup](assets/img/2021-11-03-23-41-24.png)

æ‰€ä»¥ï¼Œä¸€èˆ¬æ¥è®²çš„è¯ï¼Œæˆ‘å»ºè®®ä½ å¦‚æœå¼€å‘ä¸€ä¸ªå·¥å…·çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ rollup

åƒæ—©æœŸçš„ Vueã€React æºä»£ç ï¼Œå®ƒä»¬æœ¬èº«éƒ½æ˜¯åœ¨ä½¿ç”¨ rollup è¿™æ ·çš„å·¥å…· -> rollup æ›´é€‚åˆåº“çš„æ‰“åŒ…

è€Œ sdk ä¹Ÿå±äºåº“çš„ä¸€ç§

rollup æ‰“åŒ…å‡ºæ¥çš„ä½“ç§¯æ¯” webpack è¦æ›´å°ï¼Œæ¯•ç«Ÿ webpack æ‰“åŒ…å‡ºæ¥çš„ä»£ç é‡Œè¾¹æœ‰å¾ˆå¤šå¼•å¯¼æ€§çš„ä»£ç ï¼ˆè¿™ä¸ªå¼•å¯¼ä»£ç æ˜¯å¾ˆé•¿çš„ï¼‰

webpack æ›´é€‚åˆåšåº”ç”¨ç¨‹åºçš„æ‰“åŒ…ï¼Œå®ƒæœ‰ web serverã€çƒ­æ›¿æ¢è¿™ç§ä½“éªŒï¼

ğŸ’¡ï¼šåœ¨å¤šé¡µåº”ç”¨ä¸‹ï¼Œä½¿ç”¨ vue ç»„ä»¶åŒ–æ–¹å¼å»å¼€å‘ï¼Œè¿™ä¼šå†²çªå—ï¼Ÿ

è¿™ä¸ªå…¶å®ä¸å†²çª -> è¿™å–å†³äºä½ æ€ä¹ˆç”¨ -> ä½ åšå¤šé¡µåº”ç”¨ï¼Œå¾—çœ‹ä½ æ˜¯æŠŠ vue å½“ä½œæ˜¯æ¡†æ¶å»ç”¨ï¼Œè¿˜æ˜¯åº“å»ç”¨ï¼Œæ¯•ç«Ÿæˆ‘ä»¬å¯ä»¥åƒç”¨ jQuery è¿™æ ·å»ä½¿ç”¨ vueï¼Œæ¯”å¦‚ vue çš„ mvvm åŠŸèƒ½å»æ¸²æŸ“ä¸€äº›ç»„ä»¶ 

webpack ä¹Ÿå¯ä»¥ç”¨äºå¤šé¡µæ‰“åŒ…ï¼Œä¸è¿‡ï¼Œä¸€èˆ¬åœ¨å¤šé¡µåº”ç”¨ç”¨ vue å°±ä¸ä¼šæ¶‰åŠåˆ°æ‰“åŒ…çš„é—®é¢˜äº†ï¼

## â˜…è¿‘æœŸå¸¸è§é—®é¢˜

> è€å¸ˆå‘ç°çš„ï¼Œä¸æ˜¯åŒå­¦ä»¬æå‡ºæ¥çš„ï¼

### <mark>1ï¼‰ä¸ºå•¥æœ‰çš„åœ°æ–¹ç”¨`yarn`ï¼Œæœ‰çš„åœ°æ–¹ç”¨`npm`ï¼Ÿ</mark>

ç”¨å•¥éƒ½æ²¡æœ‰ç»å¯¹çš„å¯¹å’Œé”™ï¼Œå°±ç›®å‰è¿™ä¸ªå‰ç«¯ç¤¾åŒºï¼Œå¯¹äºåŒ…ç®¡ç†å·¥å…·ï¼ˆ`yarn`å’Œ`npm`ï¼‰è€Œè¨€ -> æˆ‘ä»¬ç¬¬ä¸‰æ–¹çš„åº“å’Œæ¡†æ¶ï¼Œä»¥åŠåƒ gulpã€webpack ç­‰è¿™æ ·çš„ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œéƒ½æ˜¯é€šè¿‡ npm æ¨¡å—çš„æ–¹å¼å»å‘å¸ƒçš„ -> é‚£ä¹ˆæˆ‘ä»¬è¿™å°±éœ€è¦ç”¨é€šè¿‡ä¸€ä¸ªå·¥å…·å»å®‰è£…è¿™äº› npm æ¨¡å—äº† -> npm å’Œ yarn éƒ½æ˜¯ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·ï¼Œè€Œä¸”æœ¬èº«éƒ½åšå¾—è¿˜ä¸é”™

æœ€æ—© node å‡ºæ¥çš„æ—¶å€™ï¼Œå°±åªæœ‰ä¸€ä¸ª npm å·¥å…·ï¼Œä½†è¿™ä¸ª npm å·¥å…·å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ï¼š

![è·¯å¾„](assets/img/2021-11-04-15-01-59.png)

windows ç³»ç»ŸæŒ‡æ˜æ–‡ä»¶è·¯å¾„é•¿åº¦ä¸º [260](https://www.zhihu.com/question/328021009) ä¸ªå­—ç¬¦ -> è€Œä¸”è·¯å¾„è¿‡æ·±ä¼šå¯¼è‡´æ–‡ä»¶åˆ ä¸æ‰ï¼Œæ²¡æœ‰åŠæ³•åˆ›å»ºä¹‹ç±»çš„

é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œnpm åæœŸå°±æ”¹æ‰äº† -> æ”¹æˆæ˜¯å¹³è¡Œä¾èµ– -> ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦è¿™ä¸ªæ¨¡å—æ˜¯é¡¹ç›®ä¾èµ–ä¸‹çš„ï¼Œéƒ½å°½é‡æŠŠå®ƒä»¬å®‰è£…åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„`node_modules`

![å¹³è¡Œä¾èµ–](assets/img/2021-11-04-15-09-19.png)

ä½†è¿™ç§æƒ…å†µä¸‹åˆä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œæ€»ä¹‹ npm æ€»ä¼šæœ‰ä¸€äº›æ¯›ç—…ï¼Œè€Œ yarn å°±ç«™å‡ºæ¥è§£å†³è¿™äº›é—®é¢˜äº†

npm çš„é—®é¢˜ -> A æœºå™¨ä¸Šæˆ‘çš„é¡¹ç›®å®‰è£…çš„æ˜¯ 1.1 ç‰ˆçš„ jQueryï¼Œè€Œå½“æˆ‘æŠŠé¡¹ç›®æ‹¿åˆ° B æœºå™¨å»è·‘æ—¶ï¼Œæ­¤æ—¶å®‰è£…çš„ jQuery å´æ˜¯ 2.0 ç‰ˆçš„ -> è¿™ä¼šå¯¼è‡´ä»€ä¹ˆï¼Ÿ -> ä¸€ä¸ªé¡¹ç›®å› ä¸ºå®‰è£…äº†ä¸åŒç‰ˆæœ¬çš„æ¨¡å—è€Œè·‘ä¸èµ·æ¥

yarn è§£å†³äº†ä»€ä¹ˆï¼Ÿ

1. npm çš„æ¨¡å—è¿‡æ·±
2. npm ä¸‹è½½çš„é‚£ä¸ªæ¨¡å—æ²¡æœ‰é”çš„é—®é¢˜

æ‰€ä»¥ä½ åœ¨ç”¨ yarn å®‰è£…æ¨¡å—æ—¶ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª`yarn.lock`çš„æ–‡ä»¶ -> è¿™ä¸ªæ–‡ä»¶é‡Œè¾¹è®°è½½äº†æˆ‘ä»¬è¦å…·ä½“ä¸‹è½½çš„é‚£ä¸ªæ¨¡å—åŒ…çš„ä¸‹è½½åœ°å€ -> ç¡®ä¿äº†åŒæ ·ä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨ä¸åŒæœºå™¨ä¸Šã€ä¸åŒç¯å¢ƒå½“ä¸­ï¼Œå…¶ä¸‹è½½çš„æ¨¡å—åŒ…ç‰ˆæœ¬è‚¯å®šæ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºè¿™ä¸‹è½½åœ°å€æ˜¯ä¸€æ ·çš„å•Šï¼

æœ€æ—© Facebook æ¨å‡ºè¿™ä¸ª yarn å·¥å…·ï¼Œå°±æ˜¯æƒ³è§£å†³ npm çš„ä¸€äº›è¯Ÿç—…

ä½†æ˜¯ï¼Œnpm å®ƒä¹Ÿä¸å‚»å•Šï¼ -> yarn å‘å¸ƒä¹‹åï¼Œnpm å¾ˆå¿«å°±è·Ÿä¸Šäº†ï¼Œå®ƒè‡ªå·±ä¹Ÿæäº†ä¸€ä¸ª`package-lock.json`

å°ç»“ï¼š

npm çš„æ¯›ç—…ï¼šæ¨¡å—åŒ…ç‰ˆæœ¬ä¸å¯¹ï¼Œé¡¹ç›®ä¸èƒ½è¿è¡Œäº† -> yarn æå‡ºäº†ä¸€ä¸ªæ¦‚å¿µâ€”â€”åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹å»æ‰˜ç®¡ä¸€ä¸ª`yarn.lock` -> npm è·Ÿè¿›è¿™ä¸ªæ¦‚å¿µï¼Œäºæ˜¯æœ‰äº†`package-lock.json` -> ç¡®ä¿ä¸åŒæœºå™¨ï¼Œä¸åŒç¯å¢ƒä¸‹ï¼ŒåŒæ ·ä¸€ä¸ªé¡¹ç›®ï¼Œéƒ½èƒ½å®‰è£…ç›¸åŒç‰ˆæœ¬çš„ä¾èµ–

![lock](assets/img/2021-11-04-15-34-31.png)

ç°é˜¶æ®µï¼Œnpm å’Œ yarn å‡ ä¹æ²¡æœ‰ä»»ä½•åŒºåˆ«äº†

å½“ç„¶ï¼Œä¼šæœ‰ä¸€ç‚¹ä½¿ç”¨ä¸Šçš„åŒºåˆ« -> ä½ ä¼šè§‰å¾— yarn å®‰è£…æ¨¡å—æ›´å¿«ä¸€äº›ï¼Œå…¶å®å¹¶æ²¡æœ‰ï¼Œåªæ˜¯ä½ çš„æ„Ÿè§‰ç½¢äº†ï¼æ¯•ç«Ÿå¤§å®¶éƒ½æ˜¯å»ä¸‹è½½æ¨¡å—ï¼Œè€Œè¿™ä¸€ç‚¹æ˜¯ç”±ç½‘ç»œå»å†³å®šçš„

æœ€æ—©è®¤ä¸º yarn æ¯” npm å¿«æ˜¯å› ä¸º npm çš„ç›®å½•æ ‘é—®é¢˜ï¼Œnpm æ˜¯å±‚çº§ä¾èµ–è¿™ç§ç»“æ„çš„ï¼Œè¿™æ ·çš„ç›®å½•æ ‘å¾ˆæ¶å¿ƒï¼Œå½±å“å¼€å‘ä½“éªŒ

å¯¹äº†ï¼Œyarn æœ‰ç¼“å­˜ï¼Œnpm å…¶å®ä¹Ÿæœ‰ç¼“å­˜

è€å¸ˆä»–æœ€è¿‘ç”¨å› npm äº†ï¼Œå› ä¸º yarn çš„ 2.x æœ‰å°æ¯›ç—…ï¼Œè€Œä¸” npm æœ‰ä¸€ä¸ª npx -> `npx`å¯ä»¥è®©æˆ‘ä»¬ç›´æ¥æ‰§è¡Œä¸€ä¸ªè¿œç«¯çš„æ¨¡å—

å¦‚æœéå¾—è¯´ä¸€ä¸ªå¿«çš„è¯ -> cnpm å°±æŒºå¿«çš„ -> ä½†åƒä¸‡ä¸è¦ç”¨ï¼Œä¸èƒ½è¯´ä¸€ä¸ªå·¥å…·ä¸å¥½ï¼Œä½†è¿™ä¸ªå·¥å…·æ”¹å˜äº†æ¨¡å—çš„ä¾èµ–ç»“æ„ï¼Œç»å¸¸ä¼šå‡ºç°é€šè¿‡ cnpm å®‰è£…ä¾èµ–çš„é¡¹ç›®ï¼Œåœ¨åˆ«äººçš„æœºå™¨ä¸Šï¼Œåˆ«äººç”¨`npm`å®‰è£…ï¼Œç»“æœè·‘ä¸äº†ï¼Œè€Œä¸” cnpm å®‰è£…çš„ä¾èµ–åŒ…åŸºæœ¬æ— æ³•åˆ æ‰ -> `cnpm`å®‰è£…çš„ä¾èµ–æ¨¡å—åŒ…ç›®å½•æ˜¯ä»¥`_`å¼€å¤´çš„ï¼

cnpm åªæ˜¯é…ç½®äº†ä¸€ä¸ªæ·˜å®é•œåƒæºç½¢äº†ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬è‡ªå·±ç”¨ npm æˆ– yarn ä¹Ÿé…ç½®é‡Œé•œåƒæºï¼Œä½†è¿˜æ˜¯è§‰å¾—å¾ˆæ…¢ï¼Œæ¯”å¦‚å®‰è£…`gulp-imagemin`æ¨¡å—æ—¶å°±å¾ˆæ…¢è€Œä¸”ä¼šæŠ¥é”™ -> ä¸ºå•¥å¾ˆæ…¢ä¸”æŠ¥é”™å‘¢ï¼Ÿ -> å› ä¸ºè¿™ä¸ªæ¨¡å—é‡Œè¾¹ä¾èµ–å›¾ç‰‡å‹ç¼©æ¨¡å—ï¼Œè¿™ä¸ªå‹ç¼©æ¨¡å—ä¸æ˜¯ node æœ¬èº«åŸç”Ÿå®ç°çš„ï¼Œä¹Ÿå°±æ˜¯ä¸æ˜¯ç”¨ JS ä»£ç å®ç°çš„ï¼Œå®ƒæ˜¯ c++ æ¨¡å—ï¼Œc++ çš„æ¨¡å—éƒ½å‘å¸ƒæˆäº†äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½ å®‰è£…è¯¥æ¨¡å—å°±ä¼šè‡ªåŠ¨å»ä¸‹è½½å®ƒï¼Œè€Œä¸‹è½½å®ƒéƒ½æ˜¯ä» github è¿™ç§å›½å¤–æœåŠ¡å™¨ä¸Šå»ä¸‹è½½ï¼Œæ‰€ä»¥å°±ç»å¸¸å‡ºç°å¤±è”ã€ä¸‹è½½ä¸äº†çš„æƒ…å†µ

> node-sass å¯ä»¥æ¢æºï¼Œè€Œ gulp-imagemin å°±æ˜¯å¼ºè¡Œè½¬ socks5 ä»£ç†ä¸‹è½½ä¸‹æ¥çš„

è€Œä½ ä½¿ç”¨ cnpm çš„è¯ï¼Œcnpm åœ¨å®‰è£…çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨çš„æŠŠè¿™äº›å›½å¤–çš„åœ°å€å°½å¯èƒ½æ¢æˆå›½å†…é˜¿é‡Œä¸Šæ‰€å¯¹åº”çš„é‚£ä¸ªé•œåƒæº -> è¿™ä¸ªæ—¶å€™ä½ å°±ä¼šæ„Ÿè§‰è¿™å®‰è£…å¾—éå¸¸å¿«äº† -> ä½†æ˜¯è¿™å®‰è£…ä¸‹æ¥çš„ `node_modules` ä¸‹çš„ç»“æ„ï¼Œè·Ÿç”¨ npm æˆ– yarn å®‰è£…çš„æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™é‡Œè¾¹æœ‰ä¸€å¤§å †çš„å¿«æ·æ–¹å¼

è€Œä¸” cnpm æœ‰æ—¶å€™ä¸‹è½½ä¼šæ¼ä¸œè¥¿ï¼Œè¿™æ˜¯å› ä¸ºå®ƒç»“æ„ä¸ä¸€æ ·

æ€»ä¹‹ï¼Œæ ¹æ®æƒ…å†µå»é€‰æ‹©ç”¨ yarn è¿˜æ˜¯ npmï¼Œä½ çœ‹åˆ°é¡¹ç›®æœ‰`yarn.lock`é‚£å°±ç”¨ yarnï¼Œå¦‚æœä½ ç”¨äº† npmï¼Œå®ƒä¼šå¿½ç•¥æ‰è¿™ä¸ª `lock`ï¼Œæ­¤æ—¶å°±ä¼šå‡ºç°ç‰ˆæœ¬ä¸ä¸€è‡´çš„å®‰è£…äº†

---

yarn å’Œ npm çš„åŒºåˆ«ï¼š

å¯ä»¥è‡ªåŠ¨æ‰¾åˆ° `node_modules/.bin` ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œnpx ä¹Ÿå¯ä»¥

![yarn](assets/img/2021-11-04-18-30-13.png)

npx å¯ä»¥ç›´æ¥æ‰§è¡Œ è¿œç«¯ï¼ˆçº¿ä¸Šï¼‰æ¨¡å—ï¼Œä¸€æ¬¡æ€§ä½¿ç”¨ -> npx å®‰è£…çš„æ¨¡å—ä¼šæ”¾åœ¨ä¸€ä¸ªä¸´æ—¶çš„åœ°æ–¹`C:\Users\zego\AppData\Roaming\npm-cache\_npx`é‡Œè¾¹ï¼Œä¸ä¼šåœ¨å…¨å±€å’Œæœ¬åœ°å®‰è£… -> è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬æ¯æ¬¡ç”¨ npx å»ä½¿ç”¨æ¨¡å—ï¼Œéƒ½æ˜¯ç”¨æœ€æ–°çš„æ¨¡å—äº† -> å¯¹äºæˆ‘ä»¬æœ¬æœºå¼€å‘äººå‘˜æ¥è¯´ï¼Œä½¿ç”¨ä¸å¸¸ç”¨çš„å·¥å…·æ¨¡å—ï¼Œé‚£å°±å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼å»åš -> ä¸€æ¬¡æ€§ä½¿ç”¨ï¼Œç¡®ä¿æ¯æ¬¡ä½¿ç”¨éƒ½æ˜¯æœ€æ–°ç‰ˆçš„ï¼

![npx](assets/img/2021-11-04-18-33-31.png)

> åˆ é™¤ä¸€ä¸ªå…¨å±€çš„`serve`æ¨¡å— -> `npm uninstall serve -g` -> å…¨å±€æ¨¡å—å¤šäº†ï¼Œè‡ªå·±çš„æœºå™¨ä¹Ÿä¼šè¶Šæ¥è¶Šæ…¢â€¦â€¦

æ€»ä¹‹ï¼Œnpm å’Œ yarn å¯ä»¥ç»å¯¹æ€§çš„å®Œå…¨æ›¿æ¢ï¼Œæ¯•ç«Ÿ npm è‡ªæ‰“æœ‰äº† `npx` åå°±ç‰›é€¼å¾ˆå¤šäº†ï¼

> æ³¨æ„ `npm` å’Œ `yarn` ä¸èƒ½æ··ç€ç”¨

â¹ï¼š[npx æ˜¯ä»€ä¹ˆ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/27840803)

### <mark>2ï¼‰npm å®‰è£…æ¨¡å—è¶…æ—¶ / è¿æ¥é”™è¯¯</mark>

åœ¨ npm çš„å…¨å±€é…ç½®å½“ä¸­åŠ è¿™äº›é…ç½®ï¼š

``` bash
# mirror config
sharp_dist_base_url = https://npm.taobao.org/mirrors/sharp-libvips/v8.9.1/
profiler_binary_host_mirror = https://npm.taobao.org/mirrors/node-inspector/
fse_binary_host_mirror = https://npm.taobao.org/mirrors/fsevents
node_sqlite3_binary_host_mirror = https://npm.taobao.org/mirrors
sqlite3_binary_host_mirror = https://npm.taobao.org/mirrors
sqlite3_binary_site = https://npm.taobao.org/mirrors/sqlite3
sass_binary_site = https://npm.taobao.org/mirrors/node-sass
electron_mirror = https://npm.taobao.org/mirrors/electron/
puppeteer_download_host = https://npm.taobao.org/mirrors
chromedriver_cdnurl = https://npm.taobao.org/mirrors/chromedriver
operadriver_cdnurl = https://npm.taobao.org/mirrors/operadriver
phantomjs_cdnurl = https://npm.taobao.org/mirrors/phantomjs
python_mirror = https://npm.taobao.org/mirrors/python
registry = https://registry.npm.taobao.org/
disturl = https://npm.taobao.org/dist
```

æŠŠå¸¸è§çš„ä¸€äº›æ¨¡å—çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶çš„ä¸‹è½½é•œåƒæŒ‡å‘æ·˜å® -> å®‰è£…è¿™äº›æ¨¡å—æ—¶ï¼Œé€Ÿåº¦å°±ä¼šå¿«å¾ˆå¤š

æœ‰ä¸€äº›æ¨¡å—ä¸æ”¯æŒé…ç½®é•œåƒï¼Œè¿™å°±æ²¡åŠæ³•äº†ï¼Œæ¯”å¦‚`imagemin` -> åªèƒ½é€šè¿‡æŒ‚ä»£ç†æˆ–è€… vpn çš„æ–¹å¼å»å¼„äº†

### <mark>3ï¼‰å…¨å±€å®‰è£… or æœ¬åœ°å®‰è£…ï¼Ÿ</mark>

ğŸ’¡ï¼šä»€ä¹ˆæ—¶å€™å…¨å±€å®‰è£…ï¼Ÿä»€ä¹ˆæ—¶å€™æœ¬åœ°å®‰è£…ï¼Ÿ

ä¸€å¼€å§‹æ¥è§¦åˆ° Node çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šäººå‘Šè¯‰ä½ ï¼Œæœ‰ä¸€äº›å·¥å…·åº”è¯¥å…¨å±€å®‰è£…ï¼Œæœ‰ä¸€äº›äº›åˆ™æ˜¯æœ¬åœ°å®‰è£…

ç¡®å®æœ‰äº›å·¥å…·æ˜¯å¯ä»¥å…¨å±€å®‰è£…ï¼Œä½†ç°é˜¶æ®µè€Œè¨€ï¼Œè·Ÿé¡¹ç›®æœ‰å…³ç³»çš„ä¾èµ–ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šä½œä¸ºæœ¬åœ°ä¾èµ–å»å®‰è£…ï¼Œè€Œä¸æ˜¯ä½œä¸ºå…¨å±€å»å®‰è£…

å…¨å±€å®‰è£…æ¨¡å—ï¼šåªæœ‰æœ¬åœ°ç»å¸¸ç”¨åˆ°ï¼Œè€Œä¸”**ä¸æŸä¸€ä¸ªç‰¹å®šé¡¹ç›®æ— å…³çš„å·¥å…·æˆ–è€…æ¨¡å—**

è„šæ‰‹æ¶ç±»å‹çš„å·¥å…·ï¼Œå»ºè®®ä½¿ç”¨ `npx / yarn init`ï¼Œä¸€æ¬¡æ€§ä½¿ç”¨ -> å¦‚`yarn/npm init react-app react-demo` -> `creat`å¼€å¤´çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨`yarn/npm init`å»å®‰è£… -> è¿™é‡Œçš„`react-app`å°±æ˜¯`creat-react-app` -> `creat-nuxt-app`ä¹Ÿå¯ä»¥è¿™æ ·å®‰è£…

å…¶ä»–æ‰€æœ‰çš„æ¨¡å—éƒ½åº”è¯¥å®‰è£…åˆ°é¡¹ç›®æœ¬åœ°ã€‚ä¹Ÿå°±æ˜¯åœ¨ `package.json` å£°æ˜è¿™ä¸ªä¾èµ–ï¼Œ**ä¾¿äºåæœŸç®¡ç†**

æ¯”å¦‚ gulpï¼Œä½ é¡¹ç›®ç”¨äº† gulpï¼Œä½†ä½ å…¨å±€å®‰è£…äº†ï¼Œä½ æŠŠè¿™ä¸ªé¡¹ç›®ç»™å…¶ä»–äººï¼Œç»“æœäººå®¶ä¸çŸ¥é“ä½ ç”¨äº† gulpï¼Œä½†ä»– `yarn` äº†æ‰€æœ‰çš„ä¾èµ–ä¹‹åï¼Œç»“æœå‘ç°é¡¹ç›®è·‘ä¸èµ·æ¥äº† -> ä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ çš„é¡¹ç›®ä¾èµ–äº†å…¨å±€æ¨¡å—çš„è¯ï¼Œé‚£å°±æ„å‘³ç€ä½ è¿™ä¸ªé¡¹ç›®ä¹Ÿä¾èµ–äº†ä½ çš„æœºå™¨ï¼Œå…¶ä»–äººä½¿ç”¨ä½ è¿™ä¸ªé¡¹ç›®é‚£å°±è¡Œä¸é€šäº†ï¼

å…¨å±€å®‰è£…åªæ˜¯é’ˆå¯¹è‡ªå·±æœºå™¨çš„ï¼Œä¸ºäº†è®©æ¨¡å—å¯ä»¥éšç€é¡¹ç›®ä¸€èµ·å»èµ°ï¼Œæˆ‘å»ºè®®å¤§å®¶è¿˜æ˜¯æŠŠè¿™äº›æ¨¡å—ä½œä¸ºæœ¬åœ°æ¨¡å—å»å®‰è£… -> å–ç”µè§†çš„æ€»ä¸èƒ½ä¸ç»™é¥æ§å™¨å§ï¼Ÿ

åªè¦ä½ æŠŠä¾èµ–å®‰è£…åˆ°æœ¬åœ°ï¼Œé‚£`package.json`å½“ä¸­éƒ½ä¼šæœ‰æ‰€ä½“ç° -> `package.json`çš„æ ¸å¿ƒä½œç”¨å°±æ˜¯å…³äºä¾èµ–çš„ä¸€ä¸ªæ¸…å•ï¼Œé¡¹ç›®ä¾èµ–å“ªäº›æ¨¡å—ï¼Œå°±ç»™ä½ åˆ—å‡ºæ¥ï¼Œé€šè¿‡è¿™ä¸ªæ¸…å•ï¼Œç„¶åå€ŸåŠ©`npm install`æˆ–`yarn`å°±å¯ä»¥æŠŠæ¸…å•ç½—åˆ—çš„ä¾èµ–ç»™ä¸‹è½½ä¸‹æ¥äº†ï¼

### <mark>4ï¼‰æœ‰æ—¶å€™ä½ é€šè¿‡`npm i serve -g`æˆ–è€…`yarn add global serve`å»å®‰è£…å…¨å±€æ¨¡å—ï¼Œç»“æœå‘ç°è¿™ä¸ª`serve`è¿è¡Œä¸äº†ï¼Ÿ</mark>

ç»ˆç«¯æç¤ºæ‰¾ä¸åˆ°è¿™ä¸ª`serve`å‘½ä»¤

è·å–`npm`é…ç½®çš„å…¨å±€ç›®å½•ï¼š

``` bash
$ npm config get prefix # è·å– npm å…¨å±€ç›®å½•
$ yarn config get prefix # è¿™ä¸ªæ˜¯ yarn çš„
```

ç¬¬ä¸€ç§è§£å†³æ–¹å¼ï¼š

![å§¿åŠ¿ 1](assets/img/2021-11-04-20-05-35.png)

æ¯æ¬¡ç”¨è¿™ç§å®Œæ•´è·¯å¾„å¾ˆéº»çƒ¦ -> è¿™ä¸ªæ—¶å€™å°±æ¶‰åŠåˆ°é…ç½®ç¯å¢ƒå˜é‡äº†

ç¬¬äºŒç§è§£å†³æ–¹å¼ï¼š

ç¯å¢ƒå˜é‡é‡Œçš„`PATH`å˜é‡çš„ä½œç”¨å®é™…ä¸Šå°±æ˜¯åœ¨æˆ‘ä»¬å»æ‰§è¡Œä¸€ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œå¦‚æœå½“å‰ç›®å½•æ‰¾ä¸åˆ°ï¼Œé‚£å®ƒå°±ä¼šè‡ªåŠ¨åˆ° `PATH` å˜é‡é‡Œè¾¹å»æ‰¾

MAC æŸ¥çœ‹`PATH`å˜é‡

![path å˜é‡](assets/img/2021-11-04-20-09-54.png)

> windows ä½¿ç”¨ Git Bash ä¹Ÿæ˜¯ä¸€æ ·çš„

![ç¯å¢ƒå˜é‡](assets/img/2021-11-04-20-18-02.png)

windows ç”¨ `where`ï¼Œä½ ç”¨ Git Bash ä¹Ÿå¯ä»¥ç”¨ `which`

åœ¨ windows æŸ¥çœ‹ `path` è¿˜å¯ä»¥æ‰“å¼€ `cmd`ï¼Œè¾“å…¥`set Path`å›è½¦ï¼Œæ­¤æ—¶ä¼šçœ‹åˆ°`path`çš„å€¼ -> `PowerShell -> $env:PATH`

![which](assets/img/2021-11-04-20-21-07.png)

è¿™äº›å‘½ä»¤å¯ä»¥æ­£å¸¸æ‰§è¡Œæ‰å¯ä»¥è¢«`which`æ‰¾åˆ°ï¼Œä¸ç„¶ï¼Œæ‰¾ä¸åˆ°

æ€»ä¹‹ï¼Œä½ è¦çŸ¥é“çš„æ˜¯ï¼š

- å¯æ‰§è¡Œæ–‡ä»¶åœ¨å“ªå„¿ï¼Ÿ
- å¯æ‰§è¡Œæ–‡ä»¶æ˜¯å¦åœ¨`PATH`æ‰€ç½—åˆ—çš„ç›®å½•é‡Œè¾¹ï¼Ÿ

å…³äº`which`è¿™äº›å‘½ä»¤ï¼Œå¿˜è®°äº†å¯ä»¥æŸ¥ -> ä¸ºå•¥è€å¸ˆèƒ½è®°ä½ï¼Ÿ -> è€å¸ˆçš„è®°å¿†åŠ›å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œå…¶å®è¿™ç”¨å¤šäº†å°±èƒ½è®°ä½äº† -> ä¸€ä¸ªè¡Œä¸šæ‰æ ¹ä¸€ä¸‡ä¸ªå°æ—¶ï¼Œä½ ä¹Ÿèƒ½æˆä¸ºä¸“å®¶ï¼Œä¸€å‘¨ 5 å¤©ï¼Œæ¯å¤© 8 å°æ—¶ï¼Œå½“ç„¶ï¼Œè¿™å‰æè‡³å°‘åŒ…æ‹¬ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€æ˜¯ï¼ŒæŒç»­ä¸“æ³¨çš„æ„å¿—å’Œæ€åº¦ï¼ŒäºŒæ˜¯ï¼Œæ­£ç¡®çš„æ–¹æ³•è®º -> ä½ çš„å‘¨å…­æ˜¯æ•²ä»£ç å¤šè¿˜æ˜¯ç© LOL å¤šï¼Ÿ

> å»ºè®®ç”¨ Ubuntu -> å¯ä»¥ç”¨ VS Codeï¼Œä¹Ÿå¯ä»¥ç”¨ Chrome -> ä¸è¿‡ï¼Œè¿™ä¸èƒ½æµ‹ IEï¼Œå¦‚æœå…¬å¸è¦æ±‚ä½ æµ‹ IEï¼Œé‚£ä½ è¿˜æ˜¯è¾èŒå§ï¼

â¹ï¼š[ã€Œä¸€ä¸‡å°æ—¶å®šå¾‹ã€çœŸçš„é€‚åˆæ‰€æœ‰çš„é¢†åŸŸå—ï¼Ÿ - çŸ¥ä¹](https://www.zhihu.com/question/21655527)

â¹ï¼š[åä¸‡å°æ—¶ç†è®ºå±…ç„¶æ˜¯é”™çš„ï¼Ÿå› ä¸ºä½ æ²¡æœ‰åˆ»æ„ç»ƒä¹ ã€‚ - ç®€ä¹¦](https://www.jianshu.com/p/ea5169f475c1)

### <mark>5ï¼‰`yarn <cli-name>` / `npx <cli-name>`ï¼Ÿ</mark>

Node CLI ç±»å‹çš„æ¨¡å—éƒ½ä¼šæä¾›äº†ä¸€ä¸ªæˆ–å¤šä¸ª CLI ç¨‹åºï¼Œæ‰€ä»¥æœ¬åœ°å®‰è£…å®Œè¿™äº›è¿‡åï¼Œåœ¨é¡¹ç›®çš„ `node_modules` ä¸‹çš„ `.bin` ç›®å½•é‡Œå°±ä¼šå¤šå‡ºä¸€ä¸ªæˆ–è€…å¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚åç»­æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡å‘½ä»¤å»ä½¿ç”¨è¿™ä¸ª CLI ç¨‹åºã€‚

å½“ç„¶äº†ï¼Œé€šè¿‡å‰é¢çš„ä»‹ç»ä½ åº”è¯¥äº†è§£è¿‡ï¼Œå¯¹äº `node_modules` ä¸‹ `.bin` ç›®å½•é‡Œçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ npx æˆ–è€… yarn å‘½ä»¤å¿«é€Ÿæ‰¾åˆ°ï¼Œä¸å¿…ä½¿ç”¨å®Œæ•´çš„è·¯å¾„å»è®¿é—®ã€‚

é‚£å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ yarnï¼Œä½ å°±å¯ä»¥ç›´æ¥æ‰§è¡Œ yarn xxxï¼Œè¿™æ ·çš„è¯ yarn ä¼šè‡ªåŠ¨æ‰¾åˆ° `.bin` ç›®å½•ä¸‹çš„ `eslint` æ–‡ä»¶ã€‚

æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ npm å·¥å…·ï¼Œæ‰€ä»¥æˆ‘éœ€è¦ä½¿ç”¨ npx xxxã€‚æ³¨æ„è¿™é‡Œæ˜¯ `npx` å‘½ä»¤ï¼Œè€Œä¸æ˜¯ npmã€‚

npx æ˜¯ npm æœ€æ–°ç‰ˆæœ¬ä¸­é›†æˆçš„ä¸€ä¸ªå·¥å…·ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åªè¦å®‰è£…äº†æœ€æ–°ç‰ˆçš„ npm å·¥å…·ï¼Œä½ å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ npx å‘½ä»¤ã€‚

---

åœ¨æœ¬åœ°å®‰è£…çš„è¿™ä¸ªæ¨¡å—ï¼Œå¦‚æœå®ƒæä¾›äº†å¯æ‰§è¡Œæ–‡ä»¶çš„è¯ï¼Œé‚£åœ¨`node_modules`çš„`.bin`ç›®å½•ä¸‹è¾¹å°±ä¼šæœ‰å®ƒçš„å¯æ‰§è¡Œæ–‡ä»¶äº† -> windows ç³»ç»Ÿï¼Œè¯¥æ–‡ä»¶ä¼šå¸¦æœ‰ä¸€ä¸ª`cmd`åç¼€ï¼Œæ¯•ç«Ÿ windows æ˜¯ä¸æ”¯æŒ shell çš„

![shell](assets/img/2021-11-04-21-08-25.png)

### <mark>6ï¼‰yarn link / npm link</mark>

> CLI ç¨‹åºåœ¨ Linux ä¸‹è¦æ±‚æ‰§è¡Œå…¥å£æ–‡ä»¶å¿…é¡»å…·å¤‡æ‰§è¡Œæƒã€‚

åˆ›å»ºä¸€ä¸ª CLI ç¨‹åºï¼š

![CLI](assets/img/2021-11-04-21-30-11.png)

![CLI](assets/img/2021-11-04-21-32-18.png)

ä¸€èˆ¬`bin`å­—æ®µä¸æ˜¯å¯¹è±¡å€¼ï¼Œè€Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å€¼`bin.js`ï¼Œè¿™æ ·çš„è¯ï¼Œè¿™ä¸ªæ¨¡å—çš„å‘½ä»¤åå­—å°±æ˜¯`code`äº†

çœ‹çœ‹æŠŠè¿™ä¸ª`npm link`ååœ¨å“ªå„¿ï¼š

![code](assets/img/2021-11-04-21-46-24.png)

![code](assets/img/2021-11-04-21-48-44.png)

![cli.js](assets/img/2021-11-04-21-44-57.png)

èƒ½æ‰¾åˆ°è¿™ä¸ª`cli.js`ï¼Œé‚£å°±æ„å‘³ç€æˆ‘ä»¬è¿™ä¸ª`link`æ˜¯æˆåŠŸçš„

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•ç›®å½•ä¸‹å»è¿è¡Œè¿™ä¸ª`code`å‘½ä»¤ï¼Œä¸è¿‡è¿™ä¸ª`code`å’Œ VS Code å†²çªäº†ï¼ŒVS Code å®ƒä¹Ÿå«`code`å‘½ä»¤

![lagou](assets/img/2021-11-04-21-55-42.png)

å†æ¬¡æµ‹è¯•ï¼š

![æµ‹è¯•](assets/img/2021-11-04-21-56-25.png)

å…³äºæƒé™é—®é¢˜ï¼š

![æƒé™](assets/img/2021-11-04-21-57-17.png)

windows æ²¡æœ‰è¿™é—®é¢˜

Linux ä¸‹ä¼šä¸€ä¸ªä¸¥æ ¼çš„æ–‡ä»¶æ‰§è¡Œæƒé™æ¦‚å¿µ

æŸ¥çœ‹æ–‡ä»¶çš„æƒé™ï¼š

![æƒé™](assets/img/2021-11-04-21-59-09.png)

å…³äºæ–‡ä»¶æ‰§è¡Œæƒé™çš„è§£é‡Šï¼š

![è§£é‡Š](assets/img/2021-11-04-22-07-08.png)

> [Linux è¯»å†™æ‰§è¡Œæƒé™ï¼ˆ-rã€-wã€-xï¼‰çš„çœŸæ­£å«ä¹‰](http://c.biancheng.net/view/757.html)

ä»¥`-rw-r--r--`ï¼ˆ`-` + ä¸‰ä¸ªå•ä½ï¼‰ä¸ºä¾‹ï¼š

- ç¬¬ä¸€ä¸ªå­—ç¬¦`-`ï¼šå½“å‰è¿™ä¸ªè·¯å¾„çš„ç§ç±» -> `d`å°±æ˜¯æ–‡ä»¶å¤¹ï¼Œ`-`å°±ä»£è¡¨å®ƒæ˜¯ä¸€ä¸ªæ–‡ä»¶
- æ¥ç€çš„ä¸‰ä¸ªå­—ç¬¦`rw-`ï¼šä»£è¡¨å½“å‰è¿™ä¸ªç”¨æˆ·`zce`æ‰€å…·å¤‡çš„æƒé™ -> è¯»å†™ï¼Œ`-`æ˜¯æ²¡æœ‰è¿™ä¸ªæƒé™ï¼Œå¦‚æœæ˜¯`rwx`çš„è¯ï¼Œé‚£è¿™ä¸ª`x`å°±æ˜¯ä»£è¡¨æ‰§è¡Œæƒé™ï¼Œè¡¨ç¤ºä½ æ‹¥æœ‰æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶çš„æƒé™ï¼Œå¾ˆæ˜æ˜¾`rw-`æ˜¯æ²¡æœ‰æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶çš„æƒé™çš„
- å†æ¥ç€çš„ä¸‰ä¸ªå­—ç¬¦`r--`ï¼š`zce`å±äºçš„è¿™ä¸ª`staff`ç»„ï¼Œä¹Ÿå°±æ˜¯å·¥ä½œäººå‘˜ç»„ï¼Œæ˜¯åªå…è®¸è¯»çš„ï¼Œä¸å…è®¸å†™ï¼Œä¹Ÿä¸å…è®¸æ‰§è¡Œ
- æœ€åä¸‰ä¸ªå­—ç¬¦`r--`ï¼šå¦‚æœä½ çš„ç”µè„‘è¿˜æœ‰å…¶å®ƒç”¨æˆ·ï¼Œé‚£è¿™å…¶å®ƒç”¨æˆ·ä¹Ÿæ˜¯åªå…è®¸è¯»ï¼Œä¸å…è®¸å†™å’Œæ‰§è¡Œ

æ€»ä¹‹ï¼Œè¿™ 10 ä¸ªå­—ç¬¦ï¼Œæ¯ä¸€ä¸ªä½ç½®éƒ½æœ‰å›ºå®šçš„å«ä¹‰

æ‰€ä»¥`cli.js`ä¸å¯ä»¥æ‰§è¡Œå°±æ˜¯å› ä¸ºå®ƒæ²¡æœ‰å¯æ‰§è¡Œçš„æƒé™

å¦‚ä½•ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶çš„æƒé™å‘¢ï¼Ÿ

Mac å’Œ Linux ä¸‹éƒ½å¯ä»¥è¿™æ ·åšï¼š

``` bash
chmod 755 cli.js
```

`755`å°±æ˜¯å¯¹åº”ç€å¯æ‰§è¡Œçš„æƒé™

![755](assets/img/2021-11-04-22-21-08.png)

> `755`çš„æ„æ€ -> è¯»ã€å†™ã€æ‰§è¡Œå„è‡ªä»£è¡¨çš„æ˜¯`421`ï¼Œ`7`å°±æ˜¯ç”¨æˆ·æƒé™è¿™å—éƒ½æœ‰ï¼Œå³`4+2+1`ï¼Œ`5` å‘¢ï¼Œå°±æ˜¯`4+1`ï¼ŒåŒç†ï¼Œæœ€åé‚£ä¸ª`5`ä¹Ÿæ˜¯`4+1`

æ­¤æ—¶ä½ å†å»æ‰§è¡Œ`lagou`ï¼Œå°±å¯ä»¥æ­£å¸¸æ‰§è¡Œäº†

![æ‰§è¡Œ](assets/img/2021-11-04-22-22-22.png)

è¯è¯´ï¼Œå¦‚ä½•è®©å®ƒå¤±å»å¯æ‰§è¡Œçš„æƒé™å‘¢ï¼Ÿ

è¿™ä¹Ÿå¾ˆç®€å•ï¼Œ`-x`å°±å¥½äº†

![-x](assets/img/2021-11-04-22-25-23.png)

windows ä¸‹çš„æƒé™ç®¡ç†éƒ½æ˜¯å¯è§†åŒ–çš„ -> è¿™ä¸€ç‚¹æ¯”è¾ƒå¥½ç†è§£ -> è€Œ Linux çš„åšæ³•å°±æ¯”è¾ƒå»¶ä¼¸ä¸€äº›äº†

---

å¯¹æ¯”è¿™ä¸ªï¼š

![å¯¹æ¯”](assets/img/2021-11-04-21-52-21.png)

---

é‡åˆ°é—®é¢˜ä¸ä»…ä»…æ˜¯æŠŠé—®é¢˜ç»™è§£å†³æ‰ï¼Œè¿˜å¾—æŠŠä¸€ä¸ªé—®é¢˜èƒŒåçš„åŸå› ç»™å®ƒææ¸…æ¥šï¼Œå³ä¾¿è¿™ä¸ªé—®é¢˜æœ¬èº«å¹¶æ²¡æœ‰è§£å†³

å¦‚`cli.js`å°±æ˜¯ä¸èƒ½æ‰§è¡Œï¼Œæˆ‘ä¹Ÿä¸ç”¨ç®¡å®ƒèƒ½ä¸èƒ½æ‰§è¡Œï¼Œæˆ‘æ— æ‰€è°“å“ˆï¼æ¯•ç«Ÿå®ƒä¹Ÿä¸æ˜¯å®é™…çš„ä¸šåŠ¡ä»£ç ï¼Œå®ƒèƒ½å¦æ‰§è¡Œå¯¹æˆ‘ä¸å½±å“

ä½†æ˜¯ï¼Œè¿™ä¸ªè¿‡ç¨‹çš„æ ¸å¿ƒåœ¨äºä½ èƒ½å¦ææ˜ç™½è¿™é‡Œè¾¹èƒŒåçš„çŸ¥è¯†æˆ–è€…å‚¨å¤‡ -> è¿™ä¸€ç‚¹å°¤å…¶éœ€è¦æ³¨æ„ï¼Œåƒä¸‡ä¸è¦è®¤ä¸ºæˆ‘æ‰§è¡Œ`chmod 755 cli.js`è¿™ä¸ªå‘½ä»¤ï¼Œå®ƒå°± ok äº†ï¼Œç„¶ååè¾¹å°±æ²¡æœ‰ä¸‹æ–‡äº† -> ä½ å¾—çŸ¥é“ä¸ºå•¥æˆ‘è¿™æ ·åšå°± ok äº†å‘¢ï¼Ÿ

![é—®é¢˜èƒŒåçš„åŸå› ](assets/img/2021-11-04-22-51-21.png)

---

å¯¹äº†ï¼Œä½ åœ¨å‘å¸ƒè¿™ä¸ª CLI ç¨‹åºä¹‹å‰ï¼Œä½ ä¹Ÿå¾—æŠŠå®ƒæ”¹ä¸º`755`çš„æƒé™ -> æœ‰äº›é¡¹ç›®ä¸å«`cli.js`ï¼Œè€Œæ˜¯`index.js`

### <mark>7ï¼‰æ§åˆ¶å°å¡æ­»é—®é¢˜</mark>

åœ¨ windows ä¸‹åšå¼€å‘çš„æ—¶å€™ï¼Œå°½é‡ä¸è¦ç”¨ cmdï¼Œå› ä¸º cmd ç»ˆç«¯ä¼šæœ‰ä¸€å¤§å †çš„é—®é¢˜

![cmd](assets/img/2021-11-04-23-34-16.png)

åªè¦å·¦ä¸Šè§’çš„æ ‡é¢˜æ å˜æˆé€‰æ‹© `xxx`ï¼Œè¿™ä¸ªæ—¶å€™å°±åƒæ˜¯æˆªå›¾ä¸€æ ·ï¼Œcmd ä¼šåœç•™åœ¨å¿«ç…§çŠ¶æ€

è¯´ç™½äº†ï¼Œæ–¹ä¾¿äº†é€‰ä¸­æ–‡æœ¬ï¼Œäºæ˜¯é˜»å¡äº†è¿™ä¸ªæ¨¡å—çš„å®‰è£…æ‰§è¡Œï¼Œæ¯•ç«Ÿç»ˆç«¯ä»¥ä¸ºä½ è¦é€‰ä¸­è¿™ä¸ªæ–‡æœ¬ï¼Œä¸ç„¶ä¹‹åï¼Œå°±é€‰ä¸åˆ°äº†ï¼

PowerShell ä¹Ÿæ˜¯å¦‚æ­¤ -> ç”¨ VS Code æä¾›çš„ç»ˆç«¯å°±å¥½äº†ï¼

ä¹Ÿè®¸ä½ ä¼šæœ‰ç–‘é—®ã€ŒVS Code çš„ç»ˆç«¯ä¹Ÿç”¨ cmd å•Šï¼è¿™éš¾é“ä¸ä¼šä¹Ÿå¡æ­»å—ï¼Ÿã€

è¿™å¹¶ä¸ä¼šå¡æ­»ï¼Œè™½ç„¶ VS Code æ˜¯è°ƒç”¨æœ¬åœ°çš„ç»ˆç«¯ï¼Œä½†æ˜¯ VS Code çš„ç»ˆç«¯ç•Œé¢çš„ç»˜åˆ¶é€»è¾‘è·Ÿ cmd æ˜¯ä¸ä¸€æ ·çš„ï¼ŒVS Code ç›¸å½“äºæ˜¯æŠŠè¾“å…¥çš„è¿™äº›å‘½ä»¤æ‹¿åˆ°ç³»ç»Ÿå½“ä¸­å»æ‰§è¡Œï¼Œç„¶åå†æŠŠæ‰§è¡Œç»“æœæ¸²æŸ“åˆ°è¿™ä¸ª VS Code çš„ç»ˆç«¯ç•Œé¢ä¸Š -> VS Code çš„ç»ˆç«¯æ‰€æ˜¾ç¤ºçš„å†…å®¹å®é™…ä¸Šå°±æ˜¯ä¸€äº› DOM å…ƒç´ 

æ—©æœŸçš„ VS Code ï¼Œè¿™ä¸ªç»ˆç«¯æ˜¯ç”¨ Canvas å»æ¸²æŸ“çš„ï¼Œç°åœ¨çš„åˆ™æ˜¯ç”¨ DOM å…ƒç´ å»æ¸²æŸ“ï¼Œæ‰€ä»¥å®ƒä¸ä¼šå­˜åœ¨ cmd é‚£æ ·çš„é—®é¢˜

![ç»ˆç«¯](assets/img/2021-11-04-23-44-03.png)

### <mark>8ï¼‰macOS ç¯å¢ƒå˜é‡é…ç½®</mark>

`.bashrc .bash_profile .zshrc`

``` shell
## load nvm
export NVM_DIR=$HOME/.nvm
[ -s $(brew --prefix nvm)/nvm.sh ] && . $(brew --prefix nvm)/nvm.sh
[ -s $(brew --prefix nvm)/bash_completion ] && . $(brew --prefix nvm)/bash_completion

## yarn global path
export PATH=$(yarn global bin):$PATH

## define alias
alias subl="'/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl'"
alias code="'/Applications/Visual Studio Code.app/Contents/Resources/app/bin/code'"
alias weapp="'/Applications/wechatwebdevtools.app/Contents/MacOS/cli'"
alias typora="open -a typora"
alias proxy="all_proxy=socks5://127.0.0.1:1086"
# alias proxy="http_proxy=socks5://127.0.0.1:1086"
# alias proxy="https_proxy=socks5://127.0.0.1:1086"
alias reload=". ~/.bash_profile"
alias reset-dock="defaults delete com.apple.dock; killall Dock"
alias reset-launchpad="defaults write com.apple.dock ResetLaunchPad -bool true; killall Dock"
alias show-hiddens="defaults write com.apple.finder AppleShowAllFiles -bool true; killall Finder"
alias hide-hiddens="defaults write com.apple.finder AppleShowAllFiles -bool false; killall Finder"
alias rm-ds="sudo rm -rf .DS_Store && rm -rf **/.DS_Store"

## export mirrors
export NODEJS_ORG_MIRROR=http://npm.taobao.org/mirrors/node
# export IOJS_ORG_MIRROR=http://npm.taobao.org/mirrors/iojs
export NVM_NODEJS_ORG_MIRROR=$NODEJS_ORG_MIRROR
# export NVM_IOJS_ORG_MIRROR=$IOJS_ORG_MIRROR
```

### <mark>9ï¼‰ä»‹ç» zce-cli</mark>

- [zce/zce-cli: A CLI tool for my personal productivity, Scaffolding tools move to zce/caz ğŸ‘‰](https://github.com/zce/zce-cli)
- [zce/x-pages: A simple static pages development workflow (static site generator maybe)](https://github.com/zce/x-pages)

è¿™æ˜¯è€å¸ˆä»¥å‰å†™çš„ä¸€ä¸ªå·¥å…·äº† -> ä¹‹å‰è€å¸ˆå†™ä»£ç æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œä¼šç”¨å®ƒæ¯”è¾ƒå¤š

è®²è¿™ä¸ªå†…å®¹æ˜¯ä¸ºäº†ç»™è„šæ‰‹æ¶å·¥å…·åšä¸€ä¸ªæ‰©å±•

å¦‚ä½•è®²ï¼Ÿ -> æœ€ç®€å•çš„åŠæ³•å°±æ˜¯ï¼Œä»¥è‡ªå·±çœŸæ­£å¼€å‘çš„è¿™ä¸ª zce-cli å·¥å…·ä¸ºä¾‹ï¼Œè€Œä¸”æ¯”ä¹‹å‰çš„æ¡ˆä¾‹æ›´å®Œå–„ä¸”æ›´å¤æ‚ -> æŠŠæ ¸å¿ƒå®ç°æ€è·¯ç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹

æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ªæºä»£ç å»ä»”ç»†ç¢ç£¨ä¸€ä¸‹æ¯ä¸€æ­¥çš„å®ç°

zce-cli å…¶å®å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ node é¡¹ç›®

æœ‰äººä¼šè¯´ã€Œæˆ‘ä¸€ä¸ªå­¦å‰ç«¯çš„ï¼Œæˆ‘ä¸è¦å­¦ä»€ä¹ˆ node é¡¹ç›®ã€

å…¶å®ï¼Œä»å¼€å‘åˆ°ç°åœ¨ï¼Œä½ åŸºæœ¬ä¸Šå°±ç¦»ä¸å¼€ node äº†ï¼ˆå®‰è£…åŒ…ä¹‹ç±»çš„ï¼‰ï¼Œæ¯•ç«Ÿæ•´ä¸ªå‰ç«¯ç”Ÿæ€éƒ½åŸºäº node è¿™ä¸ªå¹³å°

æ‰€ä»¥æˆ‘ä»¬ä¸ºä½•ä¸å»äº†è§£è¿™ä¸ªå¹³å°å‘¢ï¼Ÿ

ç„¶ååŸºäºè¿™ä¸ªå¹³å°å»åšä¸€äº›æœ‰ç”¨çš„ä¸œè¥¿æˆ–è€…æœ‰æ„æ€çš„ä¸œè¥¿ï¼Œä»¥æ­¤æ¥æé«˜è‡ªå·±çš„æˆ‘ä»¬å¼€å‘æ•ˆç‡å‘¢ï¼Ÿ

zce-cli æ¨¡ä»¿äº†æ—©æœŸçš„ vue-cliï¼Œä¹Ÿå€Ÿé‰´äº† yeoman

å®ƒçš„ç‰¹ç‚¹å°±æ˜¯è‡ªåŠ¨å»ä¸‹è½½æ¨¡æ¿

ä»¥å‰å¼€å‘ä¸€ä¸ª npm æ¨¡å— -> é‡Œè¾¹æœ‰ä¸€äº›åŸºç¡€çš„æ–‡ä»¶å’Œæ–‡æ¡£æ˜¯å›ºå®šçš„

è€å¸ˆä»¥å‰ä¸ºå•¥ä¼šæ€»çˆ±é€ è½®å­ï¼Ÿ

1. å¸‚é¢ä¸Šçš„å·¥å…·ä¸æ»¡è¶³è‡ªå·±çš„éœ€æ±‚
2. è‡ªå·±è¿˜æ¯”è¾ƒå¹´è½»ï¼Œæ¯”è¾ƒå–œæ¬¢å½°æ˜¾ä¸€ä¸‹è‡ªå·±çš„æŠ€æœ¯

åæ¥æ²¡æ—¶é—´æ²¡ç²¾åŠ›å»ç»´æŠ¤äº†ï¼Œå°±ä¸€åˆ‡ä»ç®€äº†ï¼

ä½¿ç”¨ï¼š

``` bash
# å…¨å±€å®‰è£…
npm i zce-cli -g
```

åˆ›å»º npm æ¨¡å—é¡¹ç›®ï¼š

``` bash
zce init nm nm-demo
```

![æ¨¡æ¿](assets/img/2021-11-05-00-50-57.png)

è¿™ä¸ªæ¨¡æ¿ä»å“ªå„¿ä¸‹è½½ï¼Ÿ -> è€å¸ˆæœ‰ä¸“é—¨çš„åœ°å€å»ä¸‹è½½è¿™ä¸ªæ¨¡æ¿

è¿™ä¸ªæ¨¡æ¿æ¥è‡ªï¼š<https://github.com/zce-templates/nm>

![æ¨¡æ¿](assets/img/2021-11-05-00-50-30.png)

ä»¥å‰è€å¸ˆåšå„ç§ç±»å‹çš„é¡¹ç›®ï¼Œéƒ½ä¼šä¸ºé¡¹ç›®åšä¸åŒçš„æ¨¡æ¿ -> æœ‰äº›æ¨¡æ¿ç»´æŠ¤å¾—æ¯”è¾ƒå‹¤ï¼Œæœ‰äº›åˆ™ä¸åŠ¨äº†

`nm`è¿™ä¸ªæ¨¡æ¿é‡Œè¾¹æœ‰å›ºå®šçš„ç»“æœï¼Œæˆ‘ä»¬è¦ç”Ÿæˆçš„æ–‡ä»¶éƒ½åœ¨`template`ç›®å½•ä¸‹ï¼Œè€Œä¸”è¿™äº›æ–‡ä»¶éƒ½æœ‰ç”¨ EJS æ¨¡æ¿è¯­æ³•

![æ¨¡æ¿](assets/img/2021-11-05-00-54-45.png)

æ¨¡æ¿ä¸‹è½½å®Œåï¼Œä¼šé—®ä½ ä¸€äº›é—®é¢˜ -> ä¸åŒçš„æ¨¡æ¿ï¼Œé—®ä½ çš„é—®é¢˜ä¸ä¸€æ · -> æœ‰äº›ä¿¡æ¯ä¼šè‡ªåŠ¨å»è¯»ä½ æœºå™¨ä¸Šçš„é…ç½®ï¼Œæ¯”å¦‚ Github nameã€é‚®ç®±åœ°å€ä¹‹ç±»çš„ -> é€‰æ‹©åŠŸèƒ½ç‰¹æ€§ -> æ¯”å¦‚æµ‹è¯•è¦†ç›–ç‡ã€æ·»åŠ æ–‡æ¡£ä¹‹ç±»çš„

èµ·åˆè¿™ä¸ª zce-cli çš„æµ‹è¯•è¦†ç›–ç‡æœ‰ 100% ï¼Œç°åœ¨åªæœ‰ 91% äº†

æ ¹æ®æ¨¡æ¿ç”Ÿæˆçš„é¡¹ç›®ï¼š

![é¡¹ç›®](assets/img/2021-11-05-00-59-02.png)

é‡Œè¾¹æœ‰åŸºç¡€çš„ä»£ç å’ŒåŸºç¡€çš„é…ç½® -> åšä¸åŒçš„æ¨¡å—ï¼Œè¿™äº›éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å°±æŠŠå®ƒä»¬æŠ½è±¡å‡ºæ¥äº†

æœ‰ä¸€ä¸ªå“¥ä»¬åœ¨ npm ä¸Šå‘å¸ƒäº† 900 å¤šä¸ªæ¨¡å—ï¼ˆéƒ½æ˜¯é«˜é¢‘æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯ç”¨çš„äººå¾ˆå¤šï¼‰ï¼Œå¦‚æœè¿™ä¸ªå“¥ä»¬ä¸æä¸ªè„šæ‰‹æ¶å»ç”Ÿæˆè‡ªåŠ¨åŒ–çš„æ¨¡æ¿çš„è¯ï¼Œè€Œæ˜¯ä¸€ä¸ªä¸ªçš„å»åšï¼Œé‚£ä¹Ÿå¤ªç—›è‹¦äº†å§ï¼

[sindresorhus](https://www.npmjs.com/~sindresorhus)ï¼š

![sindresorhus](assets/img/2021-11-05-01-03-28.png)

ä»–è‡ªå·±è‚¯å®šæ˜¯ç”¨äº†è„šæ‰‹æ¶çš„æ–¹å¼å»åˆ›å»ºçš„

å¯¹äºè¿™ç§å¤§ä½¬æ‰èƒ½è¢«å°ä¸ºç¥ -> ä»–æ˜¯å…¨èŒå¼€æºçš„å¼€å‘è€…ï¼Œä¸“é—¨é å¤§å®¶å»æçŒ®è€Œç”Ÿæ´»çš„

è€å¸ˆåœ¨ 16 å¹´çš„æ—¶å€™ç»™ä»–çš„ `is-online` æ¨¡å—æäº¤äº†ä¸€ä¸ªå¾ˆå°çš„ä»£ç  -> å¤§ç¥çœ‹äº†è¿™ä¸ªä»£ç ç»™è€å¸ˆæŠ äº†å¾ˆå¤šçš„ç»†èŠ‚ï¼ˆä»£ç æ ¼å¼ï¼Œå†™æ³•ã€ä»£ç é¡ºåºä¹‹ç±»çš„ï¼‰ã€å¤§ç¥è¦æ±‚è¯´å‡ºä½ çš„åˆè¡·å’Œç›®çš„ä¹‹ç±»çš„

![æŠ ç»†èŠ‚](assets/img/2021-11-05-01-22-27.png)

> <https://github.com/sindresorhus/is-online/pull/28>

ä»ä¸­ï¼Œè€å¸ˆæ„è¯†åˆ°ã€Œä¸€ä¸ªå¼€å‘äººå‘˜å¯¹å¼€å‘è¿™ä¸ªè¡Œä¸šåšåˆ°äº†æè‡´æˆ–è€…åšåˆ°ä¸€ä¸ªç‰¹åˆ«å®Œç¾çš„çŠ¶æ€æ˜¯ä»€ä¹ˆæ ·çš„ã€ -> ã€Œè‡ªå·±å¹³æ—¶æ‰€å…³æ³¨çš„ä¸œè¥¿æ˜¯ä¸æ˜¯æœ‰ä»·å€¼çš„ï¼Ÿã€

> 10 ä¸‡ä¸ªå°æ—¶åªæ•²`console.log()`æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œä½ å¾—å¤šæ€è€ƒï¼Œå¤šæ•²æœ‰è´¨é‡çš„ä»£ç ï¼Œå¤šå»æ¥è§¦å¤§ç¥ -> ä¹Ÿè®¸åˆšå¼€å§‹å¾ˆèœï¼Œä½†åªè¦ä½ è§‰å¾—æ˜¯å¯¹çš„ï¼Œé‚£å°±å»åšå‘—ï¼è¢«å¤§ç¥æ‰“å›æ¥ï¼Œä½ ä¹Ÿå¾—åŠªåŠ›æ¥ä½å®ƒ

æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹è¿™ä¸ª`zce-cli`çš„å…·ä½“å®ç°ï¼š

æˆ‘ä»¬æ‹¿åˆ°è¿™ä¸ªé¡¹ç›®çš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯å…ˆçœ‹å®ƒçš„`package.json`

å®ƒé‡Œè¾¹ä¾èµ–çš„æ¨¡å—ï¼Œæˆ‘ä»¬ä¸ç”¨ä¸€ä¸ªä¸ªå»çœ‹ï¼Œæˆ‘ä»¬å†å»çœ‹é¡¹ç›®ä»£ç çš„æ—¶å€™ï¼Œç”¨åˆ°è°å°±å»çœ‹è°

é‚£æˆ‘ä»¬è¦çœ‹è°å‘¢ï¼Ÿ -> å› ä¸ºå®ƒæ˜¯ä¸€ä¸ª CLI ç¨‹åºï¼Œæ˜¾ç„¶æˆ‘ä»¬æ ¸å¿ƒè¦çœ‹çš„å°±æ˜¯`bin`å­—æ®µ -> è€Œ`bin`å¯¹åº”çš„æ˜¯`bin/zce.js`

> [zce-cli/zce.js at v0.2.x Â· zce/zce-cli](https://github.com/zce/zce-cli/blob/v0.2.x/bin/zce.js)

`zce.js`æœ‰ä»€ä¹ˆï¼Ÿ

![zce](assets/img/2021-11-05-12-35-23.png)

çœ‹äº†å¼•å…¥å“ªäº›æ¨¡å—åï¼Œç´§æ¥ç€å°±æ˜¯çœ‹å®ƒçš„æ ¸å¿ƒä»£ç ï¼Œæ³¨æ„ä¸è¦ä¸€è¡Œä¸€è¡Œå»çœ‹ï¼Œä¸€äº›ä¸é‡è¦çš„ä»£ç å°±ä¸è¦çœ‹äº†

åˆ¤æ–­ä¸€ä¸‹å½“å‰æœºå™¨çš„ node ç‰ˆæœ¬æ˜¯å¦æ»¡è¶³æˆ‘ä»¬è¿™ä¸ª`zce-cli`å¯¹ node ç‰ˆæœ¬çš„è¦æ±‚ï¼Œæ¯”å¦‚`zce-cli`è¦æ±‚`node`ç‰ˆæœ¬ `>= 8`ï¼ˆå› ä¸º`zce-cli`ç”¨äº† 8.0 ç‰ˆæœ¬ä»¥ä¸Šçš„ç‰¹æ€§ï¼‰ -> ä¸æ»¡è¶³å°±æ˜¯ç»™ä¸ªæç¤ºï¼Œç„¶åç»“æŸè¿™ä¸ªç¨‹åº

![zce-cli](assets/img/2021-11-05-13-36-37.png)

æˆ‘æ‰§è¡Œçš„`init`å‘½ä»¤ï¼Œæœ€ç»ˆæ‰§è¡Œçš„å°±æ˜¯`generator.init`

![init](assets/img/2021-11-05-14-02-06.png)

`lib/index.js`ä¸‹æˆ‘åšäº†ä¸€ä¸ªå»¶æ—¶åŠ è½½ -> ä½ ä½¿ç”¨åˆ°å“ªä¸ªæ¨¡å—ï¼Œæˆ‘å°±å»åŠ è½½å“ªä¸ªæ¨¡å—

![index.js](assets/img/2021-11-05-13-54-44.png)

ç›®å‰å¯ä»¥ç”¨`import`é‚£ç§æ–¹å¼ -> å®ƒæ˜¯é™æ€å¯¼å…¥çš„ï¼Œå¯ä»¥åˆ†ææƒ…å†µï¼Œåšé‚£ç§å»¶æ—¶åŠ è½½çš„æœºåˆ¶

![init](assets/img/2021-11-05-14-55-04.png)

æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ª`init.js`æœ‰ä»€ä¹ˆ -> å®ƒå¯¼å…¥äº† 6 ä¸ªæ¨¡å—ï¼Œè¿™äº›æ¨¡å—éƒ½æœ‰å¯¹åº”çš„åŠŸèƒ½ï¼Œè€Œå†™å‡ºè¿™å†™åŠŸèƒ½çš„å‰æï¼Œè¿˜æ˜¯åœ¨äºä½ å¯¹ node è¿™å—ä¸œè¥¿æœ‰ä¸€å®šçš„äº†è§£

![init.js](assets/img/2021-11-05-15-28-33.png)

> ç¦»çº¿æ¨¡å¼æ˜¯ä½¿ç”¨æ¨¡æ¿ç¼“å­˜

![init](assets/img/2021-11-05-15-29-21.png)

`comfirm`çš„å®ç°ï¼š

![comfirm](assets/img/2021-11-05-15-37-49.png)

`resolve`çš„å®ç°ï¼š

ä»è¿œç«¯ä¸‹è½½ä¸€ä¸ªæ¨¡å—åŒ…åå°±è§£å‹ï¼Œå°±è¿™ä¹ˆç®€å•çš„é€»è¾‘

![resolve](assets/img/2021-11-05-15-40-54.png)

è€å¸ˆå†™çš„è¿™äº›ä»£ç ç”¨äº†ä¸€ä¸¤å¤©ï¼Œä½ å¯ä»¥åœ¨å¤œæ·±äººé™çš„æ—¶å€™å»ä¸€è¡Œè¡Œåœ°å»çœ‹ -> è¿™äº›ä»£ç éƒ½åœ¨å…³é”®ä½ç½®å¤„æ ‡æ˜äº†æ³¨é‡Š

æ‰¾åˆ°æ¨¡æ¿è¿‡åï¼ŒåŠ è½½è¿™ä¸ªæ¨¡æ¿ï¼ŒåŠ è½½å®Œåå°±å¾—åˆ°ä¸€ä¸ª`options` -> `options`é‡Œè¾¹å®é™…ä¸Šå°±æ˜¯æ¨¡æ¿é‡Œè¾¹å¯¹åº”çš„ä¸€äº›é…ç½®ï¼š

![index.js](assets/img/2021-11-05-15-45-02.png)

> [nm/index.js at master Â· zce-templates/nm](https://github.com/zce-templates/nm/blob/master/index.js)

è¿™ä¸ªé…ç½®ç»™å‡ºäº†æ¨¡æ¿æœ‰å“ªäº›é—®é¢˜ï¼Œå¦‚é—®é¢˜ 1 é¡¹ç›®åå­—ã€é—®é¢˜ 2 é¡¹ç›®ç‰ˆæœ¬ç­‰ç­‰

æœ‰äº†è¿™äº›é—®é¢˜åï¼Œå°±é€šè¿‡ç»ˆç«¯äº¤äº’çš„æ–¹å¼æå‡ºå»ï¼Œä»è€Œå¾—åˆ°ç”¨æˆ·è¾“å…¥çš„ç­”æ¡ˆï¼Œæœ€åè°ƒç”¨`generateFiles`ç”Ÿæˆæ–‡ä»¶

`generateFiles`çš„å®ç°ï¼Ÿä¹Ÿå°±æ˜¯`generator.js`ï¼š

å®ƒç”¨äº†`Metalsmith`è¿™ä¸ªåº“ -> å®ƒå®é™…ä¸Šå°±æ˜¯æ ¹æ®åŸç›®å½•ï¼Œç„¶åä»¥ä¸­é—´ä»¶è¿™ç§ç»“æ„ï¼Œç„¶åä¸€æ­¥æ­¥å»åŠ å·¥ -> æœ‰ç‚¹ç±»ä¼¼äº Gulp

![Metalsmith](assets/img/2021-11-05-16-06-30.png)

å¯ä»¥çœ‹åˆ°ï¼Œå¯¹ node å¦‚æœä¸äº†è§£çš„è¯ï¼Œå…³äºè¿™ä¸ª cli ä½ æ˜¯å†™ä¸å‡ºæ¥çš„

å¯¹äº nodeï¼š

1. ä½ è¦ææ˜ç™½ä»€ä¹ˆæ˜¯ nodeï¼Ÿ
2. node èƒ½å¤Ÿè§£å†³ä»€ä¹ˆæ ·çš„é—®é¢˜ï¼Ÿ
3. æˆ‘æƒ³è¦åšä¸€ä¸ªä»€ä¹ˆæ ·çš„ä¸œè¥¿ï¼Ÿç„¶ååœ¨ node ä¸Šæ”¹æ€ä¹ˆå»å®ç°å®ƒå‘¢ï¼Ÿ

node æ˜¯ä¸€ä¸ªç¼–ç¨‹å¹³å°ï¼Œä½ å¾—çŸ¥é“è¿™ä¸ªå¹³å°èƒ½å¹²å•¥ï¼Œè¿™æ ·ï¼Œä½ æ‰èƒ½çŸ¥é“æˆ‘æœ‰è¿™ä¸ªéœ€æ±‚ï¼Œnode å®ƒæ˜¯å¦èƒ½å®ç°æˆ‘è¿™ä¸ªéœ€æ±‚

è¿™ä¸ª`zce-cli`è½®å­ï¼Œå‚è€ƒäº†å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚ vue-cli 2.0ï¼Œè¿™ä¸ª`zce-cli`åŸºæœ¬è·Ÿ vue-cli å·®ä¸å¤šï¼Œåªä¸è¿‡æœ‰äº›éƒ¨åˆ†å°å°çš„å®ç°ä¸ä¸€æ ·ç½¢äº†

è€Œ vue-cli 3.0 å°±å¼€å§‹è¿™é’ˆå¯¹ä¸é¡¹ç›®æœ¬èº«çš„è„šæ‰‹æ¶ï¼Œæ”¾å¼ƒäº†é€šç”¨æ€§æ¨¡æ¿

åæœŸè¯¾ç¨‹æ˜¯è®²å¦‚ä½•ç”¨ node å»å¼€å‘ webï¼Œè€Œä¸æ˜¯å¦‚ä½•ç”¨ node

æ€»ä¹‹ï¼Œä½ ç›®å‰å­¦ä¹  nodeï¼Œå°±æ˜¯ææ˜ç™½å®ƒèƒ½å¹²å•¥ï¼Œç„¶åä½ æœ‰ä¸€äº›ç‰¹å®šéœ€æ±‚çš„æ—¶å€™ï¼Œå°±å»æŸ¥ node å¦‚ä½•å»å®ç°æˆ‘è¿™æ ·çš„ä¸€äº›éœ€æ±‚ -> **é’ˆå¯¹æ€§åœ°å­¦ä¹ ï¼Œä¸è¦ç›´æ¥çœ‹æ–‡æ¡£å»å­¦**ï¼Œè€å¸ˆä¹Ÿçœ‹ä¸è¿›å»æ–‡æ¡£

![æœ¬åœ°](assets/img/2021-11-05-16-18-13.png)

---

ğŸ’¡ï¼šx-pages å®ƒæœ‰ä¸€ä¸ª`data`ç›®å½•ï¼Ÿ

> [zce/pages-boilerplate at x-pages](https://github.com/zce/pages-boilerplate/tree/x-pages)

![data](assets/img/2021-11-05-17-21-20.png)

è¿™ä¸ª`data`æ”¾çš„æ˜¯æˆ‘éœ€è¦çš„å…¨å±€æ•°æ® -> è€ƒè™‘åˆ°æœ‰å†™äººå–œæ¬¢`json`æ•°æ®ï¼Œé‚£å¯ä»¥åœ¨`data`ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`json`æ–‡ä»¶

å¦‚æœä½ å–œæ¬¢ç”¨`js`å»æ•°æ®ï¼Œé‚£ä½ å¯ä»¥é€šè¿‡ä¸€äº›é€»è¾‘å»è‡ªåŠ¨ç”Ÿæˆæ•°æ®

å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å†™`yml`æ–‡ä»¶ -> è·Ÿ `json` æ€§è´¨ä¸€æ ·ï¼Œåªä¸è¿‡æ ¼å¼ä¸ä¸€æ · -> ä¸€ä¸ªæ•°ç»„é‡Œè¾¹åµŒä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå¯¹è±¡é‡Œè¾¹æœ‰`name`ç­‰è¿™æ ·çš„`key`

![yml](assets/img/2021-11-05-17-25-35.png)

`yml`æ¯”`json`æœ‰ä¸€ä¸ªå¥½å¤„ -> `yml`çš„å†…å®¹æ›´å¥½é˜…è¯»ã€ä¹Ÿæ›´å®¹æ˜“ç¼–å†™

å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å†™ä¸€äº›æ•°æ®æ–‡ä»¶æˆ–è€…é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬éƒ½ä¼šä½¿ç”¨`yml`è¿™ç§å½¢å¼

è¿™ä¸ªåŠŸèƒ½æœ€åå®ç°çš„æ˜¯ï¼ŒæŠŠè¿™ä¸ª`data`ç›®å½•ä¸‹çš„æ‰€æœ‰çš„æ–‡ä»¶æ ¹æ®æ–‡ä»¶åï¼Œä¹Ÿå°±æ˜¯`menus.yml`çš„`menus`å¯¹åº”ç€ä¸€ä¸ª`menus`å±æ€§ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡è¿™ä¸ª`menus.xxx`å¯ä»¥è¯»å–åˆ°æ•°æ®

`data`ä¹‹æ‰€ä»¥è¿™æ ·åšæ˜¯ç»è¿‡è€ƒè™‘çš„ï¼Œä¸æ˜¯ç©ºç©´æ¥é£çš„ -> æœ‰çš„æ—¶å€™æˆ‘ä»¬å†™ä¸€äº›é™æ€é¡µé¢ï¼Œéœ€è¦ä¸€äº›çš„æ–‡å­—å•¥çš„ç»™é…ç½®åŒ– -> æˆ‘ä»¬åœ¨æ¨¡æ¿æ–‡ä»¶é‡Œè¾¹ä½¿ç”¨

![æ•°æ®é…ç½®åŒ–](assets/img/2021-11-05-17-33-13.png)

è¿™ä¸ª`data`æ˜¯ä»€ä¹ˆæ—¶å€™å»ç”¨çš„å‘¢ï¼Ÿ

> [x-pages/data.js at master Â· zce/x-pages](https://github.com/zce/x-pages/blob/master/lib/data.js)

`x-pages`å·²ç»æŠŠ Gulp åŒ…è¿›æ¥äº†

![è¯» data](assets/img/2021-11-05-17-40-18.png)

è¿™ä¸ª`swig`æ¨¡æ¿å¼•è°ƒç”¨äº†`data`

![å¤„ç† data](assets/img/2021-11-05-17-45-44.png)

å¦‚æœä½ èƒ½æƒ³åˆ°è¿™æ ·å¤„ç†çš„ä¸€ä¸ªç‚¹ï¼Œå…¶ä»£ç å®ç°å…¶å®å¾ˆç®€å•ï¼Œæ¯”å†™å¤æ‚çš„ç•Œé¢åŠ¨æ•ˆã€vue ç»„ä»¶ç­‰éƒ½è¦ç®€å•å¾ˆå¤š -> å…¶å®å†™ node æ¯”å†™å‰ç«¯ç®€å•

å…³äº`data`çš„è®¾è®¡å°±æ˜¯è¿™æ ·ï¼Œå…¶å®ƒçš„è·Ÿæˆ‘ä»¬åœ¨è¯¾ä¸Šè®²çš„å·®ä¸å¤š

> ä»¥å‰ç»å¸¸å†™ä¸€äº›é™æ€é¡µï¼Œæ‰€ä»¥å°±æƒ³ç”¨ä¸€ä¸ªå·¥å…·å°±æŠŠæˆ‘è¿™ä¸ªé™æ€é¡µçš„å¼€å‘è¿‡ç¨‹åšå¾—æ›´ç®€å•ä¸€äº› -> äºæ˜¯å°±æœ‰äº†`x-pages`

æœ‰äººé—®ï¼Œè¿™ä¸ª`lint` ä»»åŠ¡å¦‚ä½•å®ç°ï¼Ÿ -> ç¬¬äºŒä¸ªæ¨¡å—ä¼šè®²

![lint](assets/img/2021-11-05-17-51-24.png)

---

è¯¾åä»»åŠ¡ï¼šå¥½å¥½çœ‹ä¸€ä¸‹è¿™ä¸ª`zce-cli` -> ç”¨ TS é‡å†™çš„ç‰ˆæœ¬`caz`

> [zce/caz: A simple yet powerful template-based Scaffolding tools.](https://github.com/zce/caz)

![caz](assets/img/2021-11-05-18-29-45.png)

æƒ³æ‰¾ä»€ä¹ˆæ¡ˆä¾‹ï¼Œå¯ä»¥ä»“é è€å¸ˆçš„ Githubï¼Œè¿™é‡Œè¾¹æœ‰ä¸€å¤§å † -> è¿™å¾—çœ‹ä½ ä¼šä¸ä¼šæ‰¾äº†

ğŸ’¡ï¼š`parser`æ˜¯ä»€ä¹ˆï¼Ÿ

è½¬æ¢å™¨

`json`æ–‡ä»¶å’Œ`js`æ–‡ä»¶å¯ä»¥é€šè¿‡`require`çš„æ–¹å¼ç›´æ¥è½½å…¥ï¼Œè€Œ`yml`æ–‡ä»¶åˆ™ä¸èƒ½ -> å¿…é¡»é€šè¿‡ä¸€ä¸ªä¸“é—¨çš„åº“å»å¤„ç†å®ƒ

æ€»ä¹‹ï¼Œæˆ‘ä»¬æ˜¯æ ¹æ®è¯»å–æ¥çš„æ–‡ä»¶æ‰©å±•åæ˜¯ä»€ä¹ˆï¼Œå†å†³å®šæˆ‘ä»¬ç”¨ä»€ä¹ˆè½¬æ¢å™¨ -> è¿™è·Ÿ webpack çš„ loader æ¦‚å¿µæ˜¯ä¸€æ ·çš„ -> ä¼šå˜é€šçš„å“ˆï¼

ğŸ’¡ï¼šå…³äºå¹´é¾„å’Œè‡ªå·±èœçš„å€Ÿå£ï¼Ÿ

è¿™ä¸ªäººæŠ€æœ¯å¾ˆå¼ºï¼Ÿ

å¹´é¾„å¤§ -> ä»–èŠ±æ—¶é—´å¤šï¼Œè¿™å¾ˆæ­£å¸¸

å¹´é¾„å° -> ä»–æ¯”æˆ‘èªæ˜ï¼Œè¿™å¾ˆæ­£å¸¸

ğŸ’¡ï¼šå­¦ä¹ å¦‚ä½•åœ¨ Issues ä¸Šè·Ÿäººäº¤æµï¼Ÿ

å…ˆå°è¯•ï¼Œè¢«åˆ«äººéª‚ä¸¤å¥ä¹Ÿæ²¡äº‹å„¿ -> æŠŠè¦æŠŠäººå®¶çš„ Issues å½“åšæ˜¯ è´´å§ï¼Œç„¶ååœ¨é‡Œè¾¹çŒæ°´ï¼Œä¹Ÿä¸è¦å»å‘ä¸­æ–‡çš„ä¸œè¥¿ï¼Œä½ å‘ä¸­æ–‡çš„ï¼Œäººå®¶å¯ä¸ä¼šæ­ç†ä½ ï¼

ğŸ’¡ï¼šä¸è¦æ‹…å¿ƒè€å¸ˆè®²çš„è¯¾ç•™ä¸€æ‰‹

æœ‰äº›å†…å®¹é€‚åˆè¿™ä¸ªé˜¶æ®µè®²ï¼Œæœ‰äº›åˆ™ä¸æ˜¯ï¼Œå¾—åˆ°ä¸‹ä¸€ä¸ªé˜¶æ®µè®²

### <mark>10ï¼‰Node.js çš„å®šä½</mark>

> ä»¥ä¸‹æ¯å¥è¯è€å¸ˆéƒ½æœ‰å¥½å¥½æ–Ÿé…Œ

è¿™ä¸‹è¾¹çš„å†…å®¹å¤§æ¦‚æ˜¯ï¼š

- ä¸€ä¸ªå¹³å°èƒ½å¹²å•¥ï¼Ÿ
- å¹³å°è·Ÿè¯­è¨€çš„å…³ç³»ï¼Ÿ
- å¹³å°çš„è¿™ä¸ªç»“æ„ï¼Ÿ
- node çš„å®é™…åº”ç”¨åœºæ™¯ -> åšä¸€ä¸ªæ¥å£çš„ mock

ä¼š node ä¹‹åï¼Œä½ å°±ä¼šå‘ç°å¼€å‘å¦‚æ­¤å®¹æ˜“

#### <mark>1ã€Node æ˜¯ä»€ä¹ˆï¼Ÿ</mark>

æ¡†æ¶ï¼Ÿåº“ï¼Ÿè¯­â¾”ï¼Ÿ

~~æ¡†æ¶ï¼Œåº“ï¼Œè¯­è¨€~~ ç»Ÿç»Ÿéƒ½ä¸æ˜¯

**Node.js æ˜¯ä¸€ä¸ª JavaScript è¿è¡Œå¹³å° / è¿è¡Œæ—¶ã€‚**

#### <mark>2ã€ä»€ä¹ˆæ˜¯ï¼ˆè¿è¡Œï¼‰å¹³å° / è¿è¡Œæ—¶ï¼Ÿ</mark>

> è¿è¡Œæ—¶é€šä¿—æ¥è¯´å°±æ˜¯è¿è¡Œç¯å¢ƒï¼Œæˆ‘ä»¬æ‰€å¼€å‘çš„åº”ç”¨ç¨‹åºå¤§éƒ½è¿è¡Œåœ¨æŸä¸ªè¿è¡Œç¯å¢ƒä¹‹ä¸Šã€‚

![è½¯ä»¶æ¶æ„](assets/img/2021-11-05-18-34-36.png)

![åŸºäºå¹³å°å¼€å‘](assets/img/2021-11-05-18-39-14.png)

![åŸºäº OS å¼€å‘](assets/img/2021-11-05-18-40-01.png)

å¹³å°ä¸€èˆ¬å°±æ˜¯æŒ‡ä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨æŸä¸€é—¨æŒ‡å®šçš„ç¼–ç¨‹è¯­è¨€ï¼ŒåŸºäºè¿™ä¸ªç¯å¢ƒå¼€å‘åº”ç”¨ã€‚

æ¢ä¸ªè§’åº¦æ¥è¯´**å¹³å°å°±æ˜¯ä¸ºç¼–ç¨‹è¯­è¨€ã€Œèµ‹èƒ½ã€ï¼Œè®©ç¼–ç¨‹è¯­è¨€å…·å¤‡å®é™…ã€Œèƒ½åŠ›ã€**ã€‚

ä¸¾ä¾‹æ¥è¯´ï¼š

- Web åº”ç”¨ï¼šä»£ç  -> React -> Browser -> Windows
- Node åº”ç”¨ï¼šä»£ç  -> Express -> Node.js -> Linux

![Web åº”ç”¨](assets/img/2021-11-05-18-40-50.png)

![JavaScript](assets/img/2021-11-05-18-43-24.png)

![Node.js åº”ç”¨](assets/img/2021-11-05-18-41-09.png)

![Node.js](assets/img/2021-11-05-18-43-54.png)

#### <mark>3ã€Node.js å¯ä»¥åšä»€ä¹ˆï¼Ÿ</mark>

å¹³å°çš„ä½œç”¨å°±æ˜¯æä¾›èˆå°ï¼Œæ‰€ä»¥ç†è®ºä¸Šå¹³å°æ²¡æœ‰ç»å¯¹åªèƒ½å¹²ä»€ä¹ˆçš„è¯´æ³•ã€‚

ä½†æ˜¯ä¸åŒçš„å¹³å°åœ¨æä¾› APIs ä¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½å¤Ÿåšçš„äº‹æƒ…ä¹Ÿä¸åŒã€‚

ä¾‹å¦‚ï¼šæµè§ˆå™¨ä½œä¸ºä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œæˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ JavaScript æ“ä½œç•Œé¢ä¸Šçš„ DOM å…ƒç´ ï¼Œä½†æ˜¯æ²¡æœ‰åŠæ³•é€šè¿‡ JavaScript ä»£ç å®ç°ç”¨æˆ·æœ¬åœ°ç£ç›˜æ–‡ä»¶çš„è¯»å†™ã€‚

è€Œä¸”æ¯ä¸ªå¹³å°éƒ½æœ‰å„è‡ªçš„ç‰¹ç‚¹ï¼Œè¿™äº›ç‰¹ç‚¹å†³å®šäº†å®ƒæ›´é€‚åˆåšä»€ä¹ˆäº‹æƒ…ã€‚

- ä»æŠ€æœ¯è§’åº¦æ¥è¯´ Node.js å¹³å°çš„ç‰¹ç‚¹æ˜¯éé˜»å¡ IOï¼Œæ‰€ä»¥é€‚åˆå¤„ç†é«˜å¹¶å‘è¯·æ±‚ã€‚
- ä»äººå‘˜è§’åº¦æ¥è¯´ Node.js å¹³å°é‡‡ç”¨çš„è¯­è¨€æ˜¯ JavaScriptï¼Œæ‰€ä»¥é€‚åˆå‰ç«¯å¼€å‘è€…ä½¿ç”¨ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼š

- Node.js é€‚åˆå¼€å‘æœåŠ¡å™¨ç«¯çš„åº”ç”¨å±‚ï¼ˆBFFï¼‰
  
  ![BBF](assets/img/2021-11-05-18-53-49.png)
  
- Node.js é€‚åˆâ½¤äºå¼€å‘å‰ç«¯â½…å‘çš„å„ç§â¼¯å…·
  - è„šæ‰‹æ¶å·¥å…·
  - è‡ªåŠ¨åŒ–å·¥å…·
  - æ„å»º / æ‰“åŒ…å·¥å…·
  - æœ¬åœ°æµ‹è¯•å·¥å…·
  - ...

#### <mark>4ã€å®é™…åœºæ™¯ä¸¾ä¾‹ï¼Ÿ</mark>

![åœºæ™¯ä¸¾ä¾‹](assets/img/2021-11-05-18-55-38.png)

> Mock æœåŠ¡
