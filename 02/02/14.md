### ✍️ Tangxt ⏳ 2021-11-19 🏷️ 直播

# 14-Issue、脚手架、Webpack

## ★Issue

如何描述一个 Issue -> 请教别人，先把问题描述清楚，不要让别人去猜你这个问题到底是什么 -> 千万不要抛一个截图给人家就完事儿了

![Issues](assets/img/2021-11-19-22-15-19.png)

``` md
# Question: 简明的标题

## 正在学习的内容

<!-- 给出你正在学习的课程视频链接。非课程内问题，请单独说明。 -->

## 遇到的问题

<!-- 描述清楚你所遇到的问题和你想要达到的目标，尽量不要让我猜测你的意图，谢谢。 -->

## 重现步骤

<!-- 如何重现你所遇到的问题。 -->

## 你目前的状态

<!-- 如果可以，简单介绍一下你目前是在读书还是已经工作、工作方向和年头、储备知识掌握程度，我了解这些仅仅是为了更好的给你反馈。 -->

## 额外的描述

<!-- 其他任何有关的描述，尽量详细。 -->
```

> <https://github.com/lagoufed/fed-e-001/issues/new/choose>

## ★问题

1）关于脚手架生成文件的问题

覆盖 webpack 默认配置：

- `vue-cli`：[webpack 相关 - Vue CLI](https://cli.vuejs.org/zh/guide/webpack.html#%E7%AE%80%E5%8D%95%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F) -> 推荐使用链式操作`chainWebpack` -> 配置合并用到` webpack-merge`
- `create-react-app` 可以在项目根目录执行 `eject script`，提取内置配置，详细参考：<https://create-react-app.dev/docs/available-scripts#npm-run-eject> -> 把配置和依赖弹到根目录

``` bash
npx create-react-app my-app
npm init react-app my-app
yarn create react-app my-app
```

![cra](assets/img/2021-11-19-23-38-41.png)

> 在封装脚手架时，需要考虑 -> 把模板中用到的依赖给包装一层，让模板依赖所包装的模块（让模板依赖不变的东西） -> 说白了，就是把变化的给提取出来，让很多项目都依赖这个通用的东西，通用的东西变化了，本地的项目可以更新这个东西

➹：[关于创建 React App 的 8 个有趣事实 - 知乎](https://zhuanlan.zhihu.com/p/143112812)

2）关于单页和多页的问题

- MPA：早期的都是一个点开一个地址，打开一个页面，一个页面诞生，另一个页面销毁 -> 网易云音乐的 PC 版在切换菜单时单页体验，毕竟得要让正在听的音乐不被销毁哈！、拉钩教育就是多页：<https://kaiwu.lagou.com/>，点开一个链接就是一个页面，不过有局部单页
- SPA：MPA 的进阶版 -> 做 H5（前端技术用在移动端）时常用 -> 商城一般都是整体多页，局部单页，毕竟单页对用户体验上更好、更丝滑

总之，一般情况都是混合用的！

活动页、专题页、落地页 -> 适合 MPA -> 因为这种页面需求很多，更新很快，每个月都会有 -> 很简单的 h5 活动页，每隔一段时间会增加一个，这就是多页面做法，不可能用单页面做法的，毕竟还得考虑 SEO 的问题

从业务出发，决定用单页还是多页，而不是说从技术出发，比如用 Vue 这个技术，我要用单页还是多页，一般肯定选择是单页了，但如果我的业务是一些活动页呢？显然得是多页了

💡：之前搞 MPA 碰到一个问题 -> 10 多个页面在 `build`时，内存不足了，所以我该怎么办呢？

- 第一种办法：以时间换空间 -> 先打包 5 个页面，再打包 5 个页面
- 第二种办法：按需打包 -> 比如活动页，有些活动页已经失去效应的，也就是说我们不会再去动它们的代码了，所以我们不应该在打包新的活动页时也把旧的活动页也给打包了 -> 我们可以在 webpack 里边定义一个数组 -> 这个数组里边的元素就是我们此次要打包的页面目录 -> webpack 配置内容会根据数组元素动态生成配置

💡：SPA 路由动态导入模块和多页分包有什么区别啊？

它们俩没关系，不管是动态导入，还是分多页的这种打包方式，都可以形成代码的拆分 -> 不用从技术的角度去考虑我要使用动态导入还是多页，而是从业务的角度去考虑，如我现在要做多页应用，那我就用多页的方式去打包，如果我现在要做单页应用，要通过代码拆分去优化我的应用的性能的话，那就使用动态导入呗

![多页打包](assets/img/2021-11-20-01-51-15.png)

![配置 1](assets/img/2021-11-20-01-52-30.png)

![配置 2](assets/img/2021-11-20-01-53-01.png)

💡：`chunk` 和 `bundle` 怎么用文字去描述？

用图文描述就是：

![图文](assets/img/2021-11-20-01-39-58.png)

💡：增量发布？

> 这种多页应用，只修改一个 h5 页面，但是在 jekins 持集成的时会打包所有的 h5 页面，然后部署，这会覆盖没有修改的 h5 页面

不是重新覆盖，而是增量部署

技术专题会讲 -> 该问题很有代表性

➹：[大家都是，怎么做前端项目的 增量部署 的？ - 知乎](https://www.zhihu.com/question/319667644)

➹：[Jenkins、hudson 如何实现增量发布？ - 知乎](https://www.zhihu.com/question/39381998)

➹：[★大公司里怎样开发和部署前端代码？ - 知乎](https://www.zhihu.com/question/20790576)

3）关于不同环境下的环境变量？

