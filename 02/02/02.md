### âœï¸ Tangxt â³ 2021-11-08 ğŸ·ï¸ ES Modules

# 02-ES Modules ç‰¹æ€§ã€ES Modules å¯¼å‡º

## â˜…ES Modules ç‰¹æ€§

![ES Modules](assets/img/2021-11-08-18-51-19.png)

å¯¹äº ES Modules çš„å­¦ä¹ ï¼Œæˆ‘ä¸ªäººè§‰å¾—å¯ä»¥ä»ä¸¤ä¸ªç»´åº¦å»å…¥æ‰‹ã€‚

é¦–å…ˆæˆ‘ä»¬å¿…é¡»è¦å»äº†è§£å®ƒä½œä¸ºä¸€ä¸ªè§„èŒƒæˆ–è€…è¯´æ ‡å‡†ï¼Œå®ƒåˆ°åº•**çº¦å®šäº†å“ªäº›ç‰¹æ€§å’Œè¯­æ³•**ã€‚

å…¶æ¬¡å°±æ˜¯æˆ‘ä»¬å¦‚ä½•é€šè¿‡ä¸€äº›å·¥å…·æˆ–è€…æ–¹æ¡ˆå»è§£å†³å®ƒåœ¨è¿è¡Œç¯å¢ƒå½“ä¸­**å…¼å®¹æ€§**æ‰€å¸¦æ¥çš„é—®é¢˜ã€‚

é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€èµ·å…ˆæ¥æ¢³ç†ä¸€ä¸‹ ES Modules å½“ä¸­çš„ä¸€äº›è¯­æ³•ç‰¹æ€§ã€‚

1ï¼‰åŸºæœ¬ä½¿ç”¨

æˆ‘ä»¬å›åˆ° VS Code å½“ä¸­å»å°è¯•ä½¿ç”¨ä¸€ä¸‹è¿™äº›ç‰¹æ€§ã€‚

æ­£å¦‚ä¹‹å‰æ‰€è¯´çš„ï¼Œç›®å‰å¸‚é¢ä¸Šç»å¤§å¤šæ•°çš„æµè§ˆå™¨å·²ç»æ”¯æŒ ES Modules äº†ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ç»™é¡µé¢å½“ä¸­çš„ `script` æ ‡ç­¾å»æ·»åŠ ä¸€ä¸ª `type` ä¸º `module` çš„ä¸€ä¸ªå±æ€§ï¼Œç„¶åï¼Œè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å»ä½¿ç”¨ ES Modules çš„æ ‡å‡†å»æ‰§è¡Œè¿™ä¸ªå½“ä¸­çš„ä¸€äº› JavaScript ä»£ç äº†ï¼Œé‚£æˆ‘ä»¬è¿™é‡Œå…ˆæ¥å°è¯•ä¸€ä¸‹ã€‚

![ç®€å•æµ‹è¯•](assets/img/2021-11-08-23-36-19.png)

æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª `script` æ ‡ç­¾ï¼Œæˆ‘ä»¬æŠŠå®ƒçš„ `type` è®¾ç½®ä¸º`module`ã€‚é‚£è¿™æ ·çš„è¯ï¼Œè¿™ä¸ªæ ‡ç­¾çš„å†…éƒ¨å°±ç®—æ˜¯ä¸€ä¸ªæ¨¡å—äº†ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ¨¡å—å½“ä¸­å…ˆé€šè¿‡ `console.log()` å»è¾“å‡ºä¸€ä¸ªç®€å•çš„å†…å®¹ï¼Œç„¶åæˆ‘ä»¬æ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯ã€‚

åœ¨è¿™é‡Œæˆ‘ä½¿ç”¨ä¸€ä¸ªå«åš `serve` çš„ä¸€ä¸ª npm çš„å·¥å…·å»å¯åŠ¨ä¸€ä¸ª HTTP Server -> å¯åŠ¨è¿‡åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™ä¸ªåœ°å€å»æ‰“å¼€æˆ‘ä»¬åˆšåˆšçš„è¿™ä¸ªé¡µé¢ã€‚

![serve](assets/img/2021-11-08-23-36-56.png)

æ‰“å¼€é¡µé¢è¿‡åï¼Œæˆ‘ä»¬å»å¯åŠ¨ä¸€ä¸‹ Chrome çš„è°ƒè¯•å·¥å…·ï¼Œæˆ‘ä»¬æ‰“å¼€ä¸€ä¸ª`Console` è¿™ä¸ªé¢æ¿ã€‚é‚£è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±èƒ½çœ‹åˆ°æˆ‘ä»¬åˆšåˆšè¿™ä¸ªè„šæœ¬çš„æ­£å¸¸æ‰§è¡Œäº†ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€`script`æ ‡ç­¾é€šè¿‡ `type` è®¾ç½®ä¸º`module`è¿‡åï¼Œå®ƒä»ç„¶å¯ä»¥æ­£å¸¸ä½œä¸º JS å»æ‰§è¡Œã€‚

åªä¸è¿‡è¿™ç›¸å¯¹äºæ™®é€šçš„ `script` æ ‡ç­¾æ¥è¯´ï¼Œå®ƒä¼šæœ‰ä¸€äº›æ–°çš„ç‰¹æ€§ã€‚

æˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸€ä¸‹ã€‚

2ï¼‰è‡ªå¸¦ä¸¥æ ¼æ¨¡å¼

![ä¸¥æ ¼æ¨¡å¼](assets/img/2021-11-08-23-43-01.png)

> æ²¡æœ‰`type="module"`çš„`script`æ ‡ç­¾ä¹Ÿæ˜¯ HTML æ ‡ç­¾

é¦–å…ˆç¬¬ä¸€ä¸ªç‰¹æ€§å°±æ˜¯æˆ‘ä»¬åœ¨ ES Modules å½“ä¸­ï¼Œå®ƒä¼šè‡ªåŠ¨å»é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œå¿½ç•¥ä½ å»ä½¿ç”¨ `use strict;` è¿™ç§æ–‡ä»¶å¤´çš„æ–¹å¼å»å£°æ˜ä¸¥æ ¼æ¨¡å¼ã€‚è¯´ç™½äº†ï¼Œä½ ä¸åŠ  `use strict;`ï¼Œå®ƒä¹Ÿæ˜¯ä¸¥æ ¼æ¨¡å¼ã€‚

ä¸¥æ ¼æ¨¡å¼å½“ä¸­æœ‰ä¸€ä¸ªä»£è¡¨ -> é‚£å°±æ˜¯æˆ‘ä»¬ä¸èƒ½åœ¨å…¨å±€èŒƒå›´ç›´æ¥å»ä½¿ç”¨ `this`ï¼Œå› ä¸ºåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹é¢ï¼Œ `this` å®ƒå®é™…ä¸ŠæŒ‡å‘çš„æ˜¯å…¨å±€å¯¹è±¡ã€‚æˆ‘ä»¬æŠŠ `type="module"` åˆ é™¤æ‰å›åˆ°æµè§ˆå™¨å½“ä¸­ï¼Œè¿™æ—¶å€™ä½ å¯ä»¥çœ‹åˆ° `this` æ‰“å°å‡ºæ¥çš„å®é™…ä¸Šå°±æ˜¯ `window` å¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬é€šè¿‡æ·»åŠ  `type="module"` çš„è¯ï¼Œä½ å°±ä¼šå‘ç°å®ƒæ˜¯ä¸€ä¸ª `undefined` -> è¿™æ˜¯å®ƒçš„ç¬¬ä¸€ä¸ªç‰¹æ€§ã€‚

3ï¼‰å•ç‹¬çš„ç§æœ‰ä½œç”¨åŸŸ

![ç§æœ‰ä½œç”¨åŸŸ](assets/img/2021-11-08-23-49-10.png)

ç¬¬äºŒä¸ªç‰¹æ€§å°±æ˜¯æ¯ä¸€ä¸ª ES Modules å®ƒéƒ½æ˜¯è¿è¡Œåœ¨å•ç‹¬çš„ç§æœ‰ä½œç”¨åŸŸå½“ä¸­ã€‚

è¿™å…·ä½“æ¥çœ‹å°±æ˜¯æˆ‘ä»¬å†å•ç‹¬å»æ·»åŠ ä¸€ä¸ª `script` æ ‡ç­¾ï¼Œæˆ‘ä»¬æŠŠ`type`åŒæ ·è®¾ç½®ä¸º`module`ã€‚

åœ¨è¿™ä¸ª `script` å½“ä¸­ï¼Œæˆ‘ä»¬å»æ·»åŠ ä¸€ä¸ªç”¨ `var` å£°æ˜çš„ `foo` å˜é‡ï¼Œæˆ‘ä»¬æ·»åŠ å®Œäº†è¿‡åç´§æ¥ç€æŠŠå®ƒæ‰“å°å‡ºæ¥ã€‚

ç„¶åæˆ‘ä»¬å†å»æ·»åŠ ä¸€ä¸ªæ–°çš„ `script` æ ‡ç­¾ã€‚æœ‰äº†è¿™ä¸ª `script` æ ‡ç­¾è¿‡åï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªé‡Œé¢åŒæ ·å†å»æ‰“å°ä¸€ä¸‹ `foo`ï¼Œç„¶åæˆ‘ä»¬å›åˆ°æµè§ˆå™¨å½“ä¸­ã€‚

è¿™æ—¶å€™ä½ ä¼šå‘ç°æˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ª`script`æ ‡ç­¾å½“ä¸­å¯ä»¥æ­£å¸¸æ‰“å°å‡ºæ¥è¿™ä¸ª `100`ã€‚ä½†æ˜¯åœ¨ç¬¬äºŒä¸ªæ ‡ç­¾å½“ä¸­ï¼Œå®ƒå»æ‰“å°è¿™ä¸ª `foo` å°±æŠ¥é”™äº†ï¼ŒæŠ¥é”™ä¿¡æ¯è¯´çš„æ˜¯ `foo is not defined` -> è¿™ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬æ¯ä¸€ä¸ª ES Modules å®ƒéƒ½æ˜¯æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç§æœ‰ä½œç”¨åŸŸï¼Œé‚£æˆ‘ä»¬ä¹Ÿå°±ä¸ç”¨å†æ‹…å¿ƒæˆ‘ä»¬ç›´æ¥åœ¨å…¨å±€èŒƒå›´å»ä½¿ç”¨é‚£äº›å˜é‡ï¼Œä¼šé€ æˆå…¨å±€ä½œç”¨åŸŸæ±¡æŸ“çš„é—®é¢˜ã€‚

4ï¼‰CORS çš„è¯·æ±‚å§¿åŠ¿

![CORS](assets/img/2021-11-09-00-04-13.png)

> è‡ªå¸¦ Ajaxã€Fetch ç‰¹æ€§

ç¬¬ä¸‰ä¸ªç‰¹æ€§å°±æ˜¯åœ¨ ES Modules å½“ä¸­ï¼Œæˆ‘ä»¬çš„å¤–éƒ¨ JS æ–‡ä»¶æ˜¯é€šè¿‡ CORS çš„æ–¹å¼å»è¯·æ±‚çš„ï¼Œé‚£ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬çš„ JS æ¨¡å—å¦‚æœè¯´ä¸åœ¨åŒæºåœ°å€ä¸‹é¢çš„è¯ï¼Œç„¶åæˆ‘ä»¬éœ€æ±‚å»è¯·æ±‚è¿™ä¸ªæœåŠ¡ç«¯åœ°å€ï¼Œé‚£å®ƒåœ¨å“åº”çš„å“åº”å¤´å½“ä¸­å¿…é¡»è¦æä¾›æœ‰æ•ˆçš„ CORS æ ‡å¤´ -> è¿™é‡Œæˆ‘ä»¬é€šè¿‡ç™¾åº¦ CDN çš„åœ°å€åšä¸€ä¸ªå°è¯• -> è¿™ä¸ªåœ°å€æ˜¯ä¸æ”¯æŒ CORS çš„ã€‚æˆ‘ä»¬å»è¯·æ±‚çš„æ—¶å€™ä¼šå‘ç°å®ƒä¼šæŠ¥ä¸€ä¸ªè·¨åŸŸçš„é”™è¯¯ã€‚è€Œä¸”åœ¨ Network é¢æ¿å½“ä¸­æˆ‘ä»¬ä¹Ÿä¼šå‘ç°è¿™æ ·ä¸€ä¸ªè¯·æ±‚å®é™…ä¸Šæ˜¯è¢«æµè§ˆå™¨ç»ˆæ­¢æ‰äº†ã€‚

æ‰€ä»¥è¯´å¦‚æœä½ è¦å»è¯·æ±‚ä¸€ä¸ªå¤–éƒ¨åœ°å€çš„è¯ï¼Œé‚£å°±éœ€è¦æ³¨æ„æœåŠ¡ç«¯å¿…é¡»è¦æ”¯æŒ CORS -> è¿™é‡Œæˆ‘ä»¬å†æ¢åšä¸€ä¸ªæ”¯æŒ CORS çš„ä¸€ä¸ªæœåŠ¡ç«¯åœ°å€ã€‚é‚£è¿™ä¸ªæ—¶å€™ä½ ä¼šå‘ç°è¿™ä¸€æ¬¡å¯¹äº jQuery è¿™ä¸ªæ–‡ä»¶çš„è¯·æ±‚å®ƒæ˜¯ä¸€ä¸ªæ­£å¸¸çš„è¯·æ±‚ã€‚

å¦å¤–ï¼ŒCORS ä¸æ”¯æŒæ–‡ä»¶çš„å½¢å¼å»è®¿é—®ï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬å¿…é¡»è¦ä½¿ç”¨ HTTP Server çš„å½¢å¼å»è®©è¿™ä¸ªé¡µé¢å·¥ä½œèµ·æ¥ -> è¿™ä¸ªé—®é¢˜å®é™…ä¸Šåœ¨æˆ‘ä»¬å®é™…å¼€å‘çš„æ—¶å€™ä¸ä¼šé‡åˆ°ï¼ŒåŸå› å¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å®é™…å¼€å‘çš„æœ€ç»ˆè¿è¡Œç¯å¢ƒè‚¯å®šéƒ½æ˜¯ HTTP çš„ Server

ğŸ’¡ï¼šå…³äºè·¨åŸŸï¼Ÿ

![è·¨åŸŸ](assets/img/2021-11-09-00-10-13.png)

â¹ï¼š[è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—](https://www.ruanyifeng.com/blog/2016/04/cors.html)

5ï¼‰è‡ªå¸¦ `defer`

æˆ‘ä»¬å†æ¥çœ‹ç¬¬å››ä¸ªå°ç‰¹æ€§ï¼Œç¬¬å››ä¸ªç‰¹æ€§æ˜¯ ES Modules å½“ä¸­çš„ `script` æ ‡ç­¾ï¼Œå®ƒä¼šè‡ªåŠ¨çš„å»å»¶è¿Ÿæ‰§è¡Œè„šæœ¬ã€‚

è¿™ä¸€ç‚¹ç­‰åŒäºæˆ‘ä»¬`script`æ ‡ç­¾çš„ `defer` å±æ€§ã€‚é‚£ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬é€šè¿‡æ·»åŠ `type="module"`å°±ç›¸å½“äºå»æ·»åŠ äº†ä¸€ä¸ª `defer` å±æ€§ -> æˆ‘ä»¬åº”è¯¥ä¹ŸçŸ¥é“ï¼Œç½‘é¡µçš„åŠ è½½è¿‡ç¨‹é»˜è®¤å¯¹`script`æ ‡ç­¾å®ƒæ˜¯é‡‡ç”¨ç«‹å³æ‰§è¡Œçš„è¿™æ ·ä¸€ä¸ªæœºåˆ¶ï¼Œé‚£é¡µé¢çš„æ¸²æŸ“ä¼šç­‰å¾…è¿™ä¸ªè„šæœ¬çš„æ‰§è¡Œå®Œæˆï¼Œæ‰ä¼šç»§ç»­å»å¾€ä¸‹æ¸²æŸ“ã€‚

åœ¨è¿™é‡Œæˆ‘ä»¬å°è¯•æ·»åŠ ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼ˆ`demo.js`ï¼‰æ¥å»è¯•éªŒä¸€ä¸‹

``` js
// demo.js
alert('hello')
```

æˆ‘ä»¬åœ¨è¿™ä¸ªæ–‡ä»¶å½“ä¸­é€šè¿‡ `alert` å»æ¨¡æ‹Ÿä¸€ä¸‹è¿™ä¸ªè„šæœ¬å½“ä¸­çš„ä¸€ä¸ªé˜»å¡çš„æ“ä½œã€‚ç„¶åæˆ‘ä»¬å›åˆ°é¡µé¢ï¼ˆHTMLï¼‰å½“ä¸­ï¼Œåœ¨è¿™ä¸ªè„šæœ¬çš„ä¸‹é¢å†å»æ·»åŠ ä¸€äº›éœ€è¦æ˜¾ç¤ºçš„å†…å®¹ï¼Œæœ‰äº†è¿™äº›è¿‡åæˆ‘ä»¬å°±å¯ä»¥å›åˆ°æµè§ˆå™¨ã€‚

![é¡µé¢](assets/img/2021-11-09-00-50-23.png)

æ­¤æ—¶åœ¨æµè§ˆå™¨å½“ä¸­å»åˆ·æ–°è¿™ä¸ªé¡µé¢ï¼Œä½ ä¼šå‘ç°å¼¹å‡ºå¯¹è¯æ¡†çš„æ—¶é—´ï¼Œè€Œæˆ‘ä»¬é‚£ä¸ªç½‘é¡µå½“ä¸­éœ€è¦æ˜¾ç¤ºçš„å†…å®¹å¹¶æ²¡æœ‰å‘ˆç°å‡ºæ¥ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™æ­£åœ¨å»æ‰§è¡Œæˆ‘ä»¬çš„è„šæœ¬ã€‚

![é¡µé¢æ˜¾ç¤º](assets/img/2021-11-09-00-49-44.png)

è„šæœ¬æ‰§è¡Œå®Œæˆï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç‚¹å‡»å®Œæˆè¿‡åæ‰ä¼šå»æ˜¾ç¤ºæˆ‘ä»¬æƒ³è¦æ˜¾ç¤ºçš„å†…å®¹ã€‚

é‚£è¿™ä¸ªæ—¶å€™å¦‚æœè¯´æˆ‘ä»¬å»æ·»åŠ äº†ä¸€ä¸ª`type="module"`çš„è¯ï¼Œé‚£å°±ç›¸å½“äºè®©è¿™ä¸ªè„šæœ¬å¯ç”¨ä¸€ä¸ªå»¶è¿Ÿæ‰§è¡Œçš„è¿™æ ·ä¸€ä¸ªæœºåˆ¶ -> å»¶è¿Ÿæ‰§è¡Œå®ƒä¼šç­‰å¾…ç½‘é¡µçš„æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ç½‘é¡µçš„æ¸²æŸ“å®Œæˆäº†è¿‡åå†å»æ‰§è¡Œæˆ‘ä»¬çš„è„šæœ¬ï¼Œé‚£è¿™ä¸ªæ—¶å€™å°±ä¸ä¼šé˜»ç¢æˆ‘ä»¬é¡µé¢å½“ä¸­å…ƒç´ çš„æ˜¾ç¤º -> è¿™ä¸€ç‚¹å°±è·Ÿæˆ‘ä»¬ä½¿ç”¨ `defer` å±æ€§æ˜¯ä¸€æ ·çš„ã€‚

![ESM](assets/img/2021-11-09-00-53-14.png)

> `<script defer src="demo.js"></script>`

æ‰€ä»¥è¿™ä¸ªå°ç‰¹ç‚¹å®é™…ä¸Šä¹Ÿæ˜¯ ES Modules å½“ä¸­å¯¹ `script` æ ‡ç­¾åšçš„ä¸€ä¸ªå°å°çš„æ”¹è¿›ã€‚

ğŸ’¡ï¼š`defer` vs `async`ï¼Ÿ

![defer vs async](assets/img/2021-11-09-00-17-56.png)

ä¸ç®¡æ˜¯`async`è¿˜æ˜¯`defer`ï¼Œè¿™ä¿©å…„å¼Ÿéƒ½åªé€‚ç”¨äºå¤–éƒ¨ JS æ–‡ä»¶

![async defer](assets/img/2021-11-09-00-40-27.png)

> åœ¨ç°å®å½“ä¸­ï¼Œå»¶è¿Ÿè„šæœ¬å¹¶ä¸ä¸€å®šä¼šæŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œä¹Ÿä¸ä¸€å®šä¼šåœ¨ `DOMContentLoaded` äº‹ä»¶è§¦å‘å‰æ‰§è¡Œï¼Œå› æ­¤æœ€å¥½åªåŒ…å«ä¸€ä¸ªå»¶è¿Ÿè„šæœ¬ -> JavaScript é«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬ 3 ç‰ˆï¼‰ï¼Œäººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾ï¼ŒKindle ä½ç½® ï¼ˆ639-641) 

â¹ï¼š[ä¸€å›¾çœ‹æ‡‚ script æ ‡ç­¾ä¸­ defer å’Œ async çš„åŒºåˆ«_å°å°å‰ç«¯-CSDN åšå®¢](https://blog.csdn.net/weixin_43967603/article/details/106309099)

â¹ï¼š[defer å’Œ async çš„åŒºåˆ« - SegmentFault æ€å¦](https://segmentfault.com/q/1010000000640869)

â¹ï¼š[async vs defer attributes -  Growing with the Web](https://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html)

â¹ï¼š[è„šæœ¬ï¼šasyncï¼Œdefer](https://zh.javascript.info/script-async-defer)

ğŸ’¡ï¼šé¡µé¢ç”Ÿå‘½å‘¨æœŸï¼š`DOMContentLoaded`ã€`load`ï¼Ÿ

- `DOMContentLoaded` â€”â€” æµè§ˆå™¨å·²å®Œå…¨åŠ è½½ HTMLï¼Œå¹¶æ„å»ºäº† DOM æ ‘ï¼Œä½†åƒ `<img>` å’Œæ ·å¼è¡¨ä¹‹ç±»çš„å¤–éƒ¨èµ„æºå¯èƒ½å°šæœªåŠ è½½å®Œæˆã€‚
- `load` â€”â€” æµè§ˆå™¨ä¸ä»…åŠ è½½å®Œæˆäº† HTMLï¼Œè¿˜åŠ è½½å®Œæˆäº†æ‰€æœ‰å¤–éƒ¨èµ„æºï¼šå›¾ç‰‡ï¼Œæ ·å¼ç­‰

â¹ï¼š[é¡µé¢ç”Ÿå‘½å‘¨æœŸï¼šDOMContentLoadedï¼Œloadï¼Œbeforeunloadï¼Œunload](https://zh.javascript.info/onload-ondomcontentloaded)

6ï¼‰å°ç»“

æ€»çš„å›é¡¾ä¸€ä¸‹ï¼Œæˆ‘ä»¬åœ¨ ES Modules å½“ä¸­æœ‰è¿™ä¹ˆå››ä¸ªå°ç‰¹ç‚¹ï¼Œè¿™å››ä¸ªç‰¹ç‚¹åˆ†åˆ«æ˜¯ï¼š

- æˆ‘ä»¬åœ¨ ES Modules å½“ä¸­ä¼šè‡ªåŠ¨å»å¯ç”¨ä¸¥æ ¼æ¨¡å¼
- å¦å¤–ï¼Œæ¯ä¸€ä¸ª ES æ¨¡å—å®ƒéƒ½ä¼šæœ‰ä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸ -> è¿™ä¸€ç‚¹å®é™…ä¸Šæ˜¯éå¸¸é‡è¦çš„
- ç„¶åç¬¬ä¸‰ä¸ªå°±æ˜¯ ES Modules å¯¹äºå¤–éƒ¨æ–‡ä»¶çš„è¯·æ±‚ï¼Œå®ƒæ˜¯é€šè¿‡ CORS è¿™ç§è·¨åŸŸè¯·æ±‚çš„æ–¹å¼å»è¯·æ±‚çš„ -> è¿™ä¸ªæ—¶å€™ä½ éœ€è¦å»æ³¨æ„ä½ è¯·æ±‚çš„é‚£ä¸ªåœ°å€å¿…é¡»è¦æ”¯æŒ CORS
- ç„¶åæœ€åä¸€ä¸ªå°±æ˜¯ ES Modules å½“ä¸­å¯¹äº `script` æ ‡ç­¾é»˜è®¤å¯ç”¨äº†å»¶è¿Ÿæ‰§è¡Œè„šæœ¬çš„è¿™æ ·ä¸€ä¸ªæœºåˆ¶ -> è¿™ä¸ªä¹Ÿæ˜¯ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ä¸€ä¸ªå°ç‚¹ã€‚å› ä¸ºè¿™ä¼šå¯¼è‡´æœ‰çš„æ—¶å€™æˆ‘ä»¬å»çœ‹ `console.log()`ï¼Œä½ ä¼šå‘ç°ä¸åŒçš„æ¨¡å—å®ƒçš„æ‰§è¡Œé¡ºåºå¹¶ä¸è·Ÿä½ çš„å¼•å…¥é¡ºåºæ˜¯ä¸€æ ·çš„ï¼Œé‚£è¿™ä¸ªæ˜¯éœ€è¦æ³¨æ„çš„ï¼

![å››ä¸ªå°ç‰¹ç‚¹](assets/img/2021-11-08-22-52-47.png)

## â˜…ES Modules å¯¼å‡º

![ES Modules å¯¼å‡º](assets/img/2021-11-09-00-58-44.png)